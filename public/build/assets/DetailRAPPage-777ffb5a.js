import{i as X,d as N,e as j,f as de,g as pe,Q as U,a as F,b as me,n as ce,_ as fe,c as _e}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-84cf796f.js";import{d as $,l as ge,j as H,o as g,e as B,a as e,C as be,w as o,b as p,t as h,u as a,g as d,c as v,h as _,A as O,Q as S,y as he,F as Y,k as re,s as A,T,p as L,q as P,i as Z,v as M,x as z,D as ve,E as ye,m as ke,Z as we,n as Re}from"./app-456b7b81.js";import{a as E,b as f,c as Ce,d as Ve,Q as K}from"./QTable-777e4ca6.js";import{Q as J}from"./QTooltip-5a592d07.js";import{u as W}from"./use-quasar-53e0b1d3.js";import{a as q,t as x,s as se}from"./money-915f7772.js";import{u as Q,Q as ee}from"./use-dialog-plugin-component-b08011d3.js";import{Q as xe}from"./QFile-d592927f.js";import{Q as ae}from"./QForm-1fc4bb1a.js";import{m as le,f as ne}from"./options-4b88285e.js";import{Q as oe,a as Se}from"./QFab-d04d99de.js";import{Q as ie,_ as Ae}from"./ModuleTopSection.vue_vue_type_script_setup_true_lang-2402d78c.js";import"./QImg-62f985a3.js";import"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-10c56c26.js";const Pe={class:"q-pa-md"},Qe={class:"q-gutter-sm"},$e={class:"text-caption"},De=$({__name:"RAPItemTable",props:{rows:{},data:{},formOptions:{}},setup(y){const i=y,m=ge(()=>{var te;const t=i.rows.reduce((G,I)=>G+q(I.harga_satuan)*q(I.volume),0),w=i.data.detailRab.reduce((G,I)=>G+q(I.harga_satuan)*q(I.volume),0),s=q((te=i.data.rab)==null?void 0:te.additional_tax)/100*w,r=w-s,n=r-t,ue=n/r*100;return{rap:t,netto:r,laba:n,labaPercentage:ue}}),l=W();function R(){l.dialog({component:Ue,componentProps:{id_rap:i.data.rap.id_rap}}).onOk(t=>{l.notify({type:t.type,message:t.message,position:"top"})})}function k(){l.dialog({component:Me,componentProps:{rap:i.data.rap,options:i.formOptions}}).onOk(t=>{l.notify({type:t.type,message:t.message,position:"top"})})}function u(t){l.dialog({component:oa,componentProps:{detailRap:t,options:i.formOptions}}).onOk(w=>{l.notify({type:w.type,message:w.message,position:"top"})})}function C(t){l.dialog({component:la,componentProps:{id_detail_rap:t}}).onOk(w=>{l.notify({type:w.type,message:w.message,position:"top"})})}const c=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"status_uraian",label:"Status",field:"status_uraian",align:"left",sortable:!0},{name:"nama_satuan",label:"Satuan",field:"nama_satuan",align:"left",sortable:!0},{name:"harga_satuan",label:"Harga Satuan",field:"harga_satuan",align:"right",sortable:!0},{name:"volume",label:"Volume",field:"volume",align:"left",sortable:!0},{name:"total_harga",label:"Total Harga",field:"",align:"right",sortable:!0},{name:"keterangan",label:"Ket",field:"keterangan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],b=H(!1);function V(){b.value=!b.value}const D=H("");return(t,w)=>(g(),B("div",Pe,[e(Ce,{flat:"",bordered:"","row-key":"id_detail_rap",rows:t.rows,columns:c,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:b.value,filter:D.value},be({"top-left":o(()=>[d("div",Qe,[a(X)()||a(N)("create & modify rap")&&a(j)(t.data.rap)?(g(),v(_,{key:0,"no-caps":"",label:"Tambah Uraian RAP",icon:"add",color:"primary",onClick:k})):O("",!0),a(X)()||a(N)("create & modify rap")&&a(j)(t.data.rab)?(g(),v(_,{key:1,"no-caps":"",label:"Import dari CSV/XLS",icon:"upload_file",color:"green-8",onClick:R})):O("",!0)])]),"top-right":o(()=>[e(S,{dense:"",debounce:"300",modelValue:D.value,"onUpdate:modelValue":w[0]||(w[0]=s=>D.value=s),placeholder:"Search"},{append:o(()=>[e(he,{name:"search"})]),_:1},8,["modelValue"]),e(_,{flat:"",dense:"",icon:b.value?"fullscreen_exit":"fullscreen",onClick:V,class:"q-ml-md"},null,8,["icon"])]),header:o(s=>[e(E,{props:s},{default:o(()=>[(g(!0),B(Y,null,re(s.cols,r=>(g(),v(Ve,{key:r.name,props:s,style:{"font-weight":"bold"}},{default:o(()=>[p(h(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:o(s=>[e(E,{props:s},{default:o(()=>[e(f,{key:"index",props:s},{default:o(()=>[p(h(++s.rowIndex),1)]),_:2},1032,["props"]),e(f,{key:"uraian",props:s},{default:o(()=>[p(h(s.row.uraian),1)]),_:2},1032,["props"]),e(f,{key:"status_uraian",props:s},{default:o(()=>[p(h(s.row.status_uraian),1)]),_:2},1032,["props"]),e(f,{key:"nama_satuan",props:s},{default:o(()=>[p(h(s.row.nama_satuan),1)]),_:2},1032,["props"]),e(f,{key:"harga_satuan",props:s},{default:o(()=>[p(h(a(x)(s.row.harga_satuan)),1)]),_:2},1032,["props"]),e(f,{key:"volume",props:s},{default:o(()=>[p(h(s.row.volume),1)]),_:2},1032,["props"]),e(f,{key:"total_harga",props:s},{default:o(()=>[p(h(a(x)(s.row.harga_satuan*s.row.volume)),1)]),_:2},1032,["props"]),e(f,{key:"keterangan",props:s},{default:o(()=>[p(h(s.row.keterangan),1)]),_:2},1032,["props"]),e(f,{key:"actions",props:s},{default:o(()=>[a(X)()||a(N)("create & modify rap")&&a(j)(t.data.rap)?(g(),v(_,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:o(()=>[e(de,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[e(pe,{dense:"",style:{"min-width":"100px"}},{default:o(()=>[e(U,{clickable:""},{default:o(()=>[e(F,{onClick:r=>u(s.row)},{default:o(()=>[p(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e(A),e(U,{clickable:""},{default:o(()=>[e(F,{class:"text-red",onClick:r=>C(s.row.id_detail_rap)},{default:o(()=>[p(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(g(),v(_,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:o(()=>[e(J,null,{default:o(()=>[p("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:2},[t.rows.length?{name:"bottom-row",fn:o(()=>[e(E,{"no-hover":""},{default:o(()=>[e(f,{colspan:"5",style:{border:"none"}}),e(f,{class:"text-right"},{default:o(()=>[p(" Total RAP ")]),_:1}),e(f,{class:"text-right text-weight-bold"},{default:o(()=>[p(h(a(x)(m.value.rap)),1)]),_:1}),e(f,{colspan:"2",style:{border:"none"}})]),_:1}),e(E,{"no-hover":""},{default:o(()=>[e(f,{colspan:"5",style:{border:"none"}}),e(f,{class:"text-right"},{default:o(()=>[p(" Nilai Netto ")]),_:1}),e(f,{class:"text-right text-weight-bold"},{default:o(()=>[p(h(a(x)(m.value.netto)),1)]),_:1}),e(f,{colspan:"2",style:{border:"none"}})]),_:1}),e(E,{"no-hover":""},{default:o(()=>[e(f,{colspan:"5",style:{border:"none"}}),e(f,{class:"text-right"},{default:o(()=>[p(" Proyeksi Laba ")]),_:1}),e(f,{class:"text-right text-weight-bold"},{default:o(()=>[p(h(a(x)(m.value.laba))+" ",1),d("span",$e," ("+h(m.value.labaPercentage.toFixed(2)+"%")+") ",1)]),_:1}),e(f,{colspan:"2",style:{border:"none"}})]),_:1})]),key:"0"}:void 0]),1032,["rows","fullscreen","filter"])]))}}),qe=d("div",{class:"text-h6"},"Import Uraian RAP",-1),Oe={class:"q-gutter-md"},Ue=$({__name:"RAPItemImportDialog",props:{id_rap:{}},emits:[...Q.emits],setup(y){const i=y,{dialogRef:m,onDialogOK:l,onDialogCancel:R,onDialogHide:k}=Q(),u=T({file:null});function C(){u.post(route("detail_rap.import",i.id_rap),{onSuccess:c=>{l({type:"positive",message:c.props.flash.success})}})}return(c,b)=>(g(),v(L,{ref_key:"dialogRef",ref:m,"no-backdrop-dismiss":!0,onHide:a(k)},{default:o(()=>[e(z,{style:{width:"500px","max-width":"80vw"}},{default:o(()=>[e(P,{class:"row items-center q-pb-none"},{default:o(()=>[qe,e(ee),e(_,{flat:"",round:"",dense:"",icon:"close",onClick:a(R)},null,8,["onClick"])]),_:1}),e(A),e(ae,{onSubmit:Z(C,["prevent"])},{default:o(()=>[e(P,{class:"scroll"},{default:o(()=>[d("div",Oe,[e(_,{color:"green-8",icon:"download",label:"Template",href:"/storage/uploads/template_uraian_rap.xlsx"},{default:o(()=>[e(J,null,{default:o(()=>[p("Download template CSV/XLS")]),_:1})]),_:1}),e(xe,{outlined:"",counter:"","hide-bottom-space":"",modelValue:a(u).file,"onUpdate:modelValue":b[0]||(b[0]=V=>a(u).file=V),label:"Pick file",hint:"Format: csv, xlsx",error:!!a(u).errors.file,"error-message":a(u).errors.file},null,8,["modelValue","error","error-message"])])]),_:1}),e(A),e(M,{align:"right"},{default:o(()=>[a(u).hasErrors?(g(),v(_,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:b[1]||(b[1]=V=>a(u).clearErrors())})):O("",!0),e(_,{flat:"",label:"Reset",color:"secondary",onClick:b[2]||(b[2]=V=>a(u).reset())}),e(_,{flat:"",type:"submit",label:"Import",color:"primary",loading:a(u).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Fe=d("div",{class:"text-h6"},"Tambah Uraian RAP",-1),He={class:"q-gutter-md"},Te={class:"row"},Ie={class:"col-12 col-md-6 q-pr-sm"},Ee={class:"col-12 col-md-6 q-pl-sm"},Ne={class:"row"},je={class:"col-12 col-md-6 q-pr-sm"},Be={class:"col-12 col-md-6 q-pl-sm text-right"},Ke=d("div",{class:"text-secondary text-caption"},"Total Harga",-1),Le={class:"text-weight-bold text-subtitle1"},Me=$({__name:"RAPItemCreateDialog",props:{rap:{},options:{}},emits:[...Q.emits],setup(y){const i=y,{dialogRef:m,onDialogOK:l,onDialogCancel:R,onDialogHide:k}=Q(),u=["Gaji","Sewa","Beli","Subkon/Vendor"],C=H(u),c=H(i.options.satuan);function b(s,r){r(()=>{c.value=le(s,i.options.satuan,["nama_satuan"])})}function V(s,r){r(()=>{C.value=ne(s,u)})}async function D(s){if(typeof s=="string"){const r=await se(s);t.harga_satuan=r}}const t=T({uraian:null,status_uraian:null,harga_satuan:0,volume:0,keterangan:null,id_satuan:null});function w(){t.post(route("detail_rap.store",i.rap.id_rap),{onSuccess:s=>{l({type:"positive",message:s.props.flash.success})}})}return(s,r)=>(g(),v(L,{ref_key:"dialogRef",ref:m,"no-backdrop-dismiss":!0,onHide:a(k)},{default:o(()=>[e(z,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(P,{class:"row items-center q-pb-none"},{default:o(()=>[Fe,e(ee),e(_,{flat:"",round:"",dense:"",icon:"close",onClick:a(R)},null,8,["onClick"])]),_:1}),e(A),e(ae,{onSubmit:Z(w,["prevent"])},{default:o(()=>[e(P,{class:"scroll"},{default:o(()=>[d("div",He,[e(S,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(t).uraian,"onUpdate:modelValue":r[0]||(r[0]=n=>a(t).uraian=n),error:!!a(t).errors.uraian,"error-message":a(t).errors.uraian},null,8,["modelValue","error","error-message"]),e(K,{outlined:"","use-input":"","hide-bottom-space":"","input-debounce":"500",label:"Status",modelValue:a(t).status_uraian,"onUpdate:modelValue":r[1]||(r[1]=n=>a(t).status_uraian=n),options:C.value,error:!!a(t).errors.status_uraian,"error-message":a(t).errors.status_uraian,onFilter:V},{"no-option":o(()=>[e(U,null,{default:o(()=>[e(F,{class:"text-grey"},{default:o(()=>[p(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),e(K,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Satuan",modelValue:a(t).id_satuan,"onUpdate:modelValue":r[2]||(r[2]=n=>a(t).id_satuan=n),"option-value":"id_satuan","option-label":"nama_satuan",options:c.value,error:!!a(t).errors.id_satuan,"error-message":a(t).errors.id_satuan,onFilter:b},{"no-option":o(()=>[e(U,null,{default:o(()=>[e(F,{class:"text-grey"},{default:o(()=>[p(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),d("div",Te,[d("div",Ie,[e(S,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:a(t).harga_satuan,"onUpdate:modelValue":[r[3]||(r[3]=n=>a(t).harga_satuan=n),r[4]||(r[4]=n=>D(n))],hint:a(x)(a(t).harga_satuan),"hide-hint":a(t).harga_satuan<1,error:!!a(t).errors.harga_satuan,"error-message":a(t).errors.harga_satuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),d("div",Ee,[e(S,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:a(t).volume,"onUpdate:modelValue":r[5]||(r[5]=n=>a(t).volume=n),error:!!a(t).errors.volume,"error-message":a(t).errors.volume,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),d("div",Ne,[d("div",je,[e(S,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keterangan",modelValue:a(t).keterangan,"onUpdate:modelValue":r[6]||(r[6]=n=>a(t).keterangan=n),error:!!a(t).errors.keterangan,"error-message":a(t).errors.keterangan},null,8,["modelValue","error","error-message"])]),d("div",Be,[Ke,d("div",Le,h(a(x)(a(t).harga_satuan*a(t).volume)),1)])])])]),_:1}),e(A),e(M,{align:"right"},{default:o(()=>[a(t).hasErrors?(g(),v(_,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[7]||(r[7]=n=>a(t).clearErrors())})):O("",!0),e(_,{flat:"",label:"Reset",color:"secondary",onClick:r[8]||(r[8]=n=>a(t).reset())}),e(_,{flat:"",type:"submit",label:"Submit",color:"primary",loading:a(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ze=d("div",{class:"text-h6"},"Edit Uraian RAP",-1),Ge={class:"q-gutter-md"},Xe={class:"row"},Ye={class:"col-12 col-md-6 q-pr-sm"},Ze={class:"col-12 col-md-6 q-pl-sm"},Je={class:"row"},We={class:"col-12 col-md-6 q-pr-sm"},ea={class:"col-12 col-md-6 q-pl-sm text-right"},aa=d("div",{class:"text-secondary text-caption"},"Total Harga",-1),ta={class:"text-weight-bold text-subtitle1"},oa=$({__name:"RAPItemEditDialog",props:{detailRap:{},options:{}},emits:[...Q.emits],setup(y){const i=y,{dialogRef:m,onDialogOK:l,onDialogCancel:R,onDialogHide:k}=Q(),u=["Gaji","Sewa","Beli","Subkon/Vendor"],C=H(u),c=H(i.options.satuan);function b(s,r){r(()=>{c.value=le(s,i.options.satuan,["nama_satuan"])})}function V(s,r){r(()=>{C.value=ne(s,u)})}async function D(s){if(typeof s=="string"){const r=await se(s);t.harga_satuan=r}}const t=T({uraian:i.detailRap.uraian,status_uraian:i.detailRap.status_uraian,harga_satuan:q(i.detailRap.harga_satuan),volume:q(i.detailRap.volume),keterangan:i.detailRap.keterangan,id_satuan:i.detailRap.id_satuan});function w(){t.patch(route("detail_rap.update",i.detailRap.id_detail_rap),{onSuccess:s=>{l({type:"positive",message:s.props.flash.success})}})}return(s,r)=>(g(),v(L,{ref_key:"dialogRef",ref:m,"no-backdrop-dismiss":!0,onHide:a(k)},{default:o(()=>[e(z,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(P,{class:"row items-center q-pb-none"},{default:o(()=>[ze,e(ee),e(_,{flat:"",round:"",dense:"",icon:"close",onClick:a(R)},null,8,["onClick"])]),_:1}),e(A),e(ae,{onSubmit:Z(w,["prevent"])},{default:o(()=>[e(P,{class:"scroll"},{default:o(()=>[d("div",Ge,[e(S,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(t).uraian,"onUpdate:modelValue":r[0]||(r[0]=n=>a(t).uraian=n),error:!!a(t).errors.uraian,"error-message":a(t).errors.uraian},null,8,["modelValue","error","error-message"]),e(K,{outlined:"",clearable:"","use-input":"","hide-bottom-space":"","input-debounce":"500",label:"Status",modelValue:a(t).status_uraian,"onUpdate:modelValue":r[1]||(r[1]=n=>a(t).status_uraian=n),options:C.value,error:!!a(t).errors.status_uraian,"error-message":a(t).errors.status_uraian,onFilter:V},{"no-option":o(()=>[e(U,null,{default:o(()=>[e(F,{class:"text-grey"},{default:o(()=>[p(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),e(K,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Satuan",modelValue:a(t).id_satuan,"onUpdate:modelValue":r[2]||(r[2]=n=>a(t).id_satuan=n),"option-value":"id_satuan","option-label":"nama_satuan",options:c.value,error:!!a(t).errors.id_satuan,"error-message":a(t).errors.id_satuan,onFilter:b},{"no-option":o(()=>[e(U,null,{default:o(()=>[e(F,{class:"text-grey"},{default:o(()=>[p(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),d("div",Xe,[d("div",Ye,[e(S,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:a(t).harga_satuan,"onUpdate:modelValue":[r[3]||(r[3]=n=>a(t).harga_satuan=n),r[4]||(r[4]=n=>D(n))],hint:a(x)(a(t).harga_satuan),"hide-hint":a(t).harga_satuan<1,error:!!a(t).errors.harga_satuan,"error-message":a(t).errors.harga_satuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),d("div",Ze,[e(S,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:a(t).volume,"onUpdate:modelValue":r[5]||(r[5]=n=>a(t).volume=n),error:!!a(t).errors.volume,"error-message":a(t).errors.volume,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),d("div",Je,[d("div",We,[e(S,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keterangan",modelValue:a(t).keterangan,"onUpdate:modelValue":r[6]||(r[6]=n=>a(t).keterangan=n),error:!!a(t).errors.keterangan,"error-message":a(t).errors.keterangan},null,8,["modelValue","error","error-message"])]),d("div",ea,[aa,d("div",ta,h(a(x)(a(t).harga_satuan*a(t).volume)),1)])])])]),_:1}),e(A),e(M,{align:"right"},{default:o(()=>[a(t).hasErrors?(g(),v(_,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[7]||(r[7]=n=>a(t).clearErrors())})):O("",!0),e(_,{flat:"",label:"Reset",color:"secondary",onClick:r[8]||(r[8]=n=>a(t).reset())}),e(_,{flat:"",type:"submit",label:"Update",color:"primary",loading:a(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ra=d("div",{class:"text-h6"},"Delete Confirmation",-1),sa=d("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),la=$({__name:"RAPItemDeleteDialog",props:{id_detail_rap:{}},emits:[...Q.emits],setup(y){const i=y,{dialogRef:m,onDialogOK:l,onDialogCancel:R,onDialogHide:k}=Q(),u=T({id_detail_rap:i.id_detail_rap});function C(){u.delete(route("detail_rap.destroy",i.id_detail_rap),{onSuccess:c=>{l({type:"positive",message:c.props.flash.success})}})}return(c,b)=>(g(),v(L,{ref_key:"dialogRef",ref:m,"no-backdrop-dismiss":!0,onHide:a(k)},{default:o(()=>[e(z,null,{default:o(()=>[e(P,{class:"row items-center q-pb-none"},{default:o(()=>[ra]),_:1}),e(A),e(P,{class:"row items-center"},{default:o(()=>[e(ve,{icon:"dangerous",color:"red","text-color":"white"}),sa]),_:1}),e(M,{align:"right"},{default:o(()=>[e(_,{flat:"",label:"Cancel",color:"primary",onClick:a(R)},null,8,["onClick"]),e(_,{flat:"",label:"Yes, delete it",color:"red",onClick:C})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),na=$({__name:"RAPApprovalForm",props:{data:{}},setup(y){const i=y,m=W(),l=T({catatan:""});function R(){l.post(route("rap.approve",i.data.id_rap),{onSuccess:c=>{m.notify({type:"positive",message:c.props.flash.success,position:"top"})}})}function k(){l.post(route("rap.reject",i.data.id_rap),{onSuccess:c=>{m.notify({type:"positive",message:c.props.flash.success,position:"top"})}})}function u(){m.dialog({title:"Approval Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"positive",cancel:!0,persistent:!0}).onOk(c=>{l.catatan=c,R()})}function C(){m.dialog({title:"Rejection Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"negative",cancel:!0,persistent:!0}).onOk(c=>{l.catatan=c,k()})}return(c,b)=>(g(),v(ie,{position:"bottom-right",offset:[18,18]},{default:o(()=>[e(Se,{color:"primary",icon:"keyboard_arrow_left",direction:"left"},{label:o(({opened:V})=>[d("div",{class:ye({"example-fab-animate--hover":V!==!0})},h(V!==!0?"Approval":"Close"),3)]),default:o(()=>[e(oe,{color:"green-5",label:"Setujui",icon:"check",onClick:u}),e(oe,{color:"red",label:"Tolak",icon:"clear",onClick:C})]),_:1})]),_:1}))}}),ia=$({__name:"RAPSubmissionForm",props:{data:{}},setup(y){const i=y,m=W(),l=T({catatan:""});function R(){l.post(route("rap.submit",i.data.id_rap),{onSuccess:u=>{m.notify({type:"positive",message:u.props.flash.success,position:"top"})}})}function k(){m.dialog({title:"Submission Confirmation",message:"Are you sure want to submit this data?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"primary",cancel:!0,persistent:!0}).onOk(u=>{l.catatan=u,R()})}return(u,C)=>(g(),v(ie,{position:"bottom-right",offset:[18,18]},{default:o(()=>[e(_,{rounded:"",color:"primary",label:"Submit","icon-right":"check",onClick:k,class:"q-pa-md"},{default:o(()=>[e(J,null,{default:o(()=>[p("Click to submit")]),_:1})]),_:1})]),_:1}))}}),Ra=$({__name:"DetailRAPPage",props:{rap:{},detailRap:{},rab:{},detailRab:{},formOptions:{},timeline:{}},setup(y){const i=y,m=[{label:"Main",url:"#"},{label:"RAP",url:route("rap")},{label:i.rap.nama_proyek,url:"#"}];return(l,R)=>{const k=ke("in-link");return g(),B(Y,null,[e(a(we),{title:"RAPP"}),e(fe,null,{breadcrumbs:o(()=>[e(me,{align:"left"},{default:o(()=>[(g(),B(Y,null,re(m,u=>Re(e(_e,{key:u.label,label:u.label},null,8,["label"]),[[k,u.url]])),64))]),_:1})]),default:o(()=>[e(Ae,{title:"RAP","timeline-title":"Timeline Pengajuan RAP",data:{proyek:l.rap,status:l.rap.status_rap,timeline:l.timeline}},null,8,["data"]),e(a(De),{rows:l.detailRap,data:{rap:l.rap,rab:l.rab,detailRab:l.detailRab},"form-options":l.formOptions},null,8,["rows","data","form-options"]),a(N)("create & modify rap")&&a(j)(l.rap)&&l.detailRap.length?(g(),v(a(ia),{key:0,data:{id_rap:l.rap.id_rap}},null,8,["data"])):O("",!0),a(N)("approve rap")&&a(ce)(l.rap)?(g(),v(a(na),{key:1,data:{id_rap:l.rap.id_rap}},null,8,["data"])):O("",!0)]),_:1})],64)}}});export{Ra as default};
