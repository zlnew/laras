import{d as U,K as z,b as F,T as H,k as R,e as b,c as f,h as a,u as e,g as n,F as x,o,Z as A,n as P,j as w,a as r,f as d,l as p,p as $,i as I,m as T,q as Z,y as k,t as g}from"./app-d8617931.js";import{_ as G,a as J,C as O}from"./Content-5cc1c58b.js";import{C as Q,a as W,_ as X}from"./Card-7cb1e392.js";import{T as Y,a as aa,_ as h,b as u,c as ea,d as l}from"./Table-c8958af1.js";import{_ as na}from"./Input.vue_vue_type_script_setup_true_lang-62b0e882.js";import{M as y}from"./modal-bcd44fbd.js";import{T as j}from"./toastify-87749bbf.js";import{_ as ta}from"./Create.m.vue_vue_type_script_setup_true_lang-6eb6647d.js";import{_ as sa}from"./Edit.m.vue_vue_type_script_setup_true_lang-125b18e4.js";import{_ as oa}from"./Delete.m.vue_vue_type_script_setup_true_lang-2f0624d8.js";import"./Modal.vue_vue_type_style_index_0_scoped_fdb70d85_lang-e5086b2c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Footer-83a73d6d.js";import"./Head.vue_vue_type_script_setup_true_lang-d7fd5c8e.js";import"./Label.vue_vue_type_script_setup_true_lang-add11eb1.js";import"./Error.vue_vue_type_script_setup_true_lang-83417469.js";import"./Select.vue_vue_type_script_setup_true_lang-5a994cba.js";import"./Textarea.vue_vue_type_script_setup_true_lang-bacc59bf.js";const ra={class:"grid grid-cols-2 gap-4"},la={class:"space-x-2"},ia=["onSubmit"],ua={class:"flex justify-between items-center space-x-2"},da={class:"line-clamp-2 hover:line-clamp-none"},pa={class:"font-semibold text-dark"},ca={key:1},_a={class:"flex"},Ba=U({__name:"Index",props:{keuangan:{},proyek:{}},setup(K){const L=K,i=z(),m=i.props.permissions,V=i.props.query,v=F(()=>!!(m.includes("create pengajuan dana")&&m.includes("update pengajuan dana")&&m.includes("delete pengajuan dana"))),c=H({nama_proyek:V.nama_proyek});function B(){y.pop(ta,{daftar_proyek:L.proyek})}function D(s){y.pop(sa,{id_keuangan:s.id_keuangan,keperluan:s.keperluan})}function M(s){y.pop(oa,{id_keuangan:s})}function N(){c.get(route("keuangan"))}return R(()=>{i.props.flash.success&&j.success(i.props.flash.success),i.props.flash.error&&j.error(i.props.flash.error)}),(s,C)=>{const q=b("fas-icon"),_=b("ease-button");return o(),f(x,null,[a(e(A),{title:"Keuangan"}),a(G,null,{breadcrumb:n(()=>[a(J,P(w({second:"Keuangan",current:"Keuangan Proyek"})),null,16)]),default:n(()=>[a(O,null,{default:n(()=>[a(e(Q),null,{default:n(()=>[a(e(W),{class:"mb-4"},{default:n(()=>[r("div",ra,[r("div",la,[v.value?(o(),d(_,{key:0,onClick:B,slotted:""},{default:n(()=>[a(q,{icon:"fa-solid fa-plus",class:"mr-1"}),p(" Tambah Keuangan Proyek ")]),_:1})):$("",!0)]),r("form",{onSubmit:I(N,["prevent"])},[r("div",ua,[a(e(na),T({modelValue:e(c).nama_proyek,"onUpdate:modelValue":C[0]||(C[0]=t=>e(c).nama_proyek=t)},{type:"search",size:"lg",placeholder:"Cari Berdasarkan Nama Proyek",autocomplete:"off"}),null,16,["modelValue"]),a(_,P(w({type:"submit",text:"Cari",loading:e(c).processing,onLoading:()=>({text:!1})})),null,16)])],40,ia)])]),_:1}),a(e(X),{table:""},{default:n(()=>[a(e(Y),null,{default:n(()=>[a(e(aa),null,{default:n(()=>[a(e(h),null,{default:n(()=>[a(e(u),{value:"Nama Proyek"}),a(e(u),{value:"Tahun Anggaran"}),a(e(u),{value:"Keperluan"}),a(e(u),{value:"Pengajuan Dana"}),a(e(u),{value:"Pencairan Dana"}),a(e(u))]),_:1})]),_:1}),a(e(ea),null,{default:n(()=>[s.keuangan.data.length?(o(!0),f(x,{key:0},Z(s.keuangan.data,(t,E)=>(o(),d(e(h),T({key:t.id_proyek},{last:E===s.keuangan.data.length-1}),{default:n(()=>[a(e(l),null,{default:n(()=>[a(e(k),{class:"link",href:"#"},{default:n(()=>[r("span",da,g(t.nama_proyek),1)]),_:2},1024)]),_:2},1024),a(e(l),{whitespace:"nowrap"},{default:n(()=>[p(g(t.tahun_anggaran),1)]),_:2},1024),a(e(l),{whitespace:"nowrap"},{default:n(()=>[r("span",pa,g(t.keperluan),1)]),_:2},1024),a(e(l),{whitespace:"nowrap"},{default:n(()=>[a(e(k),{class:"link text-xs",href:s.route("pengajuan_dana.detail",t.id_pengajuan_dana)},{default:n(()=>[p(" Lihat ")]),_:2},1032,["href"])]),_:2},1024),a(e(l),{whitespace:"nowrap"},{default:n(()=>[t.id_pencairan_dana?(o(),d(e(k),{key:0,class:"link text-xs",href:s.route("pencairan_dana.detail",t.id_pencairan_dana)},{default:n(()=>[p(" Lihat ")]),_:2},1032,["href"])):(o(),f("span",ca,"-"))]),_:2},1024),v.value?(o(),d(e(l),{key:0,whitespace:"nowrap"},{default:n(()=>[r("div",_a,[a(_,{onClick:S=>D(t),variant:"link",text:"Edit"},null,8,["onClick"]),a(_,{onClick:S=>M(t.id_keuangan),variant:"danger-link",text:"Delete"},null,8,["onClick"])])]),_:2},1024)):$("",!0)]),_:2},1040))),128)):(o(),d(e(h),{key:1,last:""},{default:n(()=>[a(e(l),{colspan:"5","text-align":"center"},{default:n(()=>[p(" Keuangan proyek tidak ditemukan ")]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Ba as default};
