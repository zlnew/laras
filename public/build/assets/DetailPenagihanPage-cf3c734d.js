import{i as j,d as q,e as T,f as ua,g as pa,Q as ea,a as na,b as ga,h as ma,_ as _a,c as ca}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-b69e3ed2.js";import{d as L,l as ha,j as B,T as A,o as c,e as O,a as e,D as fa,w as n,b as g,t as m,u as a,c as y,Q as C,E as F,B as Q,g as r,h as V,z as ya,F as G,k as Z,f as ta,v as N,q as J,s as I,i as oa,x as Y,y as M,G as ba,n as ka,Z as va,p as Va}from"./app-a9c22e82.js";import{f as z}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-29a71a0e.js";import{a as H,b as d,c as la,d as ia,Q as wa}from"./QTable-0e41b0f2.js";import{Q as W}from"./datetime-dc60c162.js";import{Q as E}from"./QPopupEdit-4a5cd368.js";import{u as X}from"./use-quasar-954ed4d5.js";import{a as h,t as k,s as ra}from"./money-915f7772.js";import{u as R,Q as aa}from"./use-dialog-plugin-component-646efe56.js";import{Q as sa}from"./QForm-332245d0.js";import{Q as da,_ as xa}from"./ModuleTopSection.vue_vue_type_script_setup_true_lang-430fdd1b.js";import"./QImg-b742b038.js";import"./options-4b88285e.js";const Pa={class:"q-pa-md"},Ca={class:"q-gutter-sm"},$a={key:1},Sa=L({__name:"PenagihanItemTable",props:{rows:{},data:{}},setup(S){const _=S,w=ha(()=>{const b=_.rows.reduce((o,u)=>o+h(u.harga_satuan_penagihan)*h(u.volume_penagihan),0),l=b-h(t.potongan_ppn)-h(t.potongan_pph)-h(t.potongan_lainnya)-h(t.potongan_lainnya2)-h(t.potongan_lainnya3);return{penagihan:b,pencairan:l}}),s=X();function $(){s.dialog({component:Na,componentProps:{penagihan:_.data.penagihan}}).onOk(b=>{s.notify({type:b.type,message:b.message,position:"top"})})}function D(b){s.dialog({component:Ya,componentProps:{detailPenagihan:b}}).onOk(l=>{s.notify({type:l.type,message:l.message,position:"top"})})}function P(b){s.dialog({component:Xa,componentProps:{id_detail_penagihan:b}}).onOk(l=>{s.notify({type:l.type,message:l.message,position:"top"})})}const i=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"harga_satuan_penagihan",label:"Harga Satuan",field:"harga_satuan_penagihan",align:"right",sortable:!0},{name:"volume_penagihan",label:"Volume",field:"volume_penagihan",align:"right",sortable:!0},{name:"total_harga",label:"Total Harga",field:"total_harga",align:"right",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],x=B(!1);function f(){x.value=!x.value}const p=B(""),v=B([]),t=A({potongan_ppn:_.data.penagihan.potongan_ppn,potongan_pph:_.data.penagihan.potongan_pph,potongan_lainnya:_.data.penagihan.potongan_lainnya,potongan_lainnya2:_.data.penagihan.potongan_lainnya2,potongan_lainnya3:_.data.penagihan.potongan_lainnya3,keterangan_potongan_lainnya:_.data.penagihan.keterangan_potongan_lainnya,keterangan_potongan_lainnya2:_.data.penagihan.keterangan_potongan_lainnya2,keterangan_potongan_lainnya3:_.data.penagihan.keterangan_potongan_lainnya3});function U(){t.put(route("penagihan.tax",_.data.penagihan.id_penagihan),{preserveScroll:!0,onSuccess:()=>!0})}return(b,l)=>(c(),O("div",Pa,[e(la,{flat:"",bordered:"","row-key":"id_detail_penagihan",rows:b.rows,columns:i,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:x.value,filter:p.value,selection:"multiple",selected:v.value,"onUpdate:selected":l[17]||(l[17]=o=>v.value=o),class:"no-border"},fa({"top-left":n(()=>[r("div",Ca,[a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(V,{key:0,"no-caps":"",label:"Tambah Uraian",icon:"add",color:"primary",onClick:$})):Q("",!0)])]),"top-right":n(()=>[e(C,{dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=o=>p.value=o),placeholder:"Search"},{append:n(()=>[e(ya,{name:"search"})]),_:1},8,["modelValue"]),e(V,{flat:"",dense:"",icon:x.value?"fullscreen_exit":"fullscreen",onClick:f,class:"q-ml-md"},null,8,["icon"])]),header:n(o=>[e(H,{props:o},{default:n(()=>[(c(!0),O(G,null,Z(o.cols,u=>(c(),y(ia,{key:u.name,props:o,style:{"font-weight":"bold"}},{default:n(()=>[u.name==="penerimaan"?(c(),y(ta,{key:0,modelValue:o.selected,"onUpdate:modelValue":K=>o.selected=K,label:"Penerimaan"},null,8,["modelValue","onUpdate:modelValue"])):(c(),O("span",$a,m(u.label),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(o=>[e(H,{props:o},{default:n(()=>[e(d,{key:"index",props:o},{default:n(()=>[g(m(++o.rowIndex),1)]),_:2},1032,["props"]),e(d,{key:"uraian",props:o},{default:n(()=>[g(m(o.row.uraian),1)]),_:2},1032,["props"]),e(d,{key:"harga_satuan_penagihan",props:o},{default:n(()=>[g(m(a(k)(a(h)(o.row.harga_satuan_penagihan))),1)]),_:2},1032,["props"]),e(d,{key:"volume_penagihan",props:o},{default:n(()=>[g(m(a(h)(o.row.volume_penagihan)),1)]),_:2},1032,["props"]),e(d,{key:"total_harga",props:o},{default:n(()=>[g(m(a(k)(a(h)(o.row.harga_satuan_penagihan)*a(h)(o.row.volume_penagihan))),1)]),_:2},1032,["props"]),e(d,{key:"penerimaan",props:o},{default:n(()=>[e(ta,{modelValue:o.selected,"onUpdate:modelValue":u=>o.selected=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),e(d,{key:"actions",props:o},{default:n(()=>[a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(V,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:n(()=>[e(ua,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[e(pa,{dense:"",style:{"min-width":"100px"}},{default:n(()=>[e(ea,{clickable:"",onClick:u=>D(o.row)},{default:n(()=>[e(na,null,{default:n(()=>[g(" Edit ")]),_:1})]),_:2},1032,["onClick"]),e(N),e(ea,{clickable:"",onClick:u=>P(o.row.id_detail_penagihan)},{default:n(()=>[e(na,{class:"text-red"},{default:n(()=>[g(" Delete ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):(c(),y(V,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:n(()=>[e(W,null,{default:n(()=>[g("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:2},[b.rows.length?{name:"bottom-row",fn:n(()=>[e(H,{"no-hover":""},{default:n(()=>[e(d,{colspan:"3",style:{border:"none"}}),e(d,{class:"text-right"},{default:n(()=>[g(" Total Penagihan ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:n(()=>[g(m(a(k)(w.value.penagihan)),1)]),_:1}),e(d,{style:{border:"none"}})]),_:1}),e(H,{"no-hover":""},{default:n(()=>[e(d,{colspan:"3",style:{border:"none"}}),e(d,{class:"text-right"},{default:n(()=>[g(" Total Diterima ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:n(()=>[g(m(a(k)(a(h)(b.data.penagihan.jumlah_diterima))),1)]),_:1}),e(d,{style:{border:"none"}})]),_:1}),e(H,{"no-hover":""},{default:n(()=>[e(d,{colspan:"3",style:{border:"none"}}),e(d,{class:"text-right"},{default:n(()=>[g(" Potongan PPN ")]),_:1}),e(d,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:n(()=>[g(m(a(k)(a(h)(a(t).potongan_ppn)))+" ",1),a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(E,{key:0,modelValue:a(t).potongan_ppn,"onUpdate:modelValue":l[2]||(l[2]=o=>a(t).potongan_ppn=o),modelModifiers:{number:!0},title:"Potongan PPN",onHide:U},{default:n(o=>[e(C,{flat:"",dense:"",autofocus:"","hide-bottom-space":"",modelValue:a(t).potongan_ppn,"onUpdate:modelValue":l[1]||(l[1]=u=>a(t).potongan_ppn=u),hint:a(k)(a(h)(a(t).potongan_ppn)),error:!!a(t).errors.potongan_ppn,"error-message":a(t).errors.potongan_ppn,"input-class":"text-right",onKeyup:F(()=>{U(),o.set()},["enter"])},null,8,["modelValue","hint","error","error-message","onKeyup"])]),_:1},8,["modelValue"])):Q("",!0)]),_:1}),e(d,{style:{border:"none"}})]),_:1}),e(H,{"no-hover":""},{default:n(()=>[e(d,{colspan:"3",style:{border:"none"}}),e(d,{class:"text-right"},{default:n(()=>[g(" Potongan PPH ")]),_:1}),e(d,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:n(()=>[g(m(a(k)(a(h)(a(t).potongan_pph)))+" ",1),a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(E,{key:0,modelValue:a(t).potongan_pph,"onUpdate:modelValue":l[4]||(l[4]=o=>a(t).potongan_pph=o),modelModifiers:{number:!0},title:"Potongan PPH",onHide:U},{default:n(o=>[e(C,{flat:"",dense:"",autofocus:"","hide-bottom-space":"",modelValue:a(t).potongan_pph,"onUpdate:modelValue":l[3]||(l[3]=u=>a(t).potongan_pph=u),hint:a(k)(a(h)(a(t).potongan_pph)),error:!!a(t).errors.potongan_pph,"error-message":a(t).errors.potongan_pph,"input-class":"text-right",onKeyup:F(()=>{U(),o.set()},["enter"])},null,8,["modelValue","hint","error","error-message","onKeyup"])]),_:1},8,["modelValue"])):Q("",!0)]),_:1}),e(d,{style:{border:"none"}})]),_:1}),e(H,{"no-hover":""},{default:n(()=>[e(d,{colspan:"3",style:{border:"none"}}),e(d,{class:"text-right"},{default:n(()=>[g(" Potongan Lainnya #1 ")]),_:1}),e(d,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:n(()=>[g(m(a(k)(a(h)(a(t).potongan_lainnya)))+" ",1),a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(E,{key:0,modelValue:a(t).potongan_lainnya,"onUpdate:modelValue":l[6]||(l[6]=o=>a(t).potongan_lainnya=o),modelModifiers:{number:!0},title:"Potongan Lainnya #1",onHide:U},{default:n(o=>[e(C,{flat:"",dense:"",autofocus:"","hide-bottom-space":"",modelValue:a(t).potongan_lainnya,"onUpdate:modelValue":l[5]||(l[5]=u=>a(t).potongan_lainnya=u),hint:a(k)(a(h)(a(t).potongan_lainnya)),error:!!a(t).errors.potongan_lainnya,"error-message":a(t).errors.potongan_lainnya,"input-class":"text-right",onKeyup:F(()=>{U(),o.set()},["enter"])},null,8,["modelValue","hint","error","error-message","onKeyup"])]),_:1},8,["modelValue"])):Q("",!0)]),_:1}),e(d,{class:"text-primary",style:{cursor:"pointer"}},{default:n(()=>[g(m(a(t).keterangan_potongan_lainnya||"Tambah Keterangan")+" ",1),a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(E,{key:0,modelValue:a(t).keterangan_potongan_lainnya,"onUpdate:modelValue":l[8]||(l[8]=o=>a(t).keterangan_potongan_lainnya=o),title:"Keterangan Potongan Lainnya #1",onHide:U},{default:n(()=>[e(C,{flat:"",dense:"",autogrow:"",autofocus:"","hide-bottom-space":"",modelValue:a(t).keterangan_potongan_lainnya,"onUpdate:modelValue":l[7]||(l[7]=o=>a(t).keterangan_potongan_lainnya=o),error:!!a(t).errors.keterangan_potongan_lainnya,"error-message":a(t).errors.keterangan_potongan_lainnya},null,8,["modelValue","error","error-message"])]),_:1},8,["modelValue"])):Q("",!0)]),_:1})]),_:1}),e(H,{"no-hover":""},{default:n(()=>[e(d,{colspan:"3",style:{border:"none"}}),e(d,{class:"text-right"},{default:n(()=>[g(" Potongan Lainnya #2 ")]),_:1}),e(d,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:n(()=>[g(m(a(k)(a(h)(a(t).potongan_lainnya2)))+" ",1),a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(E,{key:0,modelValue:a(t).potongan_lainnya2,"onUpdate:modelValue":l[10]||(l[10]=o=>a(t).potongan_lainnya2=o),modelModifiers:{number:!0},title:"Potongan Lainnya #2",onHide:U},{default:n(o=>[e(C,{flat:"",dense:"",autofocus:"","hide-bottom-space":"",modelValue:a(t).potongan_lainnya2,"onUpdate:modelValue":l[9]||(l[9]=u=>a(t).potongan_lainnya2=u),hint:a(k)(a(h)(a(t).potongan_lainnya2)),error:!!a(t).errors.potongan_lainnya2,"error-message":a(t).errors.potongan_lainnya2,"input-class":"text-right",onKeyup:F(()=>{U(),o.set()},["enter"])},null,8,["modelValue","hint","error","error-message","onKeyup"])]),_:1},8,["modelValue"])):Q("",!0)]),_:1}),e(d,{class:"text-primary",style:{cursor:"pointer"}},{default:n(()=>[g(m(a(t).keterangan_potongan_lainnya2||"Tambah Keterangan")+" ",1),a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(E,{key:0,modelValue:a(t).keterangan_potongan_lainnya2,"onUpdate:modelValue":l[12]||(l[12]=o=>a(t).keterangan_potongan_lainnya2=o),title:"Keterangan Potongan Lainnya #2",onHide:U},{default:n(()=>[e(C,{flat:"",dense:"",autogrow:"",autofocus:"","hide-bottom-space":"",modelValue:a(t).keterangan_potongan_lainnya2,"onUpdate:modelValue":l[11]||(l[11]=o=>a(t).keterangan_potongan_lainnya2=o),error:!!a(t).errors.keterangan_potongan_lainnya2,"error-message":a(t).errors.keterangan_potongan_lainnya2},null,8,["modelValue","error","error-message"])]),_:1},8,["modelValue"])):Q("",!0)]),_:1})]),_:1}),e(H,{"no-hover":""},{default:n(()=>[e(d,{colspan:"3",style:{border:"none"}}),e(d,{class:"text-right"},{default:n(()=>[g(" Potongan Lainnya #3 ")]),_:1}),e(d,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:n(()=>[g(m(a(k)(a(h)(a(t).potongan_lainnya3)))+" ",1),a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(E,{key:0,modelValue:a(t).potongan_lainnya3,"onUpdate:modelValue":l[14]||(l[14]=o=>a(t).potongan_lainnya3=o),modelModifiers:{number:!0},title:"Potongan Lainnya #3",onHide:U},{default:n(o=>[e(C,{flat:"",dense:"",autofocus:"","hide-bottom-space":"",modelValue:a(t).potongan_lainnya3,"onUpdate:modelValue":l[13]||(l[13]=u=>a(t).potongan_lainnya3=u),hint:a(k)(a(h)(a(t).potongan_lainnya3)),error:!!a(t).errors.potongan_lainnya3,"error-message":a(t).errors.potongan_lainnya3,"input-class":"text-right",onKeyup:F(()=>{U(),o.set()},["enter"])},null,8,["modelValue","hint","error","error-message","onKeyup"])]),_:1},8,["modelValue"])):Q("",!0)]),_:1}),e(d,{class:"text-primary",style:{cursor:"pointer"}},{default:n(()=>[g(m(a(t).keterangan_potongan_lainnya3||"Tambah Keterangan")+" ",1),a(j)()||a(q)("create & modify penagihan")&&a(T)(b.data.penagihan)?(c(),y(E,{key:0,modelValue:a(t).keterangan_potongan_lainnya3,"onUpdate:modelValue":l[16]||(l[16]=o=>a(t).keterangan_potongan_lainnya3=o),title:"Keterangan Potongan Lainnya #3",onHide:U},{default:n(()=>[e(C,{flat:"",dense:"",autogrow:"",autofocus:"","hide-bottom-space":"",modelValue:a(t).keterangan_potongan_lainnya3,"onUpdate:modelValue":l[15]||(l[15]=o=>a(t).keterangan_potongan_lainnya3=o),error:!!a(t).errors.keterangan_potongan_lainnya3,"error-message":a(t).errors.keterangan_potongan_lainnya3},null,8,["modelValue","error","error-message"])]),_:1},8,["modelValue"])):Q("",!0)]),_:1})]),_:1}),e(H,{"no-hover":""},{default:n(()=>[e(d,{colspan:"3",style:{border:"none"}}),e(d,{class:"text-right"},{default:n(()=>[g(" Total Pencairan/Netto ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:n(()=>[g(m(a(k)(w.value.pencairan)),1)]),_:1}),e(d,{style:{border:"none"}})]),_:1})]),key:"0"}:void 0]),1032,["rows","fullscreen","filter","selected"])]))}}),Ua=r("div",{class:"text-h6"},"Tambah Uraian Penagihan",-1),Da={class:"q-gutter-md"},Qa={class:"row"},qa={class:"col-12 col-md-6 q-pr-sm"},Ha={class:"col-12 col-md-6 q-pl-sm"},Ta={class:"row"},Ka=r("div",{class:"col-12 col-md-6 q-pr-sm"},null,-1),ja={class:"col-12 col-md-6 q-pl-sm text-right"},Ia=r("div",{class:"text-secondary text-caption"},"Total Harga",-1),Ea={class:"text-weight-bold text-subtitle1"},Na=L({__name:"PenagihanItemCreateDialog",props:{penagihan:{}},emits:[...R.emits],setup(S){const _=S,{dialogRef:w,onDialogOK:s,onDialogCancel:$,onDialogHide:D}=R();async function P(f){if(typeof f=="string"){const p=await ra(f);i.harga_satuan_penagihan=p}}const i=A({uraian:"",volume_penagihan:0,harga_satuan_penagihan:0});function x(){i.post(route("detail_penagihan.store",_.penagihan.id_penagihan),{onSuccess:f=>{s({type:"positive",message:f.props.flash.success})}})}return(f,p)=>(c(),y(J,{ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":!0,onHide:a(D)},{default:n(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:n(()=>[e(I,{class:"row items-center q-pb-none"},{default:n(()=>[Ua,e(aa),e(V,{flat:"",round:"",dense:"",icon:"close",onClick:a($)},null,8,["onClick"])]),_:1}),e(N),e(sa,{onSubmit:oa(x,["prevent"])},{default:n(()=>[e(I,{class:"scroll"},{default:n(()=>[r("div",Da,[e(C,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(i).uraian,"onUpdate:modelValue":p[0]||(p[0]=v=>a(i).uraian=v),error:!!a(i).errors.uraian,"error-message":a(i).errors.uraian},null,8,["modelValue","error","error-message"]),r("div",Qa,[r("div",qa,[e(C,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:a(i).harga_satuan_penagihan,"onUpdate:modelValue":[p[1]||(p[1]=v=>a(i).harga_satuan_penagihan=v),p[2]||(p[2]=v=>P(v))],hint:a(k)(a(i).harga_satuan_penagihan),"hide-hint":a(i).harga_satuan_penagihan<1,error:!!a(i).errors.harga_satuan_penagihan,"error-message":a(i).errors.harga_satuan_penagihan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),r("div",Ha,[e(C,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:a(i).volume_penagihan,"onUpdate:modelValue":p[3]||(p[3]=v=>a(i).volume_penagihan=v),error:!!a(i).errors.volume_penagihan,"error-message":a(i).errors.volume_penagihan,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),r("div",Ta,[Ka,r("div",ja,[Ia,r("div",Ea,m(a(k)(a(i).harga_satuan_penagihan*a(i).volume_penagihan)),1)])])])]),_:1}),e(N),e(Y,{align:"right"},{default:n(()=>[a(i).hasErrors?(c(),y(V,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:p[4]||(p[4]=v=>a(i).clearErrors())})):Q("",!0),e(V,{flat:"",label:"Reset",color:"secondary",onClick:p[5]||(p[5]=v=>a(i).reset())}),e(V,{flat:"",type:"submit",label:"Submit",color:"primary",loading:a(i).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ra=r("div",{class:"text-h6"},"Edit Uraian Penagihan",-1),La={class:"q-gutter-md"},Oa={class:"row"},Aa={class:"col-12 col-md-6 q-pr-sm"},Fa={class:"col-12 col-md-6 q-pl-sm"},Ba={class:"row"},Ma=r("div",{class:"col-12 col-md-6 q-pr-sm"},null,-1),za={class:"col-12 col-md-6 q-pl-sm text-right"},Ga=r("div",{class:"text-secondary text-caption"},"Total Harga",-1),Ja={class:"text-weight-bold text-subtitle1"},Ya=L({__name:"PenagihanItemEditDialog",props:{detailPenagihan:{}},emits:[...R.emits],setup(S){const _=S,{dialogRef:w,onDialogOK:s,onDialogCancel:$,onDialogHide:D}=R();async function P(f){if(typeof f=="string"){const p=await ra(f);i.harga_satuan_penagihan=p}}const i=A({uraian:_.detailPenagihan.uraian,volume_penagihan:h(_.detailPenagihan.volume_penagihan),harga_satuan_penagihan:h(_.detailPenagihan.harga_satuan_penagihan)});function x(){i.patch(route("detail_penagihan.update",_.detailPenagihan.id_detail_penagihan),{onSuccess:f=>{s({type:"positive",message:f.props.flash.success})}})}return(f,p)=>(c(),y(J,{ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":!0,onHide:a(D)},{default:n(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:n(()=>[e(I,{class:"row items-center q-pb-none"},{default:n(()=>[Ra,e(aa),e(V,{flat:"",round:"",dense:"",icon:"close",onClick:a($)},null,8,["onClick"])]),_:1}),e(N),e(sa,{onSubmit:oa(x,["prevent"])},{default:n(()=>[e(I,{class:"scroll"},{default:n(()=>[r("div",La,[e(C,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(i).uraian,"onUpdate:modelValue":p[0]||(p[0]=v=>a(i).uraian=v),error:!!a(i).errors.uraian,"error-message":a(i).errors.uraian},null,8,["modelValue","error","error-message"]),r("div",Oa,[r("div",Aa,[e(C,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:a(i).harga_satuan_penagihan,"onUpdate:modelValue":[p[1]||(p[1]=v=>a(i).harga_satuan_penagihan=v),p[2]||(p[2]=v=>P(v))],hint:a(k)(a(i).harga_satuan_penagihan),"hide-hint":a(i).harga_satuan_penagihan<1,error:!!a(i).errors.harga_satuan_penagihan,"error-message":a(i).errors.harga_satuan_penagihan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),r("div",Fa,[e(C,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:a(i).volume_penagihan,"onUpdate:modelValue":p[3]||(p[3]=v=>a(i).volume_penagihan=v),error:!!a(i).errors.volume_penagihan,"error-message":a(i).errors.volume_penagihan,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),r("div",Ba,[Ma,r("div",za,[Ga,r("div",Ja,m(a(k)(a(i).harga_satuan_penagihan*a(i).volume_penagihan)),1)])])])]),_:1}),e(N),e(Y,{align:"right"},{default:n(()=>[a(i).hasErrors?(c(),y(V,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:p[4]||(p[4]=v=>a(i).clearErrors())})):Q("",!0),e(V,{flat:"",label:"Reset",color:"secondary",onClick:p[5]||(p[5]=v=>a(i).reset())}),e(V,{flat:"",type:"submit",label:"Update",color:"primary",loading:a(i).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Za=r("div",{class:"text-h6"},"Delete Confirmation",-1),Wa=r("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),Xa=L({__name:"PenagihanItemDeleteDialog",props:{id_detail_penagihan:{}},emits:[...R.emits],setup(S){const _=S,{dialogRef:w,onDialogOK:s,onDialogCancel:$,onDialogHide:D}=R(),P=A({id_detail_penagihan:_.id_detail_penagihan});function i(){P.delete(route("detail_penagihan.destroy",_.id_detail_penagihan),{onSuccess:x=>{s({type:"positive",message:x.props.flash.success})}})}return(x,f)=>(c(),y(J,{ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":!0,onHide:a(D)},{default:n(()=>[e(M,null,{default:n(()=>[e(I,{class:"row items-center q-pb-none"},{default:n(()=>[Za]),_:1}),e(N),e(I,{class:"row items-center"},{default:n(()=>[e(ba,{icon:"dangerous",color:"red","text-color":"white"}),Wa]),_:1}),e(Y,{align:"right"},{default:n(()=>[e(V,{flat:"",label:"Cancel",color:"primary",onClick:a($)},null,8,["onClick"]),e(V,{flat:"",label:"Yes, delete it",color:"red",onClick:i})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),ae=r("div",{class:"text-h6"},"Lembar Evaluasi",-1),ee={class:"q-gutter-md"},ne={class:"q-mb-md row q-col-gutter-md"},te={class:"col-12 col-md-6"},oe={class:"col-12 col-md-6"},le=L({__name:"PenagihanConfirmDialog",props:{data:{}},emits:[...R.emits],setup(S){const _=S,{dialogRef:w,onDialogOK:s,onDialogCancel:$,onDialogHide:D}=R(),i=B(["Diterima","Diterima Sebagian","Tolak"]),x=B(null),f=A({id_penagihan:_.data.id_penagihan,jumlah_diterima:_.data.jumlah_diterima,catatan:null});function p(){x.value==="Diterima"?v():x.value==="Diterima Sebagian"?t():x.value==="Tolak"&&U()}function v(){f.transform(l=>({...l,bertahap:!1,jumlah_diterima:1})).post(route("penagihan.confirm",_.data.id_penagihan),{onSuccess:l=>{s({type:"positive",message:l.props.flash.success})}})}function t(){f.transform(l=>({...l,bertahap:!0})).post(route("penagihan.confirm",_.data.id_penagihan),{onSuccess:l=>{s({type:"positive",message:l.props.flash.success})}})}function U(){f.post(route("penagihan.reject",_.data.id_penagihan),{onSuccess:l=>{s({type:"positive",message:l.props.flash.success})}})}const b=[{name:"nilai_kontrak",label:"Nilai Kontrak",field:"nilai_kontrak",align:"right",sortable:!0},{name:"invoice_sebelumnya",label:"Invoice Sebelumnya",field:"invoice_sebelumnya",align:"right",sortable:!0},{name:"invoice_saat_ini",label:"Invoice Saat Ini",field:"invoice_saat_ini",align:"right",sortable:!0},{name:"sisa_netto_kontrak",label:"Sisa Netto Kontrak",field:"sisa_netto_kontrak",align:"right",sortable:!0}];return(l,o)=>(c(),y(J,{ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":!0,onHide:a(D)},{default:n(()=>[e(M,{style:{"max-width":"100vw"}},{default:n(()=>[e(I,{class:"row items-center q-pb-none"},{default:n(()=>[ae,e(aa),e(V,{flat:"",round:"",dense:"",icon:"close",onClick:a($)},null,8,["onClick"])]),_:1}),e(N),e(I,{class:"scroll"},{default:n(()=>[r("div",ee,[e(la,{flat:"","row-key":"id_proyek",rows:l.data.evaluasi,columns:b,"rows-per-page-options":[0],"hide-bottom":""},{header:n(u=>[e(H,{props:u},{default:n(()=>[(c(!0),O(G,null,Z(u.cols,K=>(c(),y(ia,{key:K.name,props:u,style:{"font-weight":"bold"}},{default:n(()=>[g(m(K.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(u=>[e(H,{props:u},{default:n(()=>[e(d,{key:"nilai_kontrak",props:u},{default:n(()=>[g(m(a(k)(a(h)(u.row.nilai_kontrak))),1)]),_:2},1032,["props"]),e(d,{key:"invoice_sebelumnya",props:u},{default:n(()=>[g(m(a(k)(a(h)(u.row.invoice_sebelumnya))),1)]),_:2},1032,["props"]),e(d,{key:"invoice_saat_ini",props:u},{default:n(()=>[g(m(a(k)(a(h)(u.row.invoice_saat_ini))),1)]),_:2},1032,["props"]),e(d,{key:"sisa_netto_kontrak",props:u},{default:n(()=>[g(m(a(k)(a(h)(u.row.sisa_netto_kontrak))),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])])]),_:1}),e(I,null,{default:n(()=>{var u;return[r("div",ne,[r("div",te,[e(wa,{outlined:"",modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=K=>x.value=K),label:"Pilih Aksi*",options:i.value},null,8,["modelValue","options"])]),r("div",oe,[e(C,{outlined:"",autogrow:"",modelValue:a(f).catatan,"onUpdate:modelValue":o[1]||(o[1]=K=>a(f).catatan=K),label:"Catatan"},null,8,["modelValue"])])]),x.value==="Diterima Sebagian"?(c(),y(C,{key:0,outlined:"","hide-bottom-space":"",modelValue:a(f).jumlah_diterima,"onUpdate:modelValue":o[2]||(o[2]=K=>a(f).jumlah_diterima=K),label:"Jumlah Diterima*",hint:a(k)(a(h)(a(f).jumlah_diterima)),error:!!((u=a(f).errors.jumlah_diterima)!=null&&u.length),"error-message":a(f).errors.jumlah_diterima,"input-class":"text-right"},null,8,["modelValue","hint","error","error-message"])):Q("",!0)]}),_:1}),e(N),e(Y,{align:"right"},{default:n(()=>[e(V,{flat:"",label:"Confirm",color:"primary",loading:a(f).processing,onClick:p},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),ie=L({__name:"PenagihanConfirmForm",props:{data:{}},setup(S){const _=S,w=X();function s(){w.dialog({component:le,componentProps:{data:_.data}}).onOk($=>{w.notify({type:$.type,message:$.message,position:"top"})})}return($,D)=>(c(),y(da,{position:"bottom-right",offset:[18,18]},{default:n(()=>[e(V,{rounded:"",label:"Konfirmasi Penerimaan",color:"primary",icon:"keyboard_arrow_left",onClick:s,class:"q-pa-md"},{default:n(()=>[e(W,null,{default:n(()=>[g("Konfirmasi Penerimaan")]),_:1})]),_:1})]),_:1}))}}),re=L({__name:"PenagihanSubmissionForm",props:{data:{}},setup(S){const _=S,w=X(),s=A({catatan:""});function $(){s.post(route("penagihan.submit",_.data.id_penagihan),{onSuccess:P=>{w.notify({type:"positive",message:P.props.flash.success,position:"top"})}})}function D(){w.dialog({title:"Submission Confirmation",message:"Are you sure want to submit this data?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"primary",cancel:!0,persistent:!0}).onOk(P=>{s.catatan=P,$()})}return(P,i)=>(c(),y(da,{position:"bottom-right",offset:[18,18]},{default:n(()=>[e(V,{rounded:"",color:"primary",label:"Submit","icon-right":"check",onClick:D,class:"q-pa-md"},{default:n(()=>[e(W,null,{default:n(()=>[g("Click to submit")]),_:1})]),_:1})]),_:1}))}}),se={class:"q-px-md q-pt-md"},de={class:"row q-col-gutter-md"},ue={class:"col-12 col-md-6"},pe={class:"row"},ge=r("div",{class:"col-4 text-caption"}," Keperluan ",-1),me={class:"col-8 text-subtitle2"},_e=r("div",{class:"col-4 text-caption"}," Tanggal Pengajuan ",-1),ce={class:"col-8 text-subtitle2"},he=r("div",{class:"col-4 text-caption"}," Nomor Rekening Tujuan ",-1),fe={class:"col-8 text-subtitle2"},ye=r("div",{class:"col-4 text-caption"}," Nomor SP2D ",-1),be={class:"col-8 text-subtitle2"},ke=r("div",{class:"col-4 text-caption"}," Tanggal SP2D ",-1),ve={class:"col-8 text-subtitle2"},Ve=r("div",{class:"col-4 text-caption"}," Tanggal Terbit ",-1),we={class:"col-8 text-subtitle2"},xe=r("div",{class:"col-4 text-caption"}," Tanggal Cair ",-1),Pe={class:"col-8 text-subtitle2"},Ce=r("div",{class:"col-4 text-caption"}," Nilai Netto ",-1),$e={class:"col-8 text-subtitle2"},Se=r("div",{class:"col-4 text-caption"}," Faktur ",-1),Ue={class:"col-8 text-subtitle2"},De={key:1},Fe=L({__name:"DetailPenagihanPage",props:{penagihan:{},detailPenagihan:{},evaluasi:{},timeline:{}},setup(S){const _=S,w=[{label:"Keuangan",url:"#"},{label:"Penagihan/Invoice",url:route("penagihan")},{label:_.penagihan.nama_proyek,url:"#"}];return(s,$)=>{const D=ka("in-link");return c(),O(G,null,[e(a(va),{title:"Penagihan"}),e(_a,null,{breadcrumbs:n(()=>[e(ga,{align:"left"},{default:n(()=>[(c(),O(G,null,Z(w,P=>Va(e(ca,{key:P.label,label:P.label},null,8,["label"]),[[D,P.url]])),64))]),_:1})]),default:n(()=>[e(xa,{title:"Penagihan","timeline-title":"Timeline Penagihan",data:{proyek:s.penagihan,status:s.penagihan.status_penagihan,timeline:s.timeline}},null,8,["data"]),r("div",se,[r("div",de,[r("div",ue,[e(M,{flat:"",bordered:""},{default:n(()=>[e(I,null,{default:n(()=>[r("div",pe,[ge,r("div",me," : "+m(s.penagihan.keperluan),1),_e,r("div",ce," : "+m(a(z)(s.penagihan.tanggal_pengajuan)||"-"),1),he,r("div",fe," : "+m(s.penagihan.nama_bank_pg)+" | "+m(s.penagihan.nomor_rekening_pg)+" - "+m(s.penagihan.nama_rekening_pg),1),ye,r("div",be," : "+m(s.penagihan.nomor_sp2d||"-"),1),ke,r("div",ve," : "+m(a(z)(s.penagihan.tanggal_sp2d)||"-"),1),Ve,r("div",we," : "+m(a(z)(s.penagihan.tanggal_terbit)||"-"),1),xe,r("div",Pe," : "+m(a(z)(s.penagihan.tanggal_cair)||"-"),1),Ce,r("div",$e," : "+m(a(k)(a(h)(s.penagihan.nilai_netto))),1),Se,r("div",Ue,[g(" : "),s.penagihan.faktur?(c(),y(V,{key:0,flat:"",dense:"","no-caps":"",label:"Lihat Faktur",color:"primary",href:s.penagihan.faktur,target:"_blank"},null,8,["href"])):(c(),O("span",De,"-"))])])]),_:1})]),_:1})])])]),e(a(Sa),{rows:s.detailPenagihan,data:{penagihan:s.penagihan}},null,8,["rows","data"]),a(q)("create & modify penagihan")&&a(T)(s.penagihan)&&s.detailPenagihan.length?(c(),y(a(re),{key:0,data:{id_penagihan:s.penagihan.id_penagihan}},null,8,["data"])):Q("",!0),a(q)("confirm penagihan")&&a(ma)(s.penagihan)?(c(),y(a(ie),{key:1,data:{id_penagihan:s.penagihan.id_penagihan,jumlah_diterima:s.penagihan.jumlah_diterima,evaluasi:s.evaluasi}},null,8,["data"])):Q("",!0)]),_:1})],64)}}});export{Fe as default};
