import{i as K,d as O,e as N,f as pe,g as ce,Q as J,a as Y,b as ge,h as me,_ as _e,c as he}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-84cf796f.js";import{d as F,l as fe,j as A,T as B,o as h,e as E,a,C as be,w as n,b as m,t as _,u as e,c as v,Q as S,h as f,i as q,A as T,g as l,y as ve,F as Z,k as X,f as oe,s as I,p as G,q as R,v as W,x as L,D as ye,m as ke,Z as we,n as Ce}from"./app-456b7b81.js";import{f as M}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-10c56c26.js";import{a as U,b as g,c as ie,d as le,Q as ee}from"./QTable-777e4ca6.js";import{Q as ae}from"./QTooltip-5a592d07.js";import{Q as z}from"./QPopupEdit-90ebf970.js";import{u as ne}from"./use-quasar-53e0b1d3.js";import{a as b,t as y,s as se}from"./money-915f7772.js";import{u as j,Q as te}from"./use-dialog-plugin-component-b08011d3.js";import{Q as re}from"./QForm-1fc4bb1a.js";import{m as de}from"./options-4b88285e.js";import{Q as ue,_ as Ve}from"./ModuleTopSection.vue_vue_type_script_setup_true_lang-2402d78c.js";import"./QImg-62f985a3.js";const xe={class:"q-pa-md"},Pe={class:"q-gutter-sm"},$e={key:1},Se=F({__name:"PenagihanItemTable",props:{rows:{},data:{},formOptions:{}},setup(P){const c=P,w=fe(()=>{const u=c.rows.reduce((o,p)=>o+b(p.harga_satuan_penagihan)*b(p.volume_penagihan),0),r=u-b(t.potongan_ppn)-b(t.potongan_pph)-b(t.potongan_lainnya);return{penagihan:u,pencairan:r}}),d=ne();function x(){d.dialog({component:Fe,componentProps:{penagihan:c.data.penagihan,options:c.formOptions}}).onOk(u=>{d.notify({type:u.type,message:u.message,position:"top"})})}function $(u){d.dialog({component:Ze,componentProps:{detailPenagihan:u,options:c.formOptions}}).onOk(r=>{d.notify({type:r.type,message:r.message,position:"top"})})}function k(u){d.dialog({component:Xe,componentProps:{id_detail_penagihan:u}}).onOk(r=>{d.notify({type:r.type,message:r.message,position:"top"})})}const D=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"harga_satuan",label:"Harga Satuan",field:"harga_satuan",align:"right",sortable:!0},{name:"volume",label:"Volume",field:"volume",align:"right",sortable:!0},{name:"total_harga",label:"Total Harga",field:"total_harga",align:"right",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],C=A(!1);function V(){C.value=!C.value}const i=A(""),H=A([]),t=B({potongan_ppn:c.data.penagihan.potongan_ppn,potongan_pph:c.data.penagihan.potongan_pph,potongan_lainnya:c.data.penagihan.potongan_lainnya,keterangan_potongan_lainnya:c.data.penagihan.keterangan_potongan_lainnya});function s(){t.put(route("penagihan.tax",c.data.penagihan.id_penagihan),{preserveScroll:!0,onSuccess:()=>!0})}return(u,r)=>(h(),E("div",xe,[a(ie,{flat:"",bordered:"","row-key":"id_detail_penagihan",rows:u.rows,columns:D,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:C.value,filter:i.value,selection:"multiple",selected:H.value,"onUpdate:selected":r[13]||(r[13]=o=>H.value=o),class:"no-border"},be({"top-left":n(()=>[l("div",Pe,[e(K)()||e(O)("create & modify penagihan")&&e(N)(u.data.penagihan)?(h(),v(f,{key:0,"no-caps":"",label:"Tambah Uraian",icon:"add",color:"primary",onClick:x})):T("",!0)])]),"top-right":n(()=>[a(S,{dense:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=o=>i.value=o),placeholder:"Search"},{append:n(()=>[a(ve,{name:"search"})]),_:1},8,["modelValue"]),a(f,{flat:"",dense:"",icon:C.value?"fullscreen_exit":"fullscreen",onClick:V,class:"q-ml-md"},null,8,["icon"])]),header:n(o=>[a(U,{props:o},{default:n(()=>[(h(!0),E(Z,null,X(o.cols,p=>(h(),v(le,{key:p.name,props:o,style:{"font-weight":"bold"}},{default:n(()=>[p.name==="penerimaan"?(h(),v(oe,{key:0,modelValue:o.selected,"onUpdate:modelValue":Q=>o.selected=Q,label:"Penerimaan"},null,8,["modelValue","onUpdate:modelValue"])):(h(),E("span",$e,_(p.label),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(o=>[a(U,{props:o},{default:n(()=>[a(g,{key:"index",props:o},{default:n(()=>[m(_(++o.rowIndex),1)]),_:2},1032,["props"]),a(g,{key:"uraian",props:o},{default:n(()=>[m(_(o.row.uraian),1)]),_:2},1032,["props"]),a(g,{key:"harga_satuan",props:o},{default:n(()=>[m(_(e(y)(e(b)(o.row.harga_satuan_penagihan))),1)]),_:2},1032,["props"]),a(g,{key:"volume",props:o},{default:n(()=>[m(_(e(b)(o.row.volume_penagihan)),1)]),_:2},1032,["props"]),a(g,{key:"total_harga",props:o},{default:n(()=>[m(_(e(y)(e(b)(o.row.harga_satuan_penagihan)*e(b)(o.row.volume_penagihan))),1)]),_:2},1032,["props"]),a(g,{key:"penerimaan",props:o},{default:n(()=>[a(oe,{modelValue:o.selected,"onUpdate:modelValue":p=>o.selected=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),a(g,{key:"actions",props:o},{default:n(()=>[e(K)()||e(O)("create & modify penagihan")&&e(N)(u.data.penagihan)?(h(),v(f,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:n(()=>[a(pe,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[a(ce,{dense:"",style:{"min-width":"100px"}},{default:n(()=>[a(J,{clickable:""},{default:n(()=>[a(Y,{onClick:p=>$(o.row)},{default:n(()=>[m(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),a(I),a(J,{clickable:""},{default:n(()=>[a(Y,{class:"text-red",onClick:p=>k(o.row.id_detail_penagihan)},{default:n(()=>[m(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(h(),v(f,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:n(()=>[a(ae,null,{default:n(()=>[m("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:2},[u.rows.length?{name:"bottom-row",fn:n(()=>[a(U,{"no-hover":""},{default:n(()=>[a(g,{colspan:"3",style:{border:"none"}}),a(g,{class:"text-right"},{default:n(()=>[m(" Total Penagihan ")]),_:1}),a(g,{class:"text-right text-weight-bold"},{default:n(()=>[m(_(e(y)(w.value.penagihan)),1)]),_:1}),a(g,{style:{border:"none"}})]),_:1}),a(U,{"no-hover":""},{default:n(()=>[a(g,{colspan:"3",style:{border:"none"}}),a(g,{class:"text-right"},{default:n(()=>[m(" Total Diterima ")]),_:1}),a(g,{class:"text-right text-weight-bold"},{default:n(()=>[m(_(e(y)(e(b)(u.data.penagihan.jumlah_diterima))),1)]),_:1}),a(g,{style:{border:"none"}})]),_:1}),a(U,{"no-hover":""},{default:n(()=>[a(g,{colspan:"3",style:{border:"none"}}),a(g,{class:"text-right"},{default:n(()=>[m(" Potongan PPN ")]),_:1}),a(g,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:n(()=>[m(_(e(y)(e(b)(e(t).potongan_ppn)))+" ",1),e(K)()||e(O)("create & modify penagihan")&&e(N)(u.data.penagihan)?(h(),v(z,{key:0,modelValue:e(t).potongan_ppn,"onUpdate:modelValue":r[3]||(r[3]=o=>e(t).potongan_ppn=o),modelModifiers:{number:!0}},{default:n(o=>[a(S,{flat:"",dense:"","hide-bottom-space":"",modelValue:e(t).potongan_ppn,"onUpdate:modelValue":r[2]||(r[2]=p=>e(t).potongan_ppn=p),hint:e(y)(e(b)(e(t).potongan_ppn)),error:!!e(t).errors.potongan_ppn,"error-message":e(t).errors.potongan_ppn,"input-class":"text-right"},{after:n(()=>[a(f,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:q(o.cancel,["stop","prevent"])},null,8,["onClick"]),a(f,{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!e(t).isDirty,onClick:[r[1]||(r[1]=q(p=>s(),["stop","prevent"])),o.set]},null,8,["disable","onClick"])]),_:2},1032,["modelValue","hint","error","error-message"])]),_:1},8,["modelValue"])):T("",!0)]),_:1}),a(g,{style:{border:"none"}})]),_:1}),a(U,{"no-hover":""},{default:n(()=>[a(g,{colspan:"3",style:{border:"none"}}),a(g,{class:"text-right"},{default:n(()=>[m(" Potongan PPH ")]),_:1}),a(g,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:n(()=>[m(_(e(y)(e(b)(e(t).potongan_pph)))+" ",1),e(K)()||e(O)("create & modify penagihan")&&e(N)(u.data.penagihan)?(h(),v(z,{key:0,modelValue:e(t).potongan_pph,"onUpdate:modelValue":r[6]||(r[6]=o=>e(t).potongan_pph=o),modelModifiers:{number:!0}},{default:n(o=>[a(S,{flat:"",dense:"","hide-bottom-space":"",modelValue:e(t).potongan_pph,"onUpdate:modelValue":r[5]||(r[5]=p=>e(t).potongan_pph=p),hint:e(y)(e(b)(e(t).potongan_pph)),error:!!e(t).errors.potongan_pph,"error-message":e(t).errors.potongan_pph,"input-class":"text-right"},{after:n(()=>[a(f,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:q(o.cancel,["stop","prevent"])},null,8,["onClick"]),a(f,{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!e(t).isDirty,onClick:[r[4]||(r[4]=q(p=>s(),["stop","prevent"])),o.set]},null,8,["disable","onClick"])]),_:2},1032,["modelValue","hint","error","error-message"])]),_:1},8,["modelValue"])):T("",!0)]),_:1}),a(g,{style:{border:"none"}})]),_:1}),a(U,{"no-hover":""},{default:n(()=>[a(g,{colspan:"3",style:{border:"none"}}),a(g,{class:"text-right"},{default:n(()=>[m(" Potongan Lainnya ")]),_:1}),a(g,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:n(()=>[m(_(e(y)(e(b)(e(t).potongan_lainnya)))+" ",1),e(K)()||e(O)("create & modify penagihan")&&e(N)(u.data.penagihan)?(h(),v(z,{key:0,modelValue:e(t).potongan_lainnya,"onUpdate:modelValue":r[9]||(r[9]=o=>e(t).potongan_lainnya=o),modelModifiers:{number:!0}},{default:n(o=>[a(S,{flat:"",dense:"","hide-bottom-space":"",modelValue:e(t).potongan_lainnya,"onUpdate:modelValue":r[8]||(r[8]=p=>e(t).potongan_lainnya=p),hint:e(y)(e(b)(e(t).potongan_lainnya)),error:!!e(t).errors.potongan_lainnya,"error-message":e(t).errors.potongan_lainnya,"input-class":"text-right"},{after:n(()=>[a(f,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:q(o.cancel,["stop","prevent"])},null,8,["onClick"]),a(f,{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!e(t).isDirty,onClick:[r[7]||(r[7]=q(p=>s(),["stop","prevent"])),o.set]},null,8,["disable","onClick"])]),_:2},1032,["modelValue","hint","error","error-message"])]),_:1},8,["modelValue"])):T("",!0)]),_:1}),a(g,{class:"text-primary",style:{cursor:"pointer"}},{default:n(()=>[m(_(e(t).keterangan_potongan_lainnya||"Tambah Keterangan Potongan")+" ",1),e(K)()||e(O)("create & modify penagihan")&&e(N)(u.data.penagihan)?(h(),v(z,{key:0,modelValue:e(t).keterangan_potongan_lainnya,"onUpdate:modelValue":r[12]||(r[12]=o=>e(t).keterangan_potongan_lainnya=o)},{default:n(o=>[a(S,{flat:"",dense:"",autogrow:"","hide-bottom-space":"",label:"Tambah Keterangan",modelValue:e(t).keterangan_potongan_lainnya,"onUpdate:modelValue":r[11]||(r[11]=p=>e(t).keterangan_potongan_lainnya=p),error:!!e(t).errors.keterangan_potongan_lainnya,"error-message":e(t).errors.keterangan_potongan_lainnya},{after:n(()=>[a(f,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:q(o.cancel,["stop","prevent"])},null,8,["onClick"]),a(f,{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!e(t).isDirty,onClick:[r[10]||(r[10]=q(p=>s(),["stop","prevent"])),o.set]},null,8,["disable","onClick"])]),_:2},1032,["modelValue","error","error-message"])]),_:1},8,["modelValue"])):T("",!0)]),_:1})]),_:1}),a(U,{"no-hover":""},{default:n(()=>[a(g,{colspan:"3",style:{border:"none"}}),a(g,{class:"text-right"},{default:n(()=>[m(" Total Pencairan/Netto ")]),_:1}),a(g,{class:"text-right text-weight-bold"},{default:n(()=>[m(_(e(y)(w.value.pencairan)),1)]),_:1}),a(g,{style:{border:"none"}})]),_:1})]),key:"0"}:void 0]),1032,["rows","fullscreen","filter","selected"])]))}}),De=l("div",{class:"text-h6"},"Tambah Uraian Penagihan",-1),Qe={class:"q-gutter-md"},qe={class:"row"},Ue={class:"col-12 col-md-6 q-pr-sm"},Te={class:"col-12 col-md-6 q-pl-sm"},Re={class:"row"},He=l("div",{class:"col-12 col-md-6 q-pr-sm"},null,-1),Oe={class:"col-12 col-md-6 q-pl-sm text-right"},Ie=l("div",{class:"text-secondary text-caption"},"Total Harga",-1),je={class:"text-weight-bold text-subtitle1"},Fe=F({__name:"PenagihanItemCreateDialog",props:{penagihan:{},options:{}},emits:[...j.emits],setup(P){const c=P,{dialogRef:w,onDialogOK:d,onDialogCancel:x,onDialogHide:$}=j(),k=A(c.options.detailRab);function D(t,s){s(()=>{k.value=de(t,c.options.detailRab,["uraian"])})}function C(t){const s=c.options.detailRab.find(u=>u.id_detail_rab===t);s&&s.harga_satuan&&(i.harga_satuan_penagihan=b(s.harga_satuan))}async function V(t){if(typeof t=="string"){const s=await se(t);i.harga_satuan_penagihan=s}}const i=B({id_detail_rab:null,volume_penagihan:0,harga_satuan_penagihan:0});function H(){i.post(route("detail_penagihan.store",c.penagihan.id_penagihan),{onSuccess:t=>{d({type:"positive",message:t.props.flash.success})}})}return(t,s)=>(h(),v(G,{ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":!0,onHide:e($)},{default:n(()=>[a(L,{style:{width:"700px","max-width":"80vw"}},{default:n(()=>[a(R,{class:"row items-center q-pb-none"},{default:n(()=>[De,a(te),a(f,{flat:"",round:"",dense:"",icon:"close",onClick:e(x)},null,8,["onClick"])]),_:1}),a(I),a(re,{onSubmit:q(H,["prevent"])},{default:n(()=>[a(R,{class:"scroll"},{default:n(()=>[l("div",Qe,[a(ee,{outlined:"","use-input":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Uraian RAB","option-value":"id_detail_rab","option-label":"uraian","model-value":e(i).id_detail_rab,options:k.value,error:!!e(i).errors.id_detail_rab,"error-message":e(i).errors.id_detail_rab,onFilter:D,"onUpdate:modelValue":s[0]||(s[0]=u=>{e(i).id_detail_rab=u,C(u)})},{"no-option":n(()=>[a(J,null,{default:n(()=>[a(Y,{class:"text-grey"},{default:n(()=>[m(" No results ")]),_:1})]),_:1})]),_:1},8,["model-value","options","error","error-message"]),l("div",qe,[l("div",Ue,[a(S,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:e(i).harga_satuan_penagihan,"onUpdate:modelValue":[s[1]||(s[1]=u=>e(i).harga_satuan_penagihan=u),s[2]||(s[2]=u=>V(u))],hint:e(y)(e(i).harga_satuan_penagihan),"hide-hint":e(i).harga_satuan_penagihan<1,error:!!e(i).errors.harga_satuan_penagihan,"error-message":e(i).errors.harga_satuan_penagihan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),l("div",Te,[a(S,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:e(i).volume_penagihan,"onUpdate:modelValue":s[3]||(s[3]=u=>e(i).volume_penagihan=u),error:!!e(i).errors.volume_penagihan,"error-message":e(i).errors.volume_penagihan,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),l("div",Re,[He,l("div",Oe,[Ie,l("div",je,_(e(y)(e(i).harga_satuan_penagihan*e(i).volume_penagihan)),1)])])])]),_:1}),a(I),a(W,{align:"right"},{default:n(()=>[e(i).hasErrors?(h(),v(f,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:s[4]||(s[4]=u=>e(i).clearErrors())})):T("",!0),a(f,{flat:"",label:"Reset",color:"secondary",onClick:s[5]||(s[5]=u=>e(i).reset())}),a(f,{flat:"",type:"submit",label:"Submit",color:"primary",loading:e(i).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ne=l("div",{class:"text-h6"},"Edit Uraian Penagihan",-1),Ae={class:"q-gutter-md"},Ee={class:"row"},Ke={class:"col-12 col-md-6 q-pr-sm"},Be={class:"col-12 col-md-6 q-pl-sm"},Le={class:"row"},Me=l("div",{class:"col-12 col-md-6 q-pr-sm"},null,-1),ze={class:"col-12 col-md-6 q-pl-sm text-right"},Je=l("div",{class:"text-secondary text-caption"},"Total Harga",-1),Ye={class:"text-weight-bold text-subtitle1"},Ze=F({__name:"PenagihanItemEditDialog",props:{detailPenagihan:{},options:{}},emits:[...j.emits],setup(P){const c=P,{dialogRef:w,onDialogOK:d,onDialogCancel:x,onDialogHide:$}=j(),k=A(c.options.detailRab);function D(t,s){s(()=>{k.value=de(t,c.options.detailRab,["uraian"])})}function C(t){const s=c.options.detailRab.find(u=>u.id_detail_rab===t);s&&s.harga_satuan&&(i.harga_satuan_penagihan=b(s.harga_satuan))}async function V(t){if(typeof t=="string"){const s=await se(t);i.harga_satuan_penagihan=s}}const i=B({id_detail_rab:c.detailPenagihan.id_detail_rab,volume_penagihan:b(c.detailPenagihan.volume_penagihan),harga_satuan_penagihan:b(c.detailPenagihan.harga_satuan_penagihan)});function H(){i.patch(route("detail_penagihan.update",c.detailPenagihan.id_detail_penagihan),{onSuccess:t=>{d({type:"positive",message:t.props.flash.success})}})}return(t,s)=>(h(),v(G,{ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":!0,onHide:e($)},{default:n(()=>[a(L,{style:{width:"700px","max-width":"80vw"}},{default:n(()=>[a(R,{class:"row items-center q-pb-none"},{default:n(()=>[Ne,a(te),a(f,{flat:"",round:"",dense:"",icon:"close",onClick:e(x)},null,8,["onClick"])]),_:1}),a(I),a(re,{onSubmit:q(H,["prevent"])},{default:n(()=>[a(R,{class:"scroll"},{default:n(()=>[l("div",Ae,[a(ee,{outlined:"","use-input":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Uraian RAB","option-value":"id_detail_rab","option-label":"uraian","model-value":e(i).id_detail_rab,options:k.value,error:!!e(i).errors.id_detail_rab,"error-message":e(i).errors.id_detail_rab,onFilter:D,"onUpdate:modelValue":s[0]||(s[0]=u=>{e(i).id_detail_rab=u,C(u)})},{"no-option":n(()=>[a(J,null,{default:n(()=>[a(Y,{class:"text-grey"},{default:n(()=>[m(" No results ")]),_:1})]),_:1})]),_:1},8,["model-value","options","error","error-message"]),l("div",Ee,[l("div",Ke,[a(S,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:e(i).harga_satuan_penagihan,"onUpdate:modelValue":[s[1]||(s[1]=u=>e(i).harga_satuan_penagihan=u),s[2]||(s[2]=u=>V(u))],hint:e(y)(e(i).harga_satuan_penagihan),"hide-hint":e(i).harga_satuan_penagihan<1,error:!!e(i).errors.harga_satuan_penagihan,"error-message":e(i).errors.harga_satuan_penagihan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),l("div",Be,[a(S,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:e(i).volume_penagihan,"onUpdate:modelValue":s[3]||(s[3]=u=>e(i).volume_penagihan=u),error:!!e(i).errors.volume_penagihan,"error-message":e(i).errors.volume_penagihan,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),l("div",Le,[Me,l("div",ze,[Je,l("div",Ye,_(e(y)(e(i).harga_satuan_penagihan*e(i).volume_penagihan)),1)])])])]),_:1}),a(I),a(W,{align:"right"},{default:n(()=>[e(i).hasErrors?(h(),v(f,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:s[4]||(s[4]=u=>e(i).clearErrors())})):T("",!0),a(f,{flat:"",label:"Reset",color:"secondary",onClick:s[5]||(s[5]=u=>e(i).reset())}),a(f,{flat:"",type:"submit",label:"Update",color:"primary",loading:e(i).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ge=l("div",{class:"text-h6"},"Delete Confirmation",-1),We=l("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),Xe=F({__name:"PenagihanItemDeleteDialog",props:{id_detail_penagihan:{}},emits:[...j.emits],setup(P){const c=P,{dialogRef:w,onDialogOK:d,onDialogCancel:x,onDialogHide:$}=j(),k=B({id_detail_penagihan:c.id_detail_penagihan});function D(){k.delete(route("detail_penagihan.destroy",c.id_detail_penagihan),{onSuccess:C=>{d({type:"positive",message:C.props.flash.success})}})}return(C,V)=>(h(),v(G,{ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":!0,onHide:e($)},{default:n(()=>[a(L,null,{default:n(()=>[a(R,{class:"row items-center q-pb-none"},{default:n(()=>[Ge]),_:1}),a(I),a(R,{class:"row items-center"},{default:n(()=>[a(ye,{icon:"dangerous",color:"red","text-color":"white"}),We]),_:1}),a(W,{align:"right"},{default:n(()=>[a(f,{flat:"",label:"Cancel",color:"primary",onClick:e(x)},null,8,["onClick"]),a(f,{flat:"",label:"Yes, delete it",color:"red",onClick:D})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),ea=l("div",{class:"text-h6"},"Lembar Evaluasi",-1),aa={class:"q-gutter-md"},na={class:"q-mb-md row q-col-gutter-md"},ta={class:"col-12 col-md-6"},oa={class:"col-12 col-md-6"},ia=F({__name:"PenagihanConfirmDialog",props:{data:{}},emits:[...j.emits],setup(P){const c=P,{dialogRef:w,onDialogOK:d,onDialogCancel:x,onDialogHide:$}=j(),D=A(["Diterima","Diterima Sebagian","Tolak"]),C=A(null),V=B({id_penagihan:c.data.id_penagihan,jumlah_diterima:c.data.jumlah_diterima,catatan:null});function i(){C.value==="Diterima"?H():C.value==="Diterima Sebagian"?t():C.value==="Tolak"&&s()}function H(){V.transform(r=>({...r,bertahap:!1,jumlah_diterima:1})).post(route("penagihan.confirm",c.data.id_penagihan),{onSuccess:r=>{d({type:"positive",message:r.props.flash.success})}})}function t(){V.transform(r=>({...r,bertahap:!0})).post(route("penagihan.confirm",c.data.id_penagihan),{onSuccess:r=>{d({type:"positive",message:r.props.flash.success})}})}function s(){V.post(route("penagihan.reject",c.data.id_penagihan),{onSuccess:r=>{d({type:"positive",message:r.props.flash.success})}})}const u=[{name:"nilai_kontrak",label:"Nilai Kontrak",field:"nilai_kontrak",align:"right",sortable:!0},{name:"invoice_sebelumnya",label:"Invoice Sebelumnya",field:"invoice_sebelumnya",align:"right",sortable:!0},{name:"invoice_saat_ini",label:"Invoice Saat Ini",field:"invoice_saat_ini",align:"right",sortable:!0},{name:"sisa_netto_kontrak",label:"Sisa Netto Kontrak",field:"sisa_netto_kontrak",align:"right",sortable:!0}];return(r,o)=>(h(),v(G,{ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":!0,onHide:e($)},{default:n(()=>[a(L,{style:{"max-width":"100vw"}},{default:n(()=>[a(R,{class:"row items-center q-pb-none"},{default:n(()=>[ea,a(te),a(f,{flat:"",round:"",dense:"",icon:"close",onClick:e(x)},null,8,["onClick"])]),_:1}),a(I),a(R,{class:"scroll"},{default:n(()=>[l("div",aa,[a(ie,{flat:"","row-key":"id_proyek",rows:r.data.evaluasi,columns:u,"rows-per-page-options":[0],"hide-bottom":""},{header:n(p=>[a(U,{props:p},{default:n(()=>[(h(!0),E(Z,null,X(p.cols,Q=>(h(),v(le,{key:Q.name,props:p,style:{"font-weight":"bold"}},{default:n(()=>[m(_(Q.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(p=>[a(U,{props:p},{default:n(()=>[a(g,{key:"nilai_kontrak",props:p},{default:n(()=>[m(_(e(y)(e(b)(p.row.nilai_kontrak))),1)]),_:2},1032,["props"]),a(g,{key:"invoice_sebelumnya",props:p},{default:n(()=>[m(_(e(y)(e(b)(p.row.invoice_sebelumnya))),1)]),_:2},1032,["props"]),a(g,{key:"invoice_saat_ini",props:p},{default:n(()=>[m(_(e(y)(e(b)(p.row.invoice_saat_ini))),1)]),_:2},1032,["props"]),a(g,{key:"sisa_netto_kontrak",props:p},{default:n(()=>[m(_(e(y)(e(b)(p.row.sisa_netto_kontrak))),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])])]),_:1}),a(R,null,{default:n(()=>{var p;return[l("div",na,[l("div",ta,[a(ee,{outlined:"",modelValue:C.value,"onUpdate:modelValue":o[0]||(o[0]=Q=>C.value=Q),label:"Pilih Aksi*",options:D.value},null,8,["modelValue","options"])]),l("div",oa,[a(S,{outlined:"",autogrow:"",modelValue:e(V).catatan,"onUpdate:modelValue":o[1]||(o[1]=Q=>e(V).catatan=Q),label:"Catatan"},null,8,["modelValue"])])]),C.value==="Diterima Sebagian"?(h(),v(S,{key:0,outlined:"","hide-bottom-space":"",modelValue:e(V).jumlah_diterima,"onUpdate:modelValue":o[2]||(o[2]=Q=>e(V).jumlah_diterima=Q),label:"Jumlah Diterima*",hint:e(y)(e(b)(e(V).jumlah_diterima)),error:!!((p=e(V).errors.jumlah_diterima)!=null&&p.length),"error-message":e(V).errors.jumlah_diterima,"input-class":"text-right"},null,8,["modelValue","hint","error","error-message"])):T("",!0)]}),_:1}),a(I),a(W,{align:"right"},{default:n(()=>[a(f,{flat:"",label:"Confirm",color:"primary",loading:e(V).processing,onClick:i},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),la=F({__name:"PenagihanConfirmForm",props:{data:{}},setup(P){const c=P,w=ne();function d(){w.dialog({component:ia,componentProps:{data:c.data}}).onOk(x=>{w.notify({type:x.type,message:x.message,position:"top"})})}return(x,$)=>(h(),v(ue,{position:"bottom-right",offset:[18,18]},{default:n(()=>[a(f,{rounded:"",label:"Konfirmasi Penerimaan",color:"primary",icon:"keyboard_arrow_left",onClick:d,class:"q-pa-md"},{default:n(()=>[a(ae,null,{default:n(()=>[m("Konfirmasi Penerimaan")]),_:1})]),_:1})]),_:1}))}}),sa=F({__name:"PenagihanSubmissionForm",props:{data:{}},setup(P){const c=P,w=ne(),d=B({catatan:""});function x(){d.post(route("penagihan.submit",c.data.id_penagihan),{onSuccess:k=>{w.notify({type:"positive",message:k.props.flash.success,position:"top"})}})}function $(){w.dialog({title:"Submission Confirmation",message:"Are you sure want to submit this data?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"primary",cancel:!0,persistent:!0}).onOk(k=>{d.catatan=k,x()})}return(k,D)=>(h(),v(ue,{position:"bottom-right",offset:[18,18]},{default:n(()=>[a(f,{rounded:"",color:"primary",label:"Submit","icon-right":"check",onClick:$,class:"q-pa-md"},{default:n(()=>[a(ae,null,{default:n(()=>[m("Click to submit")]),_:1})]),_:1})]),_:1}))}}),ra={class:"q-px-md q-pt-md"},da={class:"row q-col-gutter-md"},ua={class:"col-12 col-md-6"},pa={class:"row"},ca=l("div",{class:"col-4 text-caption"}," Keperluan ",-1),ga={class:"col-8 text-subtitle2"},ma=l("div",{class:"col-4 text-caption"}," Tanggal Pengajuan ",-1),_a={class:"col-8 text-subtitle2"},ha=l("div",{class:"col-4 text-caption"}," Nomor Rekening Tujuan ",-1),fa={class:"col-8 text-subtitle2"},ba=l("div",{class:"col-4 text-caption"}," Nomor SP2D ",-1),va={class:"col-8 text-subtitle2"},ya=l("div",{class:"col-4 text-caption"}," Tanggal SP2D ",-1),ka={class:"col-8 text-subtitle2"},wa=l("div",{class:"col-4 text-caption"}," Tanggal Terbit ",-1),Ca={class:"col-8 text-subtitle2"},Va=l("div",{class:"col-4 text-caption"}," Tanggal Cair ",-1),xa={class:"col-8 text-subtitle2"},Pa=l("div",{class:"col-4 text-caption"}," Nilai Netto ",-1),$a={class:"col-8 text-subtitle2"},Sa=l("div",{class:"col-4 text-caption"}," Faktur ",-1),Da={class:"col-8 text-subtitle2"},Qa={key:1},Ba=F({__name:"DetailPenagihanPage",props:{penagihan:{},detailPenagihan:{},evaluasi:{},formOptions:{},timeline:{}},setup(P){const c=P,w=[{label:"Keuangan",url:"#"},{label:"Penagihan/Invoice",url:route("penagihan")},{label:c.penagihan.nama_proyek,url:"#"}];return(d,x)=>{const $=ke("in-link");return h(),E(Z,null,[a(e(we),{title:"Penagihan"}),a(_e,null,{breadcrumbs:n(()=>[a(ge,{align:"left"},{default:n(()=>[(h(),E(Z,null,X(w,k=>Ce(a(he,{key:k.label,label:k.label},null,8,["label"]),[[$,k.url]])),64))]),_:1})]),default:n(()=>[a(Ve,{title:"Penagihan","timeline-title":"Timeline Penagihan",data:{proyek:d.penagihan,status:d.penagihan.status_penagihan,timeline:d.timeline}},null,8,["data"]),l("div",ra,[l("div",da,[l("div",ua,[a(L,{flat:"",bordered:""},{default:n(()=>[a(R,null,{default:n(()=>[l("div",pa,[ca,l("div",ga," : "+_(d.penagihan.keperluan),1),ma,l("div",_a," : "+_(e(M)(d.penagihan.tanggal_pengajuan)||"-"),1),ha,l("div",fa," : "+_(d.penagihan.nama_bank_pg)+" | "+_(d.penagihan.nomor_rekening_pg)+" - "+_(d.penagihan.nama_rekening_pg),1),ba,l("div",va," : "+_(d.penagihan.nomor_sp2d||"-"),1),ya,l("div",ka," : "+_(e(M)(d.penagihan.tanggal_sp2d)||"-"),1),wa,l("div",Ca," : "+_(e(M)(d.penagihan.tanggal_terbit)||"-"),1),Va,l("div",xa," : "+_(e(M)(d.penagihan.tanggal_cair)||"-"),1),Pa,l("div",$a," : "+_(e(y)(e(b)(d.penagihan.nilai_netto))),1),Sa,l("div",Da,[m(" : "),d.penagihan.faktur?(h(),v(f,{key:0,flat:"",dense:"","no-caps":"",label:"Lihat Faktur",color:"primary",href:d.penagihan.faktur,target:"_blank"},null,8,["href"])):(h(),E("span",Qa,"-"))])])]),_:1})]),_:1})])])]),a(e(Se),{rows:d.detailPenagihan,data:{penagihan:d.penagihan},"form-options":d.formOptions},null,8,["rows","data","form-options"]),e(O)("create & modify penagihan")&&e(N)(d.penagihan)&&d.detailPenagihan.length?(h(),v(e(sa),{key:0,data:{id_penagihan:d.penagihan.id_penagihan}},null,8,["data"])):T("",!0),e(O)("confirm penagihan")&&e(me)(d.penagihan)?(h(),v(e(la),{key:1,data:{id_penagihan:d.penagihan.id_penagihan,jumlah_diterima:d.penagihan.jumlah_diterima,evaluasi:d.evaluasi}},null,8,["data"])):T("",!0)]),_:1})],64)}}});export{Ba as default};
