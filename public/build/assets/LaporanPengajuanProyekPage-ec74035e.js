import{l as R,b as E,_ as V,c as S}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-b69e3ed2.js";import{d as F,l as A,j as y,m as M,o as p,e as v,a,w as n,g as z,c as P,u as l,O as c,h as u,B as x,b as r,F as $,k as N,t as d,i as b,A as I,n as J,Z as K,p as Z}from"./app-a9c22e82.js";import{Q as j}from"./datetime-dc60c162.js";import{a as B,b as i,c as G,d as H}from"./QTable-0e41b0f2.js";import{Q as U,_ as W}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-29a71a0e.js";import{c as X,e as Y,t as ee}from"./pdf-4d5b7e28.js";import{u as ae}from"./use-quasar-954ed4d5.js";import{t as D,a as O}from"./money-915f7772.js";import{c as ne}from"./LaporanPengajuanProyekSearchDialog.vue_vue_type_script_setup_true_lang-e918f65f.js";import"./QImg-b742b038.js";import"./use-dialog-plugin-component-646efe56.js";import"./QForm-332245d0.js";import"./options-4b88285e.js";const le={class:"q-pa-md"},oe={class:"q-gutter-sm"},te=F({__name:"LaporanPengajuanProyekTable",props:{rows:{},formOptions:{}},setup(Q){const m=Q,f=A(()=>m.rows.map(o=>{const t=o.status_pengajuan==="400"?"Closed":"Open";return{...o,status:t}})),w=ae();function h(o){w.dialog({component:W,componentProps:{proyek:o}})}function _(){w.dialog({component:ne,componentProps:{options:m.formOptions}})}const L=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"nilai_pengajuan",label:"Nilai Pengajuan Dana",field:"nilai_pengajuan",align:"right",sortable:!0},{name:"jumlah_disetujui",label:"Disetujui",field:"jumlah_disetujui",align:"right",sortable:!0},{name:"status",label:"Status",field:"status_pengajuan",align:"left",sortable:!0}],g=y(!1);function q(){g.value=!g.value}const k=y(),C=y(),T=y();return M(()=>{var o,t,e;C.value={columns:(o=k.value)==null?void 0:o.columns,body:{rows:(t=k.value)==null?void 0:t.computedRows,props:["index","nama_proyek","tahun_anggaran","keperluan","nilai_pengajuan","jumlah_disetujui","status"]}},T.value=X({rows:(e=k.value)==null?void 0:e.computedRows,props:["nama_proyek","tahun_anggaran","keperluan","nilai_pengajuan","jumlah_disetujui","status"]})}),(o,t)=>(p(),v("div",le,[a(l(G),{ref_key:"table",ref:k,flat:"",bordered:"","row-key":"id_rab",title:"Laporan Pengajuan Proyek",rows:f.value,columns:L,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:g.value},{"top-right":n(()=>[z("div",oe,[Object.keys(o.$page.props.query).length?(p(),P(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:t[0]||(t[0]=e=>l(c).visit(o.route("laporan.pengajuan_proyek")))})):x("",!0),a(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:_}),a(u,{flat:"",dense:"",label:"xls",color:"green",onClick:t[1]||(t[1]=e=>l(Y)().exportDataFromJSON({data:T.value,name:"pengajuan-proyek",type:"xls"}))},{default:n(()=>[a(j,null,{default:n(()=>[r("Export to xls")]),_:1})]),_:1}),a(u,{flat:"",dense:"",label:"pdf",color:"red-8",onClick:t[2]||(t[2]=e=>l(ee)({filename:"pengajuan_proyek",header:"Pengajuan Proyek",columns:C.value.columns,body:C.value.body}))},{default:n(()=>[a(j,null,{default:n(()=>[r("Export to pdf")]),_:1})]),_:1}),a(u,{flat:"",dense:"",icon:g.value?"fullscreen_exit":"fullscreen",onClick:q,class:"q-ml-md"},null,8,["icon"])])]),header:n(e=>[a(B,{props:e},{default:n(()=>[(p(!0),v($,null,N(e.cols,s=>(p(),P(H,{key:s.name,props:e,style:{"font-weight":"bold"}},{default:n(()=>[r(d(s.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(e=>[a(B,{props:e},{default:n(()=>[a(i,{key:"index",props:e},{default:n(()=>[r(d(++e.rowIndex),1)]),_:2},1032,["props"]),a(i,{key:"nama_proyek",props:e},{default:n(()=>[a(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:e.row.nama_proyek,onClick:s=>h(e.row)},{default:n(()=>[a(j,{anchor:"bottom middle",self:"top middle"},{default:n(()=>[r(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),a(i,{key:"tahun_anggaran",props:e,onClick:b(s=>l(c).visit(o.route("detail_pengajuan_dana_proyek",e.row.id_pengajuan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(d(e.row.tahun_anggaran),1)]),_:2},1032,["props","onClick"]),a(i,{key:"keperluan",props:e,onClick:b(s=>l(c).visit(o.route("detail_pengajuan_dana_proyek",e.row.id_pengajuan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(d(e.row.keperluan),1)]),_:2},1032,["props","onClick"]),a(i,{key:"nilai_pengajuan",props:e,onClick:b(s=>l(c).visit(o.route("detail_pengajuan_dana_proyek",e.row.id_pengajuan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(d(l(D)(l(O)(e.row.nilai_pengajuan))),1)]),_:2},1032,["props","onClick"]),a(i,{key:"jumlah_disetujui",props:e,onClick:b(s=>l(c).visit(o.route("detail_pengajuan_dana_proyek",e.row.id_pengajuan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(d(l(D)(l(O)(e.row.jumlah_disetujui))),1)]),_:2},1032,["props","onClick"]),a(i,{key:"status",props:e},{default:n(()=>[l(R)(e.row.status_aktivitas)?(p(),P(u,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:n(()=>[a(j,null,{default:n(()=>[r("Ditolak")]),_:1})]),_:1})):x("",!0),a(l(I),{href:o.route("detail_pengajuan_dana_proyek",e.row.id_pengajuan_dana)},{default:n(()=>[a(U,{color:e.row.status_pengajuan==400?"red":"primary",label:e.row.status_pengajuan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),be=F({__name:"LaporanPengajuanProyekPage",props:{pengajuanDana:{},formOptions:{}},setup(Q){const m=[{label:"Reports",url:"#"},{label:"Pengajuan Proyek",url:"#"}];return(f,w)=>{const h=J("in-link");return p(),v($,null,[a(l(K),{title:"Laporan Pengajuan Proyek"}),a(V,null,{breadcrumbs:n(()=>[a(E,{align:"left"},{default:n(()=>[(p(),v($,null,N(m,_=>Z(a(S,{key:_.label,label:_.label},null,8,["label"]),[[h,_.url]])),64))]),_:1})]),default:n(()=>[a(l(te),{rows:f.pengajuanDana,"form-options":f.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{be as default};
