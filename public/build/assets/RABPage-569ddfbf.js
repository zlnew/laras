import{d as G,l as oe,i as ae,m as te,f as le,g as re,Q as R,a as $,b as ne,_ as se,c as ie}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-b69e3ed2.js";import{d as A,j as H,o as m,e as O,a as e,w as o,u as t,c as g,h as u,O as S,B as V,F as I,k as Z,b as _,t as b,i as P,A as ue,v as Q,K as de,T as j,q as T,s as x,g as h,I as q,J as F,f as pe,x as N,y as U,m as ce,G as _e,n as me,Z as fe,p as ge}from"./app-a9c22e82.js";import{a as Y,b as D,c as be,d as ye,Q as E}from"./QTable-0e41b0f2.js";import{Q as M}from"./datetime-dc60c162.js";import{Q as W,_ as ke}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-29a71a0e.js";import{u as he}from"./use-quasar-954ed4d5.js";import{u as B,Q as L}from"./use-dialog-plugin-component-646efe56.js";import{Q as z}from"./QForm-332245d0.js";import{m as J}from"./options-4b88285e.js";import"./QImg-b742b038.js";import"./money-915f7772.js";const ve={class:"q-pa-md"},Ce={key:1,class:"text-h6"},we=A({__name:"RABTable",props:{rows:{},formOptions:{}},setup(v){const n=v,d=he();function C(l){d.dialog({component:ke,componentProps:{proyek:l}})}function y(){d.dialog({component:xe,componentProps:{options:n.formOptions}})}function f(){d.dialog({component:Ae,componentProps:{options:n.formOptions}}).onOk(l=>{d.notify({type:l.type,message:l.message,position:"top"})})}function k(l){d.dialog({component:qe,componentProps:{rab:l,options:n.formOptions}}).onOk(r=>{d.notify({type:r.type,message:r.message,position:"top"})})}function w(l){d.dialog({component:He,componentProps:{id_rab:l}}).onOk(r=>{d.notify({type:r.type,message:r.message,position:"top"})})}const p=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"pengguna_jasa",label:"Pengguna Jasa",field:"pengguna_jasa",align:"left",sortable:!0},{name:"penyedia_jasa",label:"Penyedia Jasa",field:"penyedia_jasa",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"status_rab",label:"Status",field:"status_rab",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],i=H(!1);function c(){i.value=!i.value}return(l,r)=>(m(),O("div",ve,[e(be,{flat:"",bordered:"","row-key":"id_rab",rows:l.rows,columns:p,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:i.value},{"top-left":o(()=>[t(G)("create & modify rab")?(m(),g(u,{key:0,"no-caps":"",label:"Tambah RAB",icon:"add",color:"primary",onClick:f})):(m(),O("div",Ce,"List RAB"))]),"top-right":o(()=>[Object.keys(l.$page.props.query).length?(m(),g(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:r[0]||(r[0]=a=>t(S).visit(l.route("rab")))})):V("",!0),e(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:y}),e(u,{flat:"",dense:"",icon:i.value?"fullscreen_exit":"fullscreen",onClick:c,class:"q-ml-md"},null,8,["icon"])]),header:o(a=>[e(Y,{props:a},{default:o(()=>[(m(!0),O(I,null,Z(a.cols,s=>(m(),g(ye,{key:s.name,props:a,style:{"font-weight":"bold"}},{default:o(()=>[_(b(s.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:o(a=>[e(Y,{props:a},{default:o(()=>[e(D,{key:"index",props:a},{default:o(()=>[_(b(++a.rowIndex),1)]),_:2},1032,["props"]),e(D,{key:"nama_proyek",props:a},{default:o(()=>[e(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:a.row.nama_proyek,onClick:s=>C(a.row)},{default:o(()=>[e(M,{anchor:"bottom middle",self:"top middle"},{default:o(()=>[_(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(D,{key:"pengguna_jasa",props:a,onClick:P(s=>t(S).visit(l.route("detail_rab",a.row.id_rab)),["prevent"]),style:{cursor:"pointer"}},{default:o(()=>[_(b(a.row.pengguna_jasa),1)]),_:2},1032,["props","onClick"]),e(D,{key:"penyedia_jasa",props:a,onClick:P(s=>t(S).visit(l.route("detail_rab",a.row.id_rab)),["prevent"]),style:{cursor:"pointer"}},{default:o(()=>[_(b(a.row.penyedia_jasa),1)]),_:2},1032,["props","onClick"]),e(D,{key:"tahun_anggaran",props:a,onClick:P(s=>t(S).visit(l.route("detail_rab",a.row.id_rab)),["prevent"]),style:{cursor:"pointer"}},{default:o(()=>[_(b(a.row.tahun_anggaran),1)]),_:2},1032,["props","onClick"]),e(D,{key:"status_rab",props:a},{default:o(()=>[t(oe)(a.row.status_aktivitas)?(m(),g(u,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:o(()=>[e(M,null,{default:o(()=>[_("Ditolak")]),_:1})]),_:1})):V("",!0),e(t(ue),{href:l.route("detail_rab",a.row.id_rab)},{default:o(()=>[e(W,{color:a.row.status_rab==400?"red":"primary",label:a.row.status_rab==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"]),e(D,{key:"actions",props:a},{default:o(()=>[t(ae)()||t(G)("create & modify rab")&&t(te)(a.row.status_rab)?(m(),g(u,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:o(()=>[e(le,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[e(re,{dense:"",style:{"min-width":"100px"}},{default:o(()=>[e(R,{clickable:""},{default:o(()=>[e($,{onClick:s=>k(a.row)},{default:o(()=>[_(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e(Q),e(R,{clickable:""},{default:o(()=>[e($,{class:"text-red",onClick:s=>w(a.row.id_rab)},{default:o(()=>[_(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(m(),g(u,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:o(()=>[e(M,null,{default:o(()=>[_("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),$e=h("div",{class:"text-h6"},"Pencarian RAB",-1),Re={class:"q-gutter-md"},Qe={class:"text-primary"},xe=A({__name:"RABSearchDialog",props:{options:{}},emits:[...B.emits],setup(v){const n=v,{dialogRef:d,onDialogOK:C,onDialogCancel:y,onDialogHide:f}=B(),k=H(n.options.currentProyek);function w(r,a){a(()=>{k.value=J(r,n.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const i=de().props.query,c=j({id_proyek:i.id_proyek,status_rab:i.status_rab});function l(){c.get(route("rab"),{onSuccess:()=>{C()}})}return(r,a)=>(m(),g(T,{ref_key:"dialogRef",ref:d,onHide:t(f)},{default:o(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[$e,e(L),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:t(y)},null,8,["onClick"])]),_:1}),e(Q),e(z,{onSubmit:P(l,["prevent"])},{default:o(()=>[e(x,{class:"scroll"},{default:o(()=>[h("div",Re,[e(E,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:t(c).id_proyek,"onUpdate:modelValue":a[0]||(a[0]=s=>t(c).id_proyek=s),"option-value":"id_proyek","option-label":s=>`${s.nama_proyek} | ${s.tahun_anggaran}`,options:k.value,error:!!t(c).errors.id_proyek,"error-message":t(c).errors.id_proyek,onFilter:w},{option:o(({itemProps:s,opt:K,selected:X,toggleOption:ee})=>[e(R,q(F(s)),{default:o(()=>[e($,{side:""},{default:o(()=>[e(pe,{size:"sm","model-value":X,"onUpdate:modelValue":je=>ee(K)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e($,null,{default:o(()=>[h("strong",Qe,b(K.nama_proyek),1),_(" "+b(K.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":o(()=>[e(R,null,{default:o(()=>[e($,{class:"text-grey"},{default:o(()=>[_(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(E,{outlined:"",clearable:"","fill-input":"",label:"Status RAB",modelValue:t(c).status_rab,"onUpdate:modelValue":a[1]||(a[1]=s=>t(c).status_rab=s),options:[100,400]},{"selected-item":o(s=>[e(W,{color:s.opt==400?"red":"primary",label:s.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:o(s=>[e(R,q(F(s.itemProps)),{default:o(()=>[e($,null,{default:o(()=>[_(b(s.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"])])]),_:1}),e(Q),e(N,{align:"right"},{default:o(()=>[e(u,{flat:"",type:"submit",label:"Search",color:"primary",loading:t(c).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Be=h("div",{class:"text-h6"},"Tambah RAB",-1),De={class:"q-gutter-md"},Pe={class:"text-primary"},Ae=A({__name:"RABCreateDialog",props:{options:{}},emits:[...B.emits],setup(v){const n=v,{dialogRef:d,onDialogOK:C,onDialogCancel:y,onDialogHide:f}=B(),k=H(n.options.proyek);function w(c,l){l(()=>{k.value=J(c,n.options.proyek,["nama_proyek","tahun_anggaran"])})}const p=j({id_proyek:null});function i(){p.post(route("rab.store"),{onSuccess:c=>{C({type:"positive",message:c.props.flash.success})}})}return(c,l)=>(m(),g(T,{ref_key:"dialogRef",ref:d,"no-backdrop-dismiss":!0,onHide:t(f)},{default:o(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[Be,e(L),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:t(y)},null,8,["onClick"])]),_:1}),e(Q),e(z,{onSubmit:P(i,["prevent"])},{default:o(()=>[e(x,{class:"scroll"},{default:o(()=>[h("div",De,[e(E,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:t(p).id_proyek,"onUpdate:modelValue":l[0]||(l[0]=r=>t(p).id_proyek=r),"option-value":"id_proyek","option-label":r=>`${r.nama_proyek} | ${r.tahun_anggaran}`,options:k.value,error:!!t(p).errors.id_proyek,"error-message":t(p).errors.id_proyek,onFilter:w},{option:o(r=>[e(R,q(F(r.itemProps)),{default:o(()=>[e($,null,{default:o(()=>[h("strong",Pe,b(r.opt.nama_proyek),1),_(" "+b(r.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":o(()=>[e(R,null,{default:o(()=>[e($,{class:"text-grey"},{default:o(()=>[_(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"])])]),_:1}),e(Q),e(N,{align:"right"},{default:o(()=>[t(p).hasErrors?(m(),g(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[1]||(l[1]=r=>t(p).clearErrors())})):V("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:l[2]||(l[2]=r=>t(p).reset())}),e(u,{flat:"",type:"submit",label:"Submit",color:"primary",loading:t(p).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Oe=h("div",{class:"text-h6"},"Edit RAB",-1),Se={class:"q-gutter-md"},Ve={class:"text-primary"},qe=A({__name:"RABEditDialog",props:{rab:{},options:{}},emits:[...B.emits],setup(v){const n=v,{dialogRef:d,onDialogOK:C,onDialogCancel:y,onDialogHide:f}=B(),k={id_proyek:n.rab.id_proyek,nama_proyek:n.rab.nama_proyek,tahun_anggaran:n.rab.tahun_anggaran};ce(()=>{n.options.proyek.push(k)});const w=H(n.options.proyek);function p(l,r){r(()=>{w.value=J(l,n.options.proyek,["nama_proyek","tahun_anggaran"])})}const i=j({id_rab:n.rab.id_rab,id_proyek:n.rab.id_proyek});function c(){i.patch(route("rab.update",n.rab.id_rab),{onSuccess:l=>{C({type:"positive",message:l.props.flash.success})}})}return(l,r)=>(m(),g(T,{ref_key:"dialogRef",ref:d,"no-backdrop-dismiss":!0,onHide:t(f)},{default:o(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[Oe,e(L),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:t(y)},null,8,["onClick"])]),_:1}),e(Q),e(z,{onSubmit:P(c,["prevent"])},{default:o(()=>[e(x,{class:"scroll"},{default:o(()=>[h("div",Se,[e(E,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:t(i).id_proyek,"onUpdate:modelValue":r[0]||(r[0]=a=>t(i).id_proyek=a),"option-value":"id_proyek","option-label":a=>`${a.nama_proyek} | ${a.tahun_anggaran}`,options:w.value,error:!!t(i).errors.id_proyek,"error-message":t(i).errors.id_proyek,onFilter:p},{option:o(a=>[e(R,q(F(a.itemProps)),{default:o(()=>[e($,null,{default:o(()=>[h("strong",Ve,b(a.opt.nama_proyek),1),_(" "+b(a.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":o(()=>[e(R,null,{default:o(()=>[e($,{class:"text-grey"},{default:o(()=>[_(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"])])]),_:1}),e(Q),e(N,{align:"right"},{default:o(()=>[t(i).hasErrors?(m(),g(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[1]||(r[1]=a=>t(i).clearErrors())})):V("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:r[2]||(r[2]=a=>t(i).reset())}),e(u,{flat:"",type:"submit",label:"Update",color:"primary",loading:t(i).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Fe=h("div",{class:"text-h6"},"Delete Confirmation",-1),Ee=h("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),He=A({__name:"RABDeleteDialog",props:{id_rab:{}},emits:[...B.emits],setup(v){const n=v,{dialogRef:d,onDialogOK:C,onDialogCancel:y,onDialogHide:f}=B(),k=j({id_rab:n.id_rab});function w(){k.delete(route("rab.destroy",n.id_rab),{onSuccess:p=>{C({type:"positive",message:p.props.flash.success})}})}return(p,i)=>(m(),g(T,{ref_key:"dialogRef",ref:d,"no-backdrop-dismiss":!0,onHide:t(f)},{default:o(()=>[e(U,null,{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[Fe]),_:1}),e(Q),e(x,{class:"row items-center"},{default:o(()=>[e(_e,{icon:"dangerous",color:"red","text-color":"white"}),Ee]),_:1}),e(N,{align:"right"},{default:o(()=>[e(u,{flat:"",label:"Cancel",color:"primary",onClick:t(y)},null,8,["onClick"]),e(u,{flat:"",label:"Yes, delete it",color:"red",onClick:w})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Ze=A({__name:"RABPage",props:{rab:{},formOptions:{}},setup(v){const n=[{label:"Main",url:"#"},{label:"RAB",url:"#"}];return(d,C)=>{const y=me("in-link");return m(),O(I,null,[e(t(fe),{title:"RAB"}),e(se,null,{breadcrumbs:o(()=>[e(ne,{align:"left"},{default:o(()=>[(m(),O(I,null,Z(n,f=>ge(e(ie,{key:f.label,label:f.label},null,8,["label"]),[[y,f.url]])),64))]),_:1})]),default:o(()=>[e(t(we),{rows:d.rab,"form-options":d.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{Ze as default};
