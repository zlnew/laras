import{i as oa,d as N,e as aa,f as ha,g as va,Q as O,a as U,j as da,h as pa,b as ya,_ as Da,c as wa}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-f8fe08d2.js";import{d as F,l as M,j as Q,o as j,c as D,C as Pa,w as e,a,b as u,t as m,u as n,A as E,g as k,h as P,y as ma,Q as B,e as z,k as ea,F as G,f as ra,s as R,T as L,p as Z,q as T,i as _a,G as ga,H as ca,v as W,x as K,D as Va,E as Ca,m as $a,Z as xa,n as Sa}from"./app-651f5c8c.js";import{Q as Qa,a as sa,b as Oa,c as ia,_ as Ua}from"./FileDeleteDialog.vue_vue_type_script_setup_true_lang-f5602d2b.js";import{f as Ta}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-7b2e019a.js";import{b as _,a as H,c as fa,d as ba,Q as J}from"./QTable-db3b72cd.js";import{Q as na}from"./QTooltip-b7a3ad90.js";import{u as X}from"./use-quasar-1175def4.js";import{a as q,t as S}from"./money-3074a8fc.js";import{u as A,Q as ta}from"./use-dialog-plugin-component-e23f8103.js";import{Q as ja}from"./QForm-5f0747c8.js";import{m as Y,f as ka}from"./options-964f32b0.js";import{b as la,Q as ua,a as qa,_ as Ra}from"./QFile-a5c521b8.js";import"./QImg-3654d7aa.js";const Fa={class:"q-gutter-sm"},Ia={key:1},Ea=F({__name:"PengajuanDanaItemTable",props:{rows:{},data:{},formOptions:{}},setup(V,{expose:i}){const g=V,c=M(()=>{const o=g.rows.reduce((x,I)=>x+q(I.jumlah_pengajuan),0),t=g.rows.reduce((x,I)=>r.value.includes(I.id_detail_pengajuan_dana)?x+q(I.jumlah_pengajuan):x,0),s=o-t;return{pengajuan:o,disetujui:t,ditolak:s}}),f=X();function d(){f.dialog({component:La,componentProps:{pengajuanDana:g.data.pengajuanDana,options:g.formOptions}}).onOk(o=>{f.notify({type:o.type,message:o.message,position:"top"})})}function h(o){f.dialog({component:Xa,componentProps:{detailPengajuanDana:o,options:g.formOptions}}).onOk(t=>{f.notify({type:t.type,message:t.message,position:"top"})})}function y(o){f.dialog({component:ne,componentProps:{id_detail_pengajuan_dana:o}}).onOk(t=>{f.notify({type:t.type,message:t.message,position:"top"})})}const p=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"pos",label:"POS",field:"pos",align:"left",sortable:!0},{name:"jenis_pembayaran",label:"Jenis Pembayaran",field:"jenis_pembayaran",align:"left",sortable:!0},{name:"bank",label:"Bank",field:"nama_bank",align:"left",sortable:!0},{name:"rekening",label:"Rekening",field:"nomor_rekening",align:"left",sortable:!0},{name:"jumlah",label:"Jumlah Pengajuan",field:"jumlah_pengajuan",align:"right",sortable:!0},{name:"persetujuan",label:"Approval",field:"",align:"left"},{name:"actions",label:"Actions",field:"",align:"left"}],C=()=>{let o=[];return N("approve pengajuan dana")&&da(g.data.pengajuanDana)?p.map(t=>o.push(t.name)):N("evaluate pengajuan dana")&&pa(g.data.pengajuanDana)?p.map(t=>o.push(t.name)):p.map(t=>{if(t.name!=="persetujuan")return o.push(t.name)}),o},w=Q(!1);function $(){w.value=!w.value}const v=Q(""),l=Q([]),r=M(()=>{let o=[];return l.value&&l.value.map(t=>o.push(t.id_detail_pengajuan_dana)),o}),b=M(()=>l.value?l.value.reduce((t,s)=>{const x=t.find(I=>I.id_detail_rap===s.id_detail_rap);return x?x.jumlah_pengajuan+=q(s.jumlah_pengajuan):t.push({id_detail_rap:s.id_detail_rap,jumlah_pengajuan:q(s.jumlah_pengajuan)}),t},[]):[]);return i({selectedIds:r,approvedPengajuanSaatIni:b}),(o,t)=>(j(),D(fa,{flat:"",bordered:"","row-key":"id_detail_pengajuan_dana",rows:o.rows,columns:p,"visible-columns":C(),"rows-per-page-options":[10,15,20,25,50,0],fullscreen:w.value,filter:v.value,selection:"multiple",selected:l.value,"onUpdate:selected":t[1]||(t[1]=s=>l.value=s),class:"no-border"},Pa({"top-left":e(()=>[k("div",Fa,[n(oa)()||n(N)("create & modify pengajuan dana")&&n(aa)(o.data.pengajuanDana)?(j(),D(P,{key:0,"no-caps":"",label:"Tambah Uraian",icon:"add",color:"primary",onClick:d})):E("",!0)])]),"top-right":e(()=>[a(B,{dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),placeholder:"Search"},{append:e(()=>[a(ma,{name:"search"})]),_:1},8,["modelValue"]),a(P,{flat:"",dense:"",icon:w.value?"fullscreen_exit":"fullscreen",onClick:$,class:"q-ml-md"},null,8,["icon"])]),header:e(s=>[a(H,{props:s},{default:e(()=>[(j(!0),z(G,null,ea(s.cols,x=>(j(),D(ba,{key:x.name,props:s,style:{"font-weight":"bold"}},{default:e(()=>[x.name==="persetujuan"?(j(),D(ra,{key:0,modelValue:s.selected,"onUpdate:modelValue":I=>s.selected=I,label:"Approval"},null,8,["modelValue","onUpdate:modelValue"])):(j(),z("span",Ia,m(x.label),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(s=>[a(H,{props:s},{default:e(()=>[a(_,{key:"index",props:s},{default:e(()=>[u(m(++s.rowIndex),1)]),_:2},1032,["props"]),a(_,{key:"uraian",props:s},{default:e(()=>[u(m(s.row.uraian),1)]),_:2},1032,["props"]),a(_,{key:"pos",props:s},{default:e(()=>[u(m(s.row.pos),1)]),_:2},1032,["props"]),a(_,{key:"jenis_pembayaran",props:s},{default:e(()=>[u(m(s.row.jenis_pembayaran),1)]),_:2},1032,["props"]),a(_,{key:"bank",props:s},{default:e(()=>[u(m(s.row.nama_bank),1)]),_:2},1032,["props"]),a(_,{key:"rekening",props:s},{default:e(()=>[u(m(s.row.nomor_rekening)+" - "+m(s.row.nama_rekening),1)]),_:2},1032,["props"]),a(_,{key:"jumlah",props:s},{default:e(()=>[u(m(n(S)(s.row.jumlah_pengajuan)),1)]),_:2},1032,["props"]),a(_,{key:"persetujuan",props:s},{default:e(()=>[a(ra,{modelValue:s.selected,"onUpdate:modelValue":x=>s.selected=x},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),a(_,{key:"actions",props:s},{default:e(()=>[n(oa)()||n(N)("create & modify pengajuan dana")&&n(aa)(o.data.pengajuanDana)?(j(),D(P,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:e(()=>[a(ha,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:e(()=>[a(va,{dense:"",style:{"min-width":"100px"}},{default:e(()=>[a(O,{clickable:""},{default:e(()=>[a(U,{onClick:x=>h(s.row)},{default:e(()=>[u(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),a(R),a(O,{clickable:""},{default:e(()=>[a(U,{class:"text-red",onClick:x=>y(s.row.id_detail_pengajuan_dana)},{default:e(()=>[u(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(j(),D(P,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:e(()=>[a(na,null,{default:e(()=>[u("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:2},[o.rows.length?{name:"bottom-row",fn:e(()=>[a(H,{"no-hover":""},{default:e(()=>[a(_,{colspan:"5",style:{border:"none"}}),a(_,{class:"text-right"},{default:e(()=>[u(" Total Pengajuan ")]),_:1}),a(_,{class:"text-right text-weight-bold"},{default:e(()=>[u(m(n(S)(c.value.pengajuan)),1)]),_:1}),a(_,{style:{border:"none"}})]),_:1}),C().includes("persetujuan")?(j(),D(H,{key:0,"no-hover":""},{default:e(()=>[a(_,{colspan:"5",style:{border:"none"}}),a(_,{class:"text-right"},{default:e(()=>[u(" Total Disetujui ")]),_:1}),a(_,{class:"text-right text-weight-bold"},{default:e(()=>[u(m(n(S)(c.value.disetujui)),1)]),_:1}),a(_,{style:{border:"none"}})]),_:1})):E("",!0),C().includes("persetujuan")?(j(),D(H,{key:1,"no-hover":""},{default:e(()=>[a(_,{colspan:"5",style:{border:"none"}}),a(_,{class:"text-right"},{default:e(()=>[u(" Total Ditolak ")]),_:1}),a(_,{class:"text-right text-weight-bold"},{default:e(()=>[u(m(n(S)(c.value.ditolak)),1)]),_:1}),a(_,{style:{border:"none"}})]),_:1})):E("",!0)]),key:"0"}:void 0]),1032,["rows","visible-columns","fullscreen","filter","selected"]))}}),Aa=k("div",{class:"text-h6"},"Tambah Uraian Pengajuan Dana",-1),Ha={class:"q-gutter-md"},Na={class:"row"},Ba={class:"col-12 col-md-6 q-pr-sm"},Ja={class:"col-12 col-md-6 q-pl-sm"},Ka={class:"text-primary"},La=F({__name:"PengajuanDanaItemCreateDialog",props:{pengajuanDana:{},options:{}},emits:[...A.emits],setup(V){const i=V,{dialogRef:g,onDialogOK:c,onDialogCancel:f,onDialogHide:d}=A(),h=["Cash","Transfer"],y=Q(i.options.detailRap),p=Q(i.options.rekening),C=Q(h);function w(b,o){o(()=>{y.value=Y(b,i.options.detailRap,["uraian"])})}function $(b,o){o(()=>{p.value=Y(b,i.options.rekening,["nama_bank","nomor_rekening","nama_rekening"])})}function v(b,o){o(()=>{C.value=ka(b,h)})}const l=L({uraian:null,jumlah_pengajuan:0,jenis_pembayaran:null,id_detail_rap:null,id_rekening:null});function r(){l.post(route("detail_pengajuan_dana.store",i.pengajuanDana.id_pengajuan_dana),{onSuccess:b=>{c({type:"positive",message:b.props.flash.success})}})}return(b,o)=>(j(),D(Z,{ref_key:"dialogRef",ref:g,"no-backdrop-dismiss":!0,onHide:n(d)},{default:e(()=>[a(K,{style:{width:"700px","max-width":"80vw"}},{default:e(()=>[a(T,{class:"row items-center q-pb-none"},{default:e(()=>[Aa,a(ta),a(P,{flat:"",round:"",dense:"",icon:"close",onClick:n(f)},null,8,["onClick"])]),_:1}),a(R),a(ja,{onSubmit:_a(r,["prevent"])},{default:e(()=>[a(T,{class:"scroll"},{default:e(()=>[k("div",Ha,[a(J,{outlined:"",clearable:"","use-input":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"POS",modelValue:n(l).id_detail_rap,"onUpdate:modelValue":o[0]||(o[0]=t=>n(l).id_detail_rap=t),"option-value":"id_detail_rap","option-label":"uraian",options:y.value,error:!!n(l).errors.id_detail_rap,"error-message":n(l).errors.id_detail_rap,onFilter:w},{"no-option":e(()=>[a(O,null,{default:e(()=>[a(U,{class:"text-grey"},{default:e(()=>[u(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),a(B,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:n(l).uraian,"onUpdate:modelValue":o[1]||(o[1]=t=>n(l).uraian=t),error:!!n(l).errors.uraian,"error-message":n(l).errors.uraian},null,8,["modelValue","error","error-message"]),k("div",Na,[k("div",Ba,[a(B,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Jumlah Pengajuan",mask:"#.##","fill-mask":"0",modelValue:n(l).jumlah_pengajuan,"onUpdate:modelValue":o[2]||(o[2]=t=>n(l).jumlah_pengajuan=t),hint:n(S)(n(l).jumlah_pengajuan),"hide-hint":n(l).jumlah_pengajuan<1,error:!!n(l).errors.jumlah_pengajuan,"error-message":n(l).errors.jumlah_pengajuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),k("div",Ja,[a(J,{outlined:"",clearable:"","use-input":"","use-chips":"","hide-bottom-space":"","input-debounce":"500",label:"Jenis Pembayaran",modelValue:n(l).jenis_pembayaran,"onUpdate:modelValue":o[3]||(o[3]=t=>n(l).jenis_pembayaran=t),options:C.value,error:!!n(l).errors.jenis_pembayaran,"error-message":n(l).errors.jenis_pembayaran,onFilter:v},{"no-option":e(()=>[a(O,null,{default:e(()=>[a(U,{class:"text-grey"},{default:e(()=>[u(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"])])]),a(J,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Rekening Pembayaran",modelValue:n(l).id_rekening,"onUpdate:modelValue":o[4]||(o[4]=t=>n(l).id_rekening=t),"option-value":"id_rekening","option-label":t=>`${t.nama_bank} | ${t.nomor_rekening} - ${t.nama_rekening}`,options:p.value,error:!!n(l).errors.id_rekening,"error-message":n(l).errors.id_rekening,onFilter:$},{option:e(t=>[a(O,ga(ca(t.itemProps)),{default:e(()=>[a(U,null,{default:e(()=>[k("strong",Ka,m(t.opt.nama_bank),1),u(" "+m(t.opt.nomor_rekening)+" - "+m(t.opt.nama_rekening),1)]),_:2},1024)]),_:2},1040)]),"no-option":e(()=>[a(O,null,{default:e(()=>[a(U,{class:"text-grey"},{default:e(()=>[u(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"])])]),_:1}),a(R),a(W,{align:"right"},{default:e(()=>[n(l).hasErrors?(j(),D(P,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:o[5]||(o[5]=t=>n(l).clearErrors())})):E("",!0),a(P,{flat:"",label:"Reset",color:"secondary",onClick:o[6]||(o[6]=t=>n(l).reset())}),a(P,{flat:"",type:"submit",label:"Submit",color:"primary",loading:n(l).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),za=k("div",{class:"text-h6"},"Edit Uraian Pengajuan Dana",-1),Ma={class:"q-gutter-md"},Ga={class:"row"},Ya={class:"col-12 col-md-6 q-pr-sm"},Za={class:"col-12 col-md-6 q-pl-sm"},Wa={class:"text-primary"},Xa=F({__name:"PengajuanDanaItemEditDialog",props:{detailPengajuanDana:{},options:{}},emits:[...A.emits],setup(V){const i=V,{dialogRef:g,onDialogOK:c,onDialogCancel:f,onDialogHide:d}=A(),h=["Cash","Transfer"],y=Q(i.options.detailRap),p=Q(i.options.rekening),C=Q(h);function w(b,o){o(()=>{y.value=Y(b,i.options.detailRap,["uraian"])})}function $(b,o){o(()=>{p.value=Y(b,i.options.rekening,["nama_bank","nomor_rekening","nama_rekening"])})}function v(b,o){o(()=>{C.value=ka(b,h)})}const l=L({uraian:i.detailPengajuanDana.uraian,jumlah_pengajuan:i.detailPengajuanDana.jumlah_pengajuan,jenis_pembayaran:i.detailPengajuanDana.jenis_pembayaran,id_detail_rap:i.detailPengajuanDana.id_detail_rap,id_rekening:i.detailPengajuanDana.id_rekening});function r(){l.patch(route("detail_pengajuan_dana.update",i.detailPengajuanDana.id_detail_pengajuan_dana),{onSuccess:b=>{c({type:"positive",message:b.props.flash.success})}})}return(b,o)=>(j(),D(Z,{ref_key:"dialogRef",ref:g,"no-backdrop-dismiss":!0,onHide:n(d)},{default:e(()=>[a(K,{style:{width:"700px","max-width":"80vw"}},{default:e(()=>[a(T,{class:"row items-center q-pb-none"},{default:e(()=>[za,a(ta),a(P,{flat:"",round:"",dense:"",icon:"close",onClick:n(f)},null,8,["onClick"])]),_:1}),a(R),a(ja,{onSubmit:_a(r,["prevent"])},{default:e(()=>[a(T,{class:"scroll"},{default:e(()=>[k("div",Ma,[a(J,{outlined:"",clearable:"","use-input":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"POS",modelValue:n(l).id_detail_rap,"onUpdate:modelValue":o[0]||(o[0]=t=>n(l).id_detail_rap=t),"option-value":"id_detail_rap","option-label":"uraian",options:y.value,error:!!n(l).errors.id_detail_rap,"error-message":n(l).errors.id_detail_rap,onFilter:w},{"no-option":e(()=>[a(O,null,{default:e(()=>[a(U,{class:"text-grey"},{default:e(()=>[u(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),a(B,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:n(l).uraian,"onUpdate:modelValue":o[1]||(o[1]=t=>n(l).uraian=t),error:!!n(l).errors.uraian,"error-message":n(l).errors.uraian},null,8,["modelValue","error","error-message"]),k("div",Ga,[k("div",Ya,[a(B,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Jumlah Pengajuan",mask:"#.##","fill-mask":"0",modelValue:n(l).jumlah_pengajuan,"onUpdate:modelValue":o[2]||(o[2]=t=>n(l).jumlah_pengajuan=t),hint:n(S)(n(q)(n(l).jumlah_pengajuan)),"hide-hint":n(q)(n(l).jumlah_pengajuan)<1,error:!!n(l).errors.jumlah_pengajuan,"error-message":n(l).errors.jumlah_pengajuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),k("div",Za,[a(J,{outlined:"",clearable:"","use-input":"","use-chips":"","hide-bottom-space":"","input-debounce":"500",label:"Jenis Pembayaran",modelValue:n(l).jenis_pembayaran,"onUpdate:modelValue":o[3]||(o[3]=t=>n(l).jenis_pembayaran=t),options:C.value,error:!!n(l).errors.jenis_pembayaran,"error-message":n(l).errors.jenis_pembayaran,onFilter:v},{"no-option":e(()=>[a(O,null,{default:e(()=>[a(U,{class:"text-grey"},{default:e(()=>[u(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"])])]),a(J,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Rekening Pembayaran",modelValue:n(l).id_rekening,"onUpdate:modelValue":o[4]||(o[4]=t=>n(l).id_rekening=t),"option-value":"id_rekening","option-label":t=>`${t.nama_bank} | ${t.nomor_rekening} - ${t.nama_rekening}`,options:p.value,error:!!n(l).errors.id_rekening,"error-message":n(l).errors.id_rekening,onFilter:$},{option:e(t=>[a(O,ga(ca(t.itemProps)),{default:e(()=>[a(U,null,{default:e(()=>[k("strong",Wa,m(t.opt.nama_bank),1),u(" "+m(t.opt.nomor_rekening)+" - "+m(t.opt.nama_rekening),1)]),_:2},1024)]),_:2},1040)]),"no-option":e(()=>[a(O,null,{default:e(()=>[a(U,{class:"text-grey"},{default:e(()=>[u(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"])])]),_:1}),a(R),a(W,{align:"right"},{default:e(()=>[n(l).hasErrors?(j(),D(P,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:o[5]||(o[5]=t=>n(l).clearErrors())})):E("",!0),a(P,{flat:"",label:"Reset",color:"secondary",onClick:o[6]||(o[6]=t=>n(l).reset())}),a(P,{flat:"",type:"submit",label:"Update",color:"primary",loading:n(l).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ae=k("div",{class:"text-h6"},"Delete Confirmation",-1),ee=k("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),ne=F({__name:"PengajuanDanaItemDeleteDialog",props:{id_detail_pengajuan_dana:{}},emits:[...A.emits],setup(V){const i=V,{dialogRef:g,onDialogOK:c,onDialogCancel:f,onDialogHide:d}=A(),h=L({id_detail_pengajuan_dana:i.id_detail_pengajuan_dana});function y(){h.delete(route("detail_pengajuan_dana.destroy",i.id_detail_pengajuan_dana),{onSuccess:p=>{c({type:"positive",message:p.props.flash.success})}})}return(p,C)=>(j(),D(Z,{ref_key:"dialogRef",ref:g,"no-backdrop-dismiss":!0,onHide:n(d)},{default:e(()=>[a(K,null,{default:e(()=>[a(T,{class:"row items-center q-pb-none"},{default:e(()=>[ae]),_:1}),a(R),a(T,{class:"row items-center"},{default:e(()=>[a(Va,{icon:"dangerous",color:"red","text-color":"white"}),ee]),_:1}),a(W,{align:"right"},{default:e(()=>[a(P,{flat:"",label:"Cancel",color:"primary",onClick:n(f)},null,8,["onClick"]),a(P,{flat:"",label:"Yes, delete it",color:"red",onClick:y})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),te=F({__name:"PengajuanDanaSubmissionForm",props:{data:{}},setup(V){const i=V,g=X(),c=L({catatan:""});function f(){c.post(route("pengajuan_dana.submit",i.data.id_pengajuan_dana),{onSuccess:h=>{g.notify({type:"positive",message:h.props.flash.success,position:"top"})}})}function d(){g.dialog({title:"Submission Confirmation",message:"Are you sure want to use this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"primary",cancel:!0,persistent:!0}).onOk(h=>{c.catatan=h,f()})}return(h,y)=>(j(),D(la,{position:"bottom-right",offset:[18,18]},{default:e(()=>[a(P,{rounded:"",color:"primary",label:"Submit","icon-right":"check",onClick:d},{default:e(()=>[a(na,null,{default:e(()=>[u("Click to submit")]),_:1})]),_:1})]),_:1}))}}),le=F({__name:"PengajuanDanaEvaluateForm",props:{data:{}},setup(V){const i=V,g=X();function c(){g.dialog({component:ue,componentProps:{data:i.data}}).onOk(f=>{g.notify({type:f.type,message:f.message,position:"top"})})}return(f,d)=>(j(),D(la,{position:"bottom-right",offset:[18,18]},{default:e(()=>[a(P,{rounded:"",label:"Evaluasi",color:"green",icon:"keyboard_arrow_left",onClick:c},{default:e(()=>[a(na,null,{default:e(()=>[u("Evaluasi Pengajuan")]),_:1})]),_:1})]),_:1}))}}),oe=F({__name:"PengajuanDanaApprovalForm",props:{data:{}},setup(V){const i=V,g=X(),c=L({catatan:""});function f(){c.transform(p=>({...p,selected_ids_detail_pengajuan_dana:i.data.selected_ids_detail_pengajuan_dana})).post(route("pengajuan_dana.approve",i.data.id_pengajuan_dana),{onSuccess:p=>{g.notify({type:"positive",message:p.props.flash.success,position:"top"})}})}function d(){c.post(route("pengajuan_dana.reject",i.data.id_pengajuan_dana),{onSuccess:p=>{g.notify({type:"positive",message:p.props.flash.success,position:"top"})}})}function h(){g.dialog({title:"Approval Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"positive",cancel:!0,persistent:!0}).onOk(p=>{c.catatan=p,f()})}function y(){g.dialog({title:"Rejection Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"negative",cancel:!0,persistent:!0}).onOk(p=>{c.catatan=p,d()})}return(p,C)=>(j(),D(la,{position:"bottom-right",offset:[18,18]},{default:e(()=>[a(qa,{color:"primary",icon:"keyboard_arrow_left",direction:"left"},{label:e(({opened:w})=>[k("div",{class:Ca({"example-fab-animate--hover":w!==!0})},m(w!==!0?"Approval":"Close"),3)]),default:e(()=>{var w,$;return[a(ua,{color:"green",label:"Setujui",icon:"check",disable:!((w=p.data.selected_ids_detail_pengajuan_dana)!=null&&w.length),onClick:h},null,8,["disable"]),a(ua,{color:"red",label:"Tolak",icon:"clear",disable:!!(($=p.data.selected_ids_detail_pengajuan_dana)!=null&&$.length),onClick:y},null,8,["disable"])]}),_:1})]),_:1}))}}),re=k("div",{class:"text-h6"},"Lembar Evaluasi",-1),se={class:"q-gutter-md"},ie={class:"q-gutter-md"},ue=F({__name:"PengajuanDanaEvaluationDialog",props:{data:{}},emits:[...A.emits],setup(V){const i=V,{dialogRef:g,onDialogOK:c,onDialogCancel:f,onDialogHide:d}=A(),h=M(()=>i.data.evaluasi.map(v=>{if(v.pengajuan_saat_ini="0",i.data.approvedPengajuanSaatIni){const o=i.data.approvedPengajuanSaatIni.find(t=>t.id_detail_rap===v.id_detail_rap);o&&(v.pengajuan_saat_ini+=o.jumlah_pengajuan)}const l=v.pengajuan_lalu?v.pengajuan_lalu:"0",r=q(l)+q(v.pengajuan_saat_ini),b=q(v.total_harga)-r;return{...v,total_pengajuan:r,sisa_anggaran:b}})),y=L({selected_ids_detail_pengajuan_dana:i.data.selected_ids_detail_pengajuan_dana,catatan:null});function p(){y.post(route("pengajuan_dana.evaluate",i.data.id_pengajuan_dana),{onSuccess:v=>{c({type:"positive",message:v.props.flash.success})}})}function C(){y.post(route("pengajuan_dana.reject",i.data.id_pengajuan_dana),{onSuccess:v=>{c({type:"positive",message:v.props.flash.success})}})}const w=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"nama_satuan",label:"Satuan",field:"nama_satuan",align:"left",sortable:!0},{name:"harga_satuan",label:"Harga Satuan",field:"harga_satuan",align:"right",sortable:!0},{name:"volume",label:"Volume",field:"volume",align:"left",sortable:!0},{name:"total_harga",label:"Total Harga",field:"total_harga",align:"right",sortable:!0},{name:"pengajuan_lalu",label:"Pengajuan Sebelumnya",field:"pengajuan_lalu",align:"right",sortable:!0},{name:"pengajuan_saat_ini",label:"Pengajuan Saat Ini",field:"",align:"right",sortable:!0},{name:"total_pengajuan",label:"Total Pengajuan",field:"",align:"right",sortable:!0},{name:"sisa_anggaran",label:"Sisa Anggaran",field:"",align:"right",sortable:!0}],$=Q();return(v,l)=>(j(),D(Z,{ref_key:"dialogRef",ref:g,"no-backdrop-dismiss":!0,onHide:n(d)},{default:e(()=>[a(K,{style:{"max-width":"100vw"}},{default:e(()=>[a(T,{class:"row items-center q-pb-none"},{default:e(()=>[re,a(ta),a(P,{flat:"",round:"",dense:"",icon:"close",onClick:n(f)},null,8,["onClick"])]),_:1}),a(R),a(T,{class:"scroll"},{default:e(()=>[k("div",se,[a(fa,{flat:"",bordered:"","row-key":"id_detail_rap",rows:h.value,columns:w,filter:$.value,"rows-per-page-options":[0],title:"Evaluasi Pengajuan Dana",style:{"max-height":"100vh"},"virtual-scroll":""},{"top-right":e(()=>[a(B,{dense:"",debounce:"300",modelValue:$.value,"onUpdate:modelValue":l[0]||(l[0]=r=>$.value=r),placeholder:"Search"},{append:e(()=>[a(ma,{name:"search"})]),_:1},8,["modelValue"])]),header:e(r=>[a(H,{props:r},{default:e(()=>[(j(!0),z(G,null,ea(r.cols,b=>(j(),D(ba,{key:b.name,props:r,style:{"font-weight":"bold"}},{default:e(()=>[u(m(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(r=>[a(H,{props:r},{default:e(()=>[a(_,{key:"index",props:r},{default:e(()=>[u(m(++r.rowIndex),1)]),_:2},1032,["props"]),a(_,{key:"uraian",props:r},{default:e(()=>[u(m(r.row.uraian),1)]),_:2},1032,["props"]),a(_,{key:"nama_satuan",props:r},{default:e(()=>[u(m(r.row.nama_satuan),1)]),_:2},1032,["props"]),a(_,{key:"harga_satuan",props:r},{default:e(()=>[u(m(n(S)(r.row.harga_satuan)),1)]),_:2},1032,["props"]),a(_,{key:"volume",props:r},{default:e(()=>[u(m(r.row.volume),1)]),_:2},1032,["props"]),a(_,{key:"total_harga",props:r},{default:e(()=>[u(m(n(S)(r.row.total_harga)),1)]),_:2},1032,["props"]),a(_,{key:"pengajuan_lalu",props:r},{default:e(()=>[u(m(n(S)(r.row.pengajuan_lalu)),1)]),_:2},1032,["props"]),a(_,{key:"pengajuan_saat_ini",props:r},{default:e(()=>[u(m(n(S)(r.row.pengajuan_saat_ini||0)),1)]),_:2},1032,["props"]),a(_,{key:"total_pengajuan",props:r},{default:e(()=>[u(m(n(S)(r.row.total_pengajuan)),1)]),_:2},1032,["props"]),a(_,{key:"sisa_anggaran",props:r},{default:e(()=>[u(m(n(S)(r.row.sisa_anggaran)),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])])]),_:1}),a(T,null,{default:e(()=>[k("div",ie,[a(B,{outlined:"",autogrow:"",label:"Catatan",modelValue:n(y).catatan,"onUpdate:modelValue":l[1]||(l[1]=r=>n(y).catatan=r)},null,8,["modelValue"])])]),_:1}),a(R),a(W,{align:"right"},{default:e(()=>{var r,b;return[a(P,{flat:"",label:"Tolak",color:"red",loading:n(y).processing,disable:!!((r=v.data.selected_ids_detail_pengajuan_dana)!=null&&r.length),onClick:C},null,8,["loading","disable"]),a(P,{flat:"",label:"Approve",color:"primary",loading:n(y).processing,disable:!((b=v.data.selected_ids_detail_pengajuan_dana)!=null&&b.length),onClick:p},null,8,["loading","disable"])]}),_:1})]),_:1})]),_:1},8,["onHide"]))}}),de={class:"q-px-md q-pt-md"},pe={class:"row"},me=k("div",{class:"col-4 text-caption"}," Keperluan ",-1),_e={class:"col-8 text-subtitle2"},ge=k("div",{class:"col-4 text-caption"}," Tanggal Pengajuan ",-1),ce={class:"col-8 text-subtitle2"},fe={class:"q-px-md q-pt-md"},Se=F({__name:"DetailPengajuanDanaPage",props:{pengajuanDana:{},detailPengajuanDana:{},dokumenPenunjang:{},evaluasi:{},formOptions:{},timeline:{}},setup(V){const i=V,g=[{label:"Keuangan",url:"#"},{label:"Pengajuan Dana",url:route("pengajuan_dana")},{label:i.pengajuanDana.nama_proyek,url:"#"}],c=Q("uraian"),f=Q();return(d,h)=>{const y=$a("in-link");return j(),z(G,null,[a(n(xa),{title:"Pengajuan Dana"}),a(Da,null,{breadcrumbs:e(()=>[a(ya,{align:"left"},{default:e(()=>[(j(),z(G,null,ea(g,p=>Sa(a(wa,{label:p.label},null,8,["label"]),[[y,p.url]])),64))]),_:1})]),default:e(()=>{var p,C,w;return[a(Ra,{title:"Pengajuan Dana","timeline-title":"Timeline Pengajuan Dana",data:{proyek:d.pengajuanDana,status:d.pengajuanDana.status_pengajuan,timeline:d.timeline}},null,8,["data"]),k("div",de,[a(K,{flat:"",bordered:"",style:{"max-width":"500px"}},{default:e(()=>[a(T,null,{default:e(()=>[k("div",pe,[me,k("div",_e," : "+m(d.pengajuanDana.keperluan),1),ge,k("div",ce," : "+m(n(Ta)(d.pengajuanDana.tanggal_pengajuan)||"-"),1)])]),_:1})]),_:1})]),k("div",fe,[a(K,{flat:"",bordered:""},{default:e(()=>[a(Qa,{modelValue:c.value,"onUpdate:modelValue":h[0]||(h[0]=$=>c.value=$),class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:e(()=>[a(sa,{"no-caps":"",name:"uraian",label:"Uraian"}),a(sa,{"no-caps":"",name:"dokumen",label:"Dokumen Penunjang"})]),_:1},8,["modelValue"]),a(R),a(Oa,{modelValue:c.value,"onUpdate:modelValue":h[1]||(h[1]=$=>c.value=$)},{default:e(()=>[a(ia,{class:"q-pa-none",name:"uraian"},{default:e(()=>[a(n(Ea),{ref_key:"table",ref:f,rows:d.detailPengajuanDana,data:{pengajuanDana:d.pengajuanDana},"form-options":d.formOptions},null,8,["rows","data","form-options"])]),_:1}),a(ia,{class:"q-pa-none",name:"dokumen"},{default:e(()=>[a(n(Ua),{rows:d.dokumenPenunjang,data:{model_id:d.pengajuanDana.id_pengajuan_dana,permissions:"create & modify pengajuan dana",status_aktivitas:d.pengajuanDana.status_aktivitas}},null,8,["rows","data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),n(N)("create & modify pengajuan dana")&&n(aa)(d.pengajuanDana)&&d.detailPengajuanDana.length?(j(),D(n(te),{key:0,data:{id_pengajuan_dana:d.pengajuanDana.id_pengajuan_dana}},null,8,["data"])):E("",!0),n(N)("evaluate pengajuan dana")&&n(pa)(d.pengajuanDana)?(j(),D(n(le),{key:1,data:{evaluasi:d.evaluasi,approvedPengajuanSaatIni:(p=f.value)==null?void 0:p.approvedPengajuanSaatIni,id_pengajuan_dana:d.pengajuanDana.id_pengajuan_dana,selected_ids_detail_pengajuan_dana:(C=f.value)==null?void 0:C.selectedIds}},null,8,["data"])):E("",!0),n(N)("approve pengajuan dana")&&n(da)(d.pengajuanDana)?(j(),D(n(oe),{key:2,data:{id_pengajuan_dana:d.pengajuanDana.id_pengajuan_dana,selected_ids_detail_pengajuan_dana:(w=f.value)==null?void 0:w.selectedIds}},null,8,["data"])):E("",!0)]}),_:1})],64)}}});export{Se as default};
