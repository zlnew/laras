import{b as ne,d as te,e as P,f as v,Q as le,_ as re,a as se}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-2d866a3c.js";import{d as x,y as T,n as G,o as d,e as R,a as e,w as a,u as o,c as f,h as u,ac as S,ai as ie,F as A,p as J,b as c,ab as D,q as W,k as $,aj as ue,T as E,ad as U,j as Q,i as z,g as y,ae as q,af as F,f as pe,ak as de,l as K,m as B,Q as X,ag as ce,Z as me}from"./app-739fb669.js";import{u as _e,a as Y,Q as O,b as ge,c as fe,d as V,e as I,f as H}from"./use-dialog-plugin-component-50d342aa.js";import{c as Z,Q as N,g as ke,h as ee,a as ye,j as be,_ as he}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-db61d37e.js";import{Q as L}from"./QForm-92572154.js";import{m as M}from"./options-964f32b0.js";import"./QImg-454d5644.js";import"./_plugin-vue_export-helper-c27b6911.js";const je={class:"q-pa-md"},ve=x({__name:"PengajuanDanaTable",props:{rows:{},formOptions:{}},setup(b){const i=b,p=_e();function h(t){p.dialog({component:he,componentProps:{proyek:t}})}function k(){p.dialog({component:Pe,componentProps:{options:i.formOptions}})}function m(){p.dialog({component:xe,componentProps:{options:i.formOptions}}).onOk(t=>{p.notify({type:t.type,message:t.message,position:"top"})})}function _(t){p.dialog({component:qe,componentProps:{pengajuanDana:t,options:i.formOptions}}).onOk(l=>{p.notify({type:l.type,message:l.message,position:"top"})})}function w(t){p.dialog({component:Te,componentProps:{id_pengajuan_dana:t}}).onOk(l=>{p.notify({type:l.type,message:l.message,position:"top"})})}const r=[{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"status_pengajuan",label:"Status",field:"status_pengajuan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],g=T(!1);function s(){g.value=!g.value}return(t,l)=>{const j=G("in-link");return d(),R("div",je,[e(ge,{flat:"",bordered:"","row-key":"id_rap",rows:t.rows,columns:r,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:g.value},{"top-left":a(()=>[o(Z)("create & modify pengajuan dana")?(d(),f(u,{key:0,"no-caps":"",label:"Tambah Pengajuan Dana",icon:"add",color:"primary",onClick:m})):S("",!0)]),"top-right":a(()=>[Object.keys(t.$page.props.query).length?(d(),f(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:l[0]||(l[0]=n=>o(ie).visit(t.route("pengajuan_dana")))})):S("",!0),e(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:k}),e(u,{flat:"",dense:"",icon:g.value?"fullscreen_exit":"fullscreen",onClick:s,class:"q-ml-md"},null,8,["icon"])]),header:a(n=>[e(Y,{props:n},{default:a(()=>[(d(!0),R(A,null,J(n.cols,C=>(d(),f(fe,{key:C.name,props:n,style:{"font-weight":"bold"}},{default:a(()=>[c(D(C.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(n=>[e(Y,{props:n},{default:a(()=>[e(O,{key:"nama_proyek",props:n},{default:a(()=>[e(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:n.row.nama_proyek,onClick:C=>h(n.row)},{default:a(()=>[e(N,{anchor:"bottom middle",self:"top middle"},{default:a(()=>[c(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(O,{key:"tahun_anggaran",props:n},{default:a(()=>[c(D(n.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(O,{key:"keperluan",props:n},{default:a(()=>[c(D(n.row.keperluan),1)]),_:2},1032,["props"]),e(O,{key:"status_pengajuan",props:n},{default:a(()=>[o(ke)(n.row.status_aktivitas)?(d(),f(u,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:a(()=>[e(N,null,{default:a(()=>[c("Ditolak")]),_:1})]),_:1})):S("",!0),W(e(ee,{color:n.row.status_pengajuan==400?"red":"primary",label:n.row.status_pengajuan==400?"Closed":"Open"},null,8,["color","label"]),[[j,t.route("detail_pengajuan_dana",n.row.id_pengajuan_dana)]])]),_:2},1032,["props"]),e(O,{key:"actions",props:n},{default:a(()=>[o(ye)()||o(Z)("create & modify pengajuan dana")&&o(be)(n.row.status_pengajuan)?(d(),f(u,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:a(()=>[e(ne,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(te,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[e(P,{clickable:""},{default:a(()=>[e(v,{onClick:C=>_(n.row)},{default:a(()=>[c(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e($),e(P,{clickable:""},{default:a(()=>[e(v,{class:"text-red",onClick:C=>w(n.row.id_pengajuan_dana)},{default:a(()=>[c(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(d(),f(u,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:a(()=>[e(N,null,{default:a(()=>[c("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])])}}}),De=y("div",{class:"text-h6"},"Pencarian Pengajuan Dana",-1),we={class:"q-gutter-md"},Ce={class:"text-primary"},Pe=x({__name:"PengajuanDanaSearchDialog",props:{options:{}},emits:[...V.emits],setup(b){const i=b,{dialogRef:p,onDialogOK:h,onDialogCancel:k,onDialogHide:m}=V(),_=T(i.options.currentProyek);function w(l,j){j(()=>{_.value=M(l,i.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const g=ue().props.query,s=E({id_proyek:g.id_proyek,status_pengajuan:g.status_pengajuan,ditolak:!1});function t(){s.get(route("pengajuan_dana"),{onSuccess:()=>h()})}return(l,j)=>(d(),f(U,{ref_key:"dialogRef",ref:p,onHide:o(m)},{default:a(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(Q,{class:"row items-center q-pb-none"},{default:a(()=>[De,e(I),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(k)},null,8,["onClick"])]),_:1}),e($),e(L,{onSubmit:z(t,["prevent"])},{default:a(()=>[e(Q,{class:"scroll"},{default:a(()=>[y("div",we,[e(H,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:o(s).id_proyek,"onUpdate:modelValue":j[0]||(j[0]=n=>o(s).id_proyek=n),"option-value":"id_proyek","option-label":n=>`${n.nama_proyek} | ${n.tahun_anggaran}`,options:_.value,error:!!o(s).errors.id_proyek,"error-message":o(s).errors.id_proyek,onFilter:w},{option:a(({itemProps:n,opt:C,selected:ae,toggleOption:oe})=>[e(P,q(F(n)),{default:a(()=>[e(v,{side:""},{default:a(()=>[e(pe,{size:"sm","model-value":ae,"onUpdate:modelValue":Ee=>oe(C)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(v,null,{default:a(()=>[y("strong",Ce,D(C.nama_proyek),1),c(" "+D(C.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(P,null,{default:a(()=>[e(v,{class:"text-grey"},{default:a(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(H,{outlined:"",clearable:"","fill-input":"",label:"Status Pengajuan Dana",modelValue:o(s).status_pengajuan,"onUpdate:modelValue":j[1]||(j[1]=n=>o(s).status_pengajuan=n),options:[100,400]},{"selected-item":a(n=>[e(ee,{color:n.opt==400?"red":"primary",label:n.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:a(n=>[e(P,q(F(n.itemProps)),{default:a(()=>[e(v,null,{default:a(()=>[c(D(n.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),e(de,{"checked-icon":"check","unchecked-icon":"clear",label:"Hanya tampilkan Pengajuan Dana yang ditolak",modelValue:o(s).ditolak,"onUpdate:modelValue":j[2]||(j[2]=n=>o(s).ditolak=n)},null,8,["modelValue"])])]),_:1}),e($),e(K,{align:"right"},{default:a(()=>[e(u,{flat:"",type:"submit",label:"Search",color:"primary",loading:o(s).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),$e=y("div",{class:"text-h6"},"Tambah Pengajuan Dana",-1),Qe={class:"q-gutter-md"},Ve={class:"text-primary"},xe=x({__name:"PengajuanDanaCreateDialog",props:{options:{}},emits:[...V.emits],setup(b){const i=b,{dialogRef:p,onDialogOK:h,onDialogCancel:k,onDialogHide:m}=V(),_=T(i.options.proyek);function w(s,t){t(()=>{_.value=M(s,i.options.proyek,["nama_proyek","tahun_anggaran"])})}const r=E({id_proyek:null,keperluan:null});function g(){r.post(route("pengajuan_dana.store"),{onSuccess:s=>{h({type:"positive",message:s.props.flash.success})}})}return(s,t)=>(d(),f(U,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(m)},{default:a(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(Q,{class:"row items-center q-pb-none"},{default:a(()=>[$e,e(I),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(k)},null,8,["onClick"])]),_:1}),e($),e(L,{onSubmit:z(g,["prevent"])},{default:a(()=>[e(Q,{class:"scroll"},{default:a(()=>[y("div",Qe,[e(H,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:o(r).id_proyek,"onUpdate:modelValue":t[0]||(t[0]=l=>o(r).id_proyek=l),"option-value":"id_proyek","option-label":l=>`${l.nama_proyek} | ${l.tahun_anggaran}`,options:_.value,error:!!o(r).errors.id_proyek,"error-message":o(r).errors.id_proyek,onFilter:w},{option:a(l=>[e(P,q(F(l.itemProps)),{default:a(()=>[e(v,null,{default:a(()=>[y("strong",Ve,D(l.opt.nama_proyek),1),c(" "+D(l.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(P,null,{default:a(()=>[e(v,{class:"text-grey"},{default:a(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(X,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:o(r).keperluan,"onUpdate:modelValue":t[1]||(t[1]=l=>o(r).keperluan=l),error:!!o(r).errors.keperluan,"error-message":o(r).errors.keperluan},null,8,["modelValue","error","error-message"])])]),_:1}),e($),e(K,{align:"right"},{default:a(()=>[o(r).hasErrors?(d(),f(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:t[2]||(t[2]=l=>o(r).clearErrors())})):S("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:t[3]||(t[3]=l=>o(r).reset())}),e(u,{flat:"",type:"submit",label:"Submit",color:"primary",loading:o(r).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Oe=y("div",{class:"text-h6"},"Tambah Pengajuan Dana",-1),Se={class:"q-gutter-md"},Re={class:"text-primary"},qe=x({__name:"PengajuanDanaEditDialog",props:{pengajuanDana:{},options:{}},emits:[...V.emits],setup(b){const i=b,{dialogRef:p,onDialogOK:h,onDialogCancel:k,onDialogHide:m}=V(),_=T(i.options.proyek);function w(s,t){t(()=>{_.value=M(s,i.options.proyek,["nama_proyek","tahun_anggaran"])})}const r=E({id_proyek:i.pengajuanDana.id_proyek,keperluan:i.pengajuanDana.keperluan});function g(){r.patch(route("pengajuan_dana.update",i.pengajuanDana.id_pengajuan_dana),{onSuccess:s=>{h({type:"positive",message:s.props.flash.success})}})}return(s,t)=>(d(),f(U,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(m)},{default:a(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(Q,{class:"row items-center q-pb-none"},{default:a(()=>[Oe,e(I),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(k)},null,8,["onClick"])]),_:1}),e($),e(L,{onSubmit:z(g,["prevent"])},{default:a(()=>[e(Q,{class:"scroll"},{default:a(()=>[y("div",Se,[e(H,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:o(r).id_proyek,"onUpdate:modelValue":t[0]||(t[0]=l=>o(r).id_proyek=l),"option-value":"id_proyek","option-label":l=>`${l.nama_proyek} | ${l.tahun_anggaran}`,options:_.value,error:!!o(r).errors.id_proyek,"error-message":o(r).errors.id_proyek,onFilter:w},{option:a(l=>[e(P,q(F(l.itemProps)),{default:a(()=>[e(v,null,{default:a(()=>[y("strong",Re,D(l.opt.nama_proyek),1),c(" "+D(l.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(P,null,{default:a(()=>[e(v,{class:"text-grey"},{default:a(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(X,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:o(r).keperluan,"onUpdate:modelValue":t[1]||(t[1]=l=>o(r).keperluan=l),error:!!o(r).errors.keperluan,"error-message":o(r).errors.keperluan},null,8,["modelValue","error","error-message"])])]),_:1}),e($),e(K,{align:"right"},{default:a(()=>[o(r).hasErrors?(d(),f(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:t[2]||(t[2]=l=>o(r).clearErrors())})):S("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:t[3]||(t[3]=l=>o(r).reset())}),e(u,{flat:"",type:"submit",label:"Update",color:"primary",loading:o(r).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Fe=y("div",{class:"text-h6"},"Delete Confirmation",-1),He=y("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),Te=x({__name:"PengajuanDanaDeleteDialog",props:{id_pengajuan_dana:{}},emits:[...V.emits],setup(b){const i=b,{dialogRef:p,onDialogOK:h,onDialogCancel:k,onDialogHide:m}=V(),_=E({id_pengajuan_dana:i.id_pengajuan_dana});function w(){_.delete(route("pengajuan_dana.destroy",i.id_pengajuan_dana),{onSuccess:r=>{h({type:"positive",message:r.props.flash.success})}})}return(r,g)=>(d(),f(U,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(m)},{default:a(()=>[e(B,null,{default:a(()=>[e(Q,{class:"row items-center q-pb-none"},{default:a(()=>[Fe]),_:1}),e($),e(Q,{class:"row items-center"},{default:a(()=>[e(ce,{icon:"dangerous",color:"red","text-color":"white"}),He]),_:1}),e(K,{align:"right"},{default:a(()=>[e(u,{flat:"",label:"Cancel",color:"primary",onClick:o(k)},null,8,["onClick"]),e(u,{flat:"",label:"Yes, delete it",color:"red",onClick:w})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Me=x({__name:"PengajuanDanaPage",props:{pengajuanDana:{},formOptions:{}},setup(b){const i=[{label:"Keuangan",url:"#"},{label:"Pengajuan Dana",url:"#"}];return(p,h)=>{const k=G("in-link");return d(),R(A,null,[e(o(me),{title:"Pengajuan Dana"}),e(re,null,{breadcrumbs:a(()=>[e(le,{align:"left"},{default:a(()=>[(d(),R(A,null,J(i,m=>W(e(se,{label:m.label},null,8,["label"]),[[k,m.url]])),64))]),_:1})]),default:a(()=>[e(o(ve),{rows:p.pengajuanDana,"form-options":p.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{Me as default};
