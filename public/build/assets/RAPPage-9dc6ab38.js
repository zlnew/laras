import{b as ee,c as oe,d as $,e as P,Q as ae,_ as te,a as le}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-da018ec7.js";import{d as O,t as H,n as J,o as f,e as S,a as e,w as o,h as u,c as R,u as t,ac as ne,z as U,F as N,p as Y,b as _,x as k,q as Z,k as Q,K as re,T as E,U as T,j as x,i as K,g as b,ad as V,ae as q,f as se,l as j,m as B,af as ie,V as pe,Z as ue}from"./app-71b10028.js";import{u as de,Q as I,a as A,b as ce,c as _e,e as D,f as M,g as F}from"./use-dialog-plugin-component-d7386d46.js";import{Q as me,a as G,_ as fe}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-7ccad254.js";import{Q as z}from"./QForm-04ce2fd3.js";import{m as L}from"./options-964f32b0.js";import"./QImg-8a570513.js";import"./_plugin-vue_export-helper-c27b6911.js";const ge={class:"q-pa-md"},ye=O({__name:"RAPTable",props:{rows:{},formOptions:{}},setup(h){const r=h,i=de();function v(n){i.dialog({component:fe,componentProps:{proyek:n}})}function g(){i.dialog({component:ve,componentProps:{options:r.formOptions}})}function m(){i.dialog({component:$e,componentProps:{options:r.formOptions}}).onOk(n=>{i.notify({type:n.type,message:n.message,position:"top"})})}function y(n){i.dialog({component:De,componentProps:{rap:n,options:r.formOptions}}).onOk(l=>{i.notify({type:l.type,message:l.message,position:"top"})})}function C(n){i.dialog({component:Se,componentProps:{id_rap:n}}).onOk(l=>{i.notify({type:l.type,message:l.message,position:"top"})})}const d=[{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"pengguna_jasa",label:"Pengguna Jasa",field:"pengguna_jasa",align:"left",sortable:!0},{name:"penyedia_jasa",label:"Penyedia Jasa",field:"penyedia_jasa",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"status_rap",label:"Status",field:"status_rap",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],s=H(!1);function c(){s.value=!s.value}return(n,l)=>{const p=J("in-link");return f(),S("div",ge,[e(ce,{flat:"",bordered:"","row-key":"id_rap",rows:n.rows,columns:d,"rows-per-page-options":[5,10,15,20,25,50,0],fullscreen:s.value},{"top-left":o(()=>[e(u,{"no-caps":"",label:"Tambah RAP",icon:"add",color:"primary",onClick:m})]),"top-right":o(()=>[Object.keys(n.$page.props.query).length?(f(),R(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:l[0]||(l[0]=a=>t(ne).visit(n.route("rap")))})):U("",!0),e(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:g}),e(u,{flat:"",dense:"",icon:s.value?"fullscreen_exit":"fullscreen",onClick:c,class:"q-ml-md"},null,8,["icon"])]),header:o(a=>[e(I,{props:a},{default:o(()=>[(f(!0),S(N,null,Y(a.cols,w=>(f(),R(_e,{key:w.name,props:a,style:{"font-weight":"bold"}},{default:o(()=>[_(k(w.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:o(a=>[e(I,{props:a},{default:o(()=>[e(A,{key:"nama_proyek",props:a},{default:o(()=>[e(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:a.row.nama_proyek,onClick:w=>v(a.row)},{default:o(()=>[e(me,{anchor:"bottom middle",self:"top middle"},{default:o(()=>[_(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(A,{key:"pengguna_jasa",props:a},{default:o(()=>[_(k(a.row.pengguna_jasa),1)]),_:2},1032,["props"]),e(A,{key:"penyedia_jasa",props:a},{default:o(()=>[_(k(a.row.penyedia_jasa),1)]),_:2},1032,["props"]),e(A,{key:"tahun_anggaran",props:a},{default:o(()=>[_(k(a.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(A,{key:"status_rap",props:a},{default:o(()=>[Z(e(G,{color:a.row.status_rap==400?"red":"primary",label:a.row.status_rap==400?"Closed":"Open"},null,8,["color","label"]),[[p,n.route("detail_rap",a.row.id_rap)]])]),_:2},1032,["props"]),e(A,{key:"actions",props:a},{default:o(()=>[e(u,{dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:o(()=>[e(ee,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[e(oe,{dense:"",style:{"min-width":"100px"}},{default:o(()=>[e($,{clickable:""},{default:o(()=>[e(P,{onClick:w=>y(a.row)},{default:o(()=>[_(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e(Q),e($,{clickable:""},{default:o(()=>[e(P,{class:"text-red",onClick:w=>C(a.row.id_rap)},{default:o(()=>[_(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])])}}}),ke=b("div",{class:"text-h6"},"Pencarian RAP",-1),be={class:"q-gutter-md"},he={class:"text-primary"},ve=O({__name:"RAPSearchDialog",props:{options:{}},emits:[...D.emits],setup(h){const r=h,{dialogRef:i,onDialogOK:v,onDialogCancel:g,onDialogHide:m}=D(),y=H(r.options.currentProyek);function C(l,p){p(()=>{y.value=L(l,r.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const s=re().props.query,c=E({id_proyek:s.id_proyek,status_rap:s.status_rap});function n(){c.get(route("rap"),{onSuccess:()=>v()})}return(l,p)=>(f(),R(T,{ref_key:"dialogRef",ref:i,onHide:t(m)},{default:o(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[ke,e(M),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:t(g)},null,8,["onClick"])]),_:1}),e(Q),e(z,{onSubmit:K(n,["prevent"])},{default:o(()=>[e(x,{class:"scroll"},{default:o(()=>[b("div",be,[e(F,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:t(c).id_proyek,"onUpdate:modelValue":p[0]||(p[0]=a=>t(c).id_proyek=a),"option-value":"id_proyek","option-label":a=>`${a.nama_proyek} | ${a.tahun_anggaran}`,options:y.value,error:!!t(c).errors.id_proyek,"error-message":t(c).errors.id_proyek,onFilter:C},{option:o(({itemProps:a,opt:w,selected:W,toggleOption:X})=>[e($,V(q(a)),{default:o(()=>[e(P,{side:""},{default:o(()=>[e(se,{size:"sm","model-value":W,"onUpdate:modelValue":Ve=>X(w)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(P,null,{default:o(()=>[b("strong",he,k(w.nama_proyek),1),_(" "+k(w.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":o(()=>[e($,null,{default:o(()=>[e(P,{class:"text-grey"},{default:o(()=>[_(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(F,{outlined:"",clearable:"","fill-input":"",label:"Status RAP",modelValue:t(c).status_rap,"onUpdate:modelValue":p[1]||(p[1]=a=>t(c).status_rap=a),options:[100,400]},{"selected-item":o(a=>[e(G,{color:a.opt==400?"red":"primary",label:a.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:o(a=>[e($,V(q(a.itemProps)),{default:o(()=>[e(P,null,{default:o(()=>[_(k(a.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"])])]),_:1}),e(Q),e(j,{align:"right"},{default:o(()=>[e(u,{flat:"",type:"submit",label:"Search",color:"primary",loading:t(c).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ce=b("div",{class:"text-h6"},"Tambah RAP",-1),Pe={class:"q-gutter-md"},we={class:"text-primary"},$e=O({__name:"RAPCreateDialog",props:{options:{}},emits:[...D.emits],setup(h){const r=h,{dialogRef:i,onDialogOK:v,onDialogCancel:g,onDialogHide:m}=D(),y=H(r.options.proyek);function C(c,n){n(()=>{y.value=L(c,r.options.proyek,["nama_proyek","tahun_anggaran"])})}const d=E({id_proyek:null});function s(){d.post(route("rap.store"),{onSuccess:c=>{v({type:"positive",message:c.props.flash.success})}})}return(c,n)=>(f(),R(T,{ref_key:"dialogRef",ref:i,"no-backdrop-dismiss":!0,onHide:t(m)},{default:o(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[Ce,e(M),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:t(g)},null,8,["onClick"])]),_:1}),e(Q),e(z,{onSubmit:K(s,["prevent"])},{default:o(()=>[e(x,{class:"scroll"},{default:o(()=>[b("div",Pe,[e(F,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:t(d).id_proyek,"onUpdate:modelValue":n[0]||(n[0]=l=>t(d).id_proyek=l),"option-value":"id_proyek","option-label":l=>`${l.nama_proyek} | ${l.tahun_anggaran}`,options:y.value,error:!!t(d).errors.id_proyek,"error-message":t(d).errors.id_proyek,onFilter:C},{option:o(l=>[e($,V(q(l.itemProps)),{default:o(()=>[e(P,null,{default:o(()=>[b("strong",we,k(l.opt.nama_proyek),1),_(" "+k(l.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":o(()=>[e($,null,{default:o(()=>[e(P,{class:"text-grey"},{default:o(()=>[_(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"])])]),_:1}),e(Q),e(j,{align:"right"},{default:o(()=>[t(d).hasErrors?(f(),R(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:n[1]||(n[1]=l=>t(d).clearErrors())})):U("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:n[2]||(n[2]=l=>t(d).reset())}),e(u,{flat:"",type:"submit",label:"Submit",color:"primary",loading:t(d).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Re=b("div",{class:"text-h6"},"Edit RAP",-1),Qe={class:"q-gutter-md"},xe={class:"text-primary"},De=O({__name:"RAPEditDialog",props:{rap:{},options:{}},emits:[...D.emits],setup(h){const r=h,{dialogRef:i,onDialogOK:v,onDialogCancel:g,onDialogHide:m}=D(),y={id_proyek:r.rap.id_proyek,nama_proyek:r.rap.nama_proyek,tahun_anggaran:r.rap.tahun_anggaran};ie(()=>{r.options.proyek.push(y)});const C=H(r.options.proyek);function d(n,l){l(()=>{C.value=L(n,r.options.proyek,["nama_proyek","tahun_anggaran"])})}const s=E({id_rap:r.rap.id_rap,id_proyek:r.rap.id_proyek});function c(){s.patch(route("rap.update",r.rap.id_rap),{onSuccess:n=>{v({type:"positive",message:n.props.flash.success})}})}return(n,l)=>(f(),R(T,{ref_key:"dialogRef",ref:i,"no-backdrop-dismiss":!0,onHide:t(m)},{default:o(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[Re,e(M),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:t(g)},null,8,["onClick"])]),_:1}),e(Q),e(z,{onSubmit:K(c,["prevent"])},{default:o(()=>[e(x,{class:"scroll"},{default:o(()=>[b("div",Qe,[e(F,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:t(s).id_proyek,"onUpdate:modelValue":l[0]||(l[0]=p=>t(s).id_proyek=p),"option-value":"id_proyek","option-label":p=>`${p.nama_proyek} | ${p.tahun_anggaran}`,options:C.value,error:!!t(s).errors.id_proyek,"error-message":t(s).errors.id_proyek,onFilter:d},{option:o(p=>[e($,V(q(p.itemProps)),{default:o(()=>[e(P,null,{default:o(()=>[b("strong",xe,k(p.opt.nama_proyek),1),_(" "+k(p.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":o(()=>[e($,null,{default:o(()=>[e(P,{class:"text-grey"},{default:o(()=>[_(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"])])]),_:1}),e(Q),e(j,{align:"right"},{default:o(()=>[t(s).hasErrors?(f(),R(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[1]||(l[1]=p=>t(s).clearErrors())})):U("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:l[2]||(l[2]=p=>t(s).reset())}),e(u,{flat:"",type:"submit",label:"Update",color:"primary",loading:t(s).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ae=b("div",{class:"text-h6"},"Delete Confirmation",-1),Oe=b("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),Se=O({__name:"RAPDeleteDialog",props:{id_rap:{}},emits:[...D.emits],setup(h){const r=h,{dialogRef:i,onDialogOK:v,onDialogCancel:g,onDialogHide:m}=D(),y=E({id_rap:r.id_rap});function C(){y.delete(route("rap.destroy",r.id_rap),{onSuccess:d=>{v({type:"positive",message:d.props.flash.success})}})}return(d,s)=>(f(),R(T,{ref_key:"dialogRef",ref:i,"no-backdrop-dismiss":!0,onHide:t(m)},{default:o(()=>[e(B,null,{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[Ae]),_:1}),e(Q),e(x,{class:"row items-center"},{default:o(()=>[e(pe,{icon:"dangerous",color:"red","text-color":"white"}),Oe]),_:1}),e(j,{align:"right"},{default:o(()=>[e(u,{flat:"",label:"Cancel",color:"primary",onClick:t(g)},null,8,["onClick"]),e(u,{flat:"",label:"Yes, delete it",color:"red",onClick:C})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Ue=O({__name:"RAPPage",props:{rap:{},formOptions:{}},setup(h){const r=[{label:"Main",url:"#"},{label:"RAP",url:"#"}];return(i,v)=>{const g=J("in-link");return f(),S(N,null,[e(t(ue),{title:"RAPP"}),e(te,null,{breadcrumbs:o(()=>[e(ae,{align:"left"},{default:o(()=>[(f(),S(N,null,Y(r,m=>Z(e(le,{label:m.label},null,8,["label"]),[[g,m.url]])),64))]),_:1})]),default:o(()=>[e(t(ye),{rows:i.rap,"form-options":i.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{Ue as default};
