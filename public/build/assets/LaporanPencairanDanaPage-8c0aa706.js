import{l as L,b as q,_ as R,c as E}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-601a9fc9.js";import{d as O,l as S,j as b,W as V,o as d,e as g,a as e,w as l,g as z,c as j,u as n,O as A,h as i,A as T,b as o,F as x,k as $,t as u,z as I,m as J,Z as K,n as M}from"./app-995ac512.js";import{Q as y}from"./QTooltip-e29014a4.js";import{a as B,b as s,c as W,d as Z}from"./QTable-c8ac225f.js";import{Q as G,_ as H}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-5c96c8ec.js";import{c as U,e as X,t as Y,a as aa}from"./LaporanPengajuanDanaSearchDialog.vue_vue_type_script_setup_true_lang-2e9cae49.js";import{u as ea}from"./use-quasar-5794ceca.js";import{t as D,a as P}from"./money-3074a8fc.js";import"./QImg-4e5f03b9.js";import"./use-dialog-plugin-component-e6d16b32.js";import"./QForm-d4e0fa4d.js";import"./options-4b88285e.js";const la={class:"q-pa-md"},na={class:"q-gutter-sm"},ra=O({__name:"LaporanPencairanDanaTable",props:{rows:{},formOptions:{}},setup(C){const m=C,c=S(()=>m.rows.map(r=>{const t=r.status_pencairan==="400"?"Closed":"Open";return{...r,status:t}})),k=ea();function h(r){k.dialog({component:H,componentProps:{proyek:r}})}function p(){k.dialog({component:aa,componentProps:{options:m.formOptions}})}const F=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"nilai_pengajuan",label:"Nilai Pengajuan Dana",field:"nilai_pengajuan",align:"right",sortable:!0},{name:"jumlah_sudah_dibayar",label:"Sudah Dibayarkan",field:"jumlah_sudah_dibayar",align:"right",sortable:!0},{name:"jumlah_belum_dibayar",label:"Belum Dibayarkan",field:"jumlah_belum_dibayar",align:"right",sortable:!0},{name:"status",label:"Status",field:"status_pencairan",align:"left",sortable:!0}],_=b(!1);function N(){_.value=!_.value}const f=b(),w=b(),Q=b();return V(()=>{var r,t,a;w.value={columns:(r=f.value)==null?void 0:r.columns,body:{rows:(t=f.value)==null?void 0:t.computedRows,props:["index","nama_proyek","tahun_anggaran","keperluan","nilai_pengajuan","jumlah_sudah_dibayar","jumlah_belum_dibayar","status"]}},Q.value=U({rows:(a=f.value)==null?void 0:a.computedRows,props:["nama_proyek","tahun_anggaran","keperluan","nilai_pengajuan","jumlah_sudah_dibayar","jumlah_belum_dibayar","status"]})}),(r,t)=>(d(),g("div",la,[e(n(W),{ref_key:"table",ref:f,flat:"",bordered:"","row-key":"id_rab",title:"Laporan Pencairan Dana",rows:c.value,columns:F,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:_.value},{"top-right":l(()=>[z("div",na,[Object.keys(r.$page.props.query).length?(d(),j(i,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:t[0]||(t[0]=a=>n(A).visit(r.route("laporan.pencairan_dana")))})):T("",!0),e(i,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:p}),e(i,{flat:"",dense:"",label:"xls",color:"green",onClick:t[1]||(t[1]=a=>n(X)().exportDataFromJSON({data:Q.value,name:"pencairan-dana",type:"xls"}))},{default:l(()=>[e(y,null,{default:l(()=>[o("Export to xls")]),_:1})]),_:1}),e(i,{flat:"",dense:"",label:"pdf",color:"red-8",onClick:t[2]||(t[2]=a=>n(Y)({filename:"pencairan_dana",header:"Pencairan Dana",columns:w.value.columns,body:w.value.body}))},{default:l(()=>[e(y,null,{default:l(()=>[o("Export to pdf")]),_:1})]),_:1}),e(i,{flat:"",dense:"",icon:_.value?"fullscreen_exit":"fullscreen",onClick:N,class:"q-ml-md"},null,8,["icon"])])]),header:l(a=>[e(B,{props:a},{default:l(()=>[(d(!0),g(x,null,$(a.cols,v=>(d(),j(Z,{key:v.name,props:a,style:{"font-weight":"bold"}},{default:l(()=>[o(u(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(a=>[e(B,{props:a},{default:l(()=>[e(s,{key:"index",props:a},{default:l(()=>[o(u(++a.rowIndex),1)]),_:2},1032,["props"]),e(s,{key:"nama_proyek",props:a},{default:l(()=>[e(i,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:a.row.nama_proyek,onClick:v=>h(a.row)},{default:l(()=>[e(y,{anchor:"bottom middle",self:"top middle"},{default:l(()=>[o(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(s,{key:"tahun_anggaran",props:a},{default:l(()=>[o(u(a.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(s,{key:"keperluan",props:a},{default:l(()=>[o(u(a.row.keperluan),1)]),_:2},1032,["props"]),e(s,{key:"nilai_pengajuan",props:a},{default:l(()=>[o(u(n(D)(n(P)(a.row.nilai_pengajuan))),1)]),_:2},1032,["props"]),e(s,{key:"jumlah_sudah_dibayar",props:a},{default:l(()=>[o(u(n(D)(n(P)(a.row.jumlah_sudah_dibayar))),1)]),_:2},1032,["props"]),e(s,{key:"jumlah_belum_dibayar",props:a},{default:l(()=>[o(u(n(D)(n(P)(a.row.jumlah_belum_dibayar))),1)]),_:2},1032,["props"]),e(s,{key:"status",props:a},{default:l(()=>[n(L)(a.row.status_aktivitas)?(d(),j(i,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:l(()=>[e(y,null,{default:l(()=>[o("Ditolak")]),_:1})]),_:1})):T("",!0),e(n(I),{href:r.route("detail_pencairan_dana",a.row.id_pencairan_dana)},{default:l(()=>[e(G,{color:a.row.status_pencairan==400?"red":"primary",label:a.row.status_pencairan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),ya=O({__name:"LaporanPencairanDanaPage",props:{pencairanDana:{},formOptions:{}},setup(C){const m=[{label:"Reports",url:"#"},{label:"Pencairan Dana",url:"#"}];return(c,k)=>{const h=J("in-link");return d(),g(x,null,[e(n(K),{title:"Laporan Pengajuan Dana"}),e(R,null,{breadcrumbs:l(()=>[e(q,{align:"left"},{default:l(()=>[(d(),g(x,null,$(m,p=>M(e(E,{key:p.label,label:p.label},null,8,["label"]),[[h,p.url]])),64))]),_:1})]),default:l(()=>[e(n(ra),{rows:c.pencairanDana,"form-options":c.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{ya as default};
