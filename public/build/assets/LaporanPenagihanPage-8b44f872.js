import{m as N,b as q,_ as R,c as E}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-cb23a045.js";import{d as B,l as I,j as g,W as S,o as p,e as k,a as e,w as n,g as V,c as P,u as l,O as J,h as u,A as O,b as t,F as C,k as D,t as i,z as K,m as M,Z as z,n as A}from"./app-23d6f15b.js";import{Q as h}from"./QTooltip-f4a8154c.js";import{a as $,b as s,c as W,d as Z}from"./QTable-f46e4729.js";import{Q as G,_ as H}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-1389f9be.js";import{t as j,a as x}from"./money-3074a8fc.js";import{c as U,e as X,t as Y,_ as aa}from"./LaporanPengajuanDanaSearchDialog.vue_vue_type_script_setup_true_lang-93e327fb.js";import{u as ea}from"./use-quasar-af947e3e.js";import"./QImg-68767c1e.js";import"./use-dialog-plugin-component-280fa5ad.js";import"./QForm-774e0a4b.js";import"./options-964f32b0.js";const na={class:"q-pa-md"},la={class:"q-gutter-sm"},ta=B({__name:"LaporanPenagihanTable",props:{rows:{},formOptions:{}},setup(Q){const m=Q,d=I(()=>m.rows.map(r=>{const o=r.status_penagihan==="400"?"Closed":"Open";return{...r,status:o}})),b=ea();function y(r){b.dialog({component:H,componentProps:{proyek:r}})}function c(){b.dialog({component:aa,componentProps:{options:m.formOptions}})}const F=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"kas_masuk",label:"Kas Masuk",field:"Kas Masuk",align:"left",sortable:!0},{name:"jumlah_penagihan",label:"Jumlah Penagihan",field:"jumlah_penagihan",align:"right",sortable:!0},{name:"jumlah_diterima",label:"Jumlah Diterima",field:"jumlah_diterima",align:"right",sortable:!0},{name:"sisa_penagihan",label:"Sisa Penagihan",field:"sisa_penagihan",align:"right",sortable:!0},{name:"status",label:"Status",field:"status_pencairan",align:"left",sortable:!0}],f=g(!1);function L(){f.value=!f.value}const _=g(),w=g(),T=g();return S(()=>{var r,o,a;w.value={columns:(r=_.value)==null?void 0:r.columns,body:{rows:(o=_.value)==null?void 0:o.computedRows,props:["index","nama_proyek","tahun_anggaran","keperluan","kas_masuk","jumlah_penagihan","jumlah_diterima","sisa_penagihan","status"]}},T.value=U({rows:(a=_.value)==null?void 0:a.computedRows,props:["nama_proyek","tahun_anggaran","keperluan","kas_masuk","jumlah_penagihan","jumlah_diterima","sisa_penagihan","status"]})}),(r,o)=>(p(),k("div",na,[e(l(W),{ref_key:"table",ref:_,flat:"",bordered:"","row-key":"id_rab",title:"Laporan Penagihan/Invoice",rows:d.value,columns:F,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:f.value},{"top-right":n(()=>[V("div",la,[Object.keys(r.$page.props.query).length?(p(),P(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:o[0]||(o[0]=a=>l(J).visit(r.route("laporan.penagihan")))})):O("",!0),e(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:c}),e(u,{flat:"",dense:"",label:"xls",color:"green",onClick:o[1]||(o[1]=a=>l(X)().exportDataFromJSON({data:T.value,name:"penagihan",type:"xls"}))},{default:n(()=>[e(h,null,{default:n(()=>[t("Export to xls")]),_:1})]),_:1}),e(u,{flat:"",dense:"",label:"pdf",color:"red-8",onClick:o[2]||(o[2]=a=>l(Y)({filename:"penagihan",header:"Penagihan",columns:w.value.columns,body:w.value.body}))},{default:n(()=>[e(h,null,{default:n(()=>[t("Export to pdf")]),_:1})]),_:1}),e(u,{flat:"",dense:"",icon:f.value?"fullscreen_exit":"fullscreen",onClick:L,class:"q-ml-md"},null,8,["icon"])])]),header:n(a=>[e($,{props:a},{default:n(()=>[(p(!0),k(C,null,D(a.cols,v=>(p(),P(Z,{key:v.name,props:a,style:{"font-weight":"bold"}},{default:n(()=>[t(i(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(a=>[e($,{props:a},{default:n(()=>[e(s,{key:"index",props:a},{default:n(()=>[t(i(++a.rowIndex),1)]),_:2},1032,["props"]),e(s,{key:"nama_proyek",props:a},{default:n(()=>[e(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:a.row.nama_proyek,onClick:v=>y(a.row)},{default:n(()=>[e(h,{anchor:"bottom middle",self:"top middle"},{default:n(()=>[t(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(s,{key:"tahun_anggaran",props:a},{default:n(()=>[t(i(a.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(s,{key:"keperluan",props:a},{default:n(()=>[t(i(a.row.keperluan),1)]),_:2},1032,["props"]),e(s,{key:"kas_masuk",props:a},{default:n(()=>[t(i(a.row.kas_masuk),1)]),_:2},1032,["props"]),e(s,{key:"jumlah_penagihan",props:a},{default:n(()=>[t(i(l(j)(l(x)(a.row.jumlah_penagihan))),1)]),_:2},1032,["props"]),e(s,{key:"jumlah_diterima",props:a},{default:n(()=>[t(i(l(j)(l(x)(a.row.jumlah_diterima))),1)]),_:2},1032,["props"]),e(s,{key:"sisa_penagihan",props:a},{default:n(()=>[t(i(l(j)(l(x)(a.row.sisa_penagihan))),1)]),_:2},1032,["props"]),e(s,{key:"status",props:a},{default:n(()=>[l(N)(a.row.status_aktivitas)?(p(),P(u,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:n(()=>[e(h,null,{default:n(()=>[t("Ditolak")]),_:1})]),_:1})):O("",!0),e(l(K),{href:r.route("detail_penagihan",a.row.id_penagihan)},{default:n(()=>[e(G,{color:a.row.status_penagihan==400?"red":"primary",label:a.row.status_penagihan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),ha=B({__name:"LaporanPenagihanPage",props:{penagihan:{},formOptions:{}},setup(Q){const m=[{label:"Reports",url:"#"},{label:"Penagihan/Invoice",url:"#"}];return(d,b)=>{const y=M("in-link");return p(),k(C,null,[e(l(z),{title:"Laporan Penagihan/Invoice"}),e(R,null,{breadcrumbs:n(()=>[e(q,{align:"left"},{default:n(()=>[(p(),k(C,null,D(m,c=>A(e(E,{label:c.label},null,8,["label"]),[[y,c.url]])),64))]),_:1})]),default:n(()=>[e(l(ta),{rows:d.penagihan,"form-options":d.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{ha as default};
