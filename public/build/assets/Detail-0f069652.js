import{_ as V,a as M,C as S}from"./Content-4404493d.js";import{C as H,a as K,_ as q}from"./Card-b1401f32.js";import{d as z,K as E,b as k,k as J,e as O,c as g,h as n,u as a,g as e,F as P,o as l,Z,n as h,j as C,q as A,f as c,l as i,t as u,p as T,a as v,m as y}from"./app-9f499f35.js";import{T as G,a as I,_ as j,b as o,c as Q,d as r}from"./Table-e8d21086.js";import{t as _}from"./number-6d20867b.js";import{M as W}from"./modal-56d32abb.js";import{T as F}from"./toastify-d3dc56de.js";import{_ as X}from"./Create.m.vue_vue_type_script_setup_true_lang-159eaf24.js";import{_ as Y}from"./Informasi.p.vue_vue_type_script_setup_true_lang-8b3a12b9.js";import{_ as aa}from"./Timeline.p.vue_vue_type_script_setup_true_lang-47dbf251.js";import{_ as na}from"./Persetujuan.p.vue_vue_type_script_setup_true_lang-339d90c9.js";import{_ as ea}from"./Pengajuan.p.vue_vue_type_script_setup_true_lang-9a0f7e39.js";import{T as ta}from"./Foot-1a693c41.js";import"./Modal.vue_vue_type_style_index_0_scoped_fdb70d85_lang-569f49cb.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Footer-5cc51b7e.js";import"./Head.vue_vue_type_script_setup_true_lang-6ca4f119.js";import"./Input.vue_vue_type_script_setup_true_lang-995ff141.js";import"./Label.vue_vue_type_script_setup_true_lang-b00eec72.js";import"./Error.vue_vue_type_script_setup_true_lang-35daa2cd.js";import"./date-7cb373b2.js";import"./Select.vue_vue_type_script_setup_true_lang-b9782f71.js";import"./Textarea.vue_vue_type_script_setup_true_lang-8926a642.js";const ra=v("div",{class:"flex justify-between items-center"},[v("h5",{class:"font-bold text-xl text-dark"},"List Pengajuan Dana")],-1),sa={class:"text-dark"},la={key:1,class:"text-dark"},ia={key:0},ua={key:1},oa={class:"grid grid-cols-3 gap-6"},_a={class:"col-span-2"},Ua=z({__name:"Detail",props:{keuangan:{},pencairan_dana:{},detail_pencairan_dana:{},detail_pengajuan_dana:{},timeline:{}},setup(L){const p=L,m=E(),$=m.props.role,b=m.props.permissions,D=k(()=>!!($==="admin"||b.includes("create pencairan dana")&&b.includes("update pencairan dana")&&b.includes("delete pencairan dana"))),B=k(()=>p.pencairan_dana.status_aktivitas==="Dibuat"),N=k(()=>{const s=p.pencairan_dana.status_aktivitas;if(b.includes("approve status pencairan dana")){if($==="admin")return!0;switch(s){case"Dibayar":return!0;default:return!1}}return!1}),x=k(()=>p.detail_pengajuan_dana.map(s=>{const d=_(s.jumlah_pengajuan);return{...s,jumlah_pengajuan_in_rupiah:d}})),w=k(()=>{const s=p.detail_pengajuan_dana.reduce((f,t)=>f+parseFloat(t.jumlah_pengajuan.toString()),0),d=p.detail_pencairan_dana.reduce((f,t)=>f+parseFloat(t.jumlah_pencairan.toString()),0);return{pengajuan_dana:_(s),pencairan_dana:_(d),belum_dibayar:_(s-d)}});function R(s,d){W.pop(X,{id_pencairan_dana:p.pencairan_dana.id_pencairan_dana,detail_pengajuan_dana:s,jumlah_pencairan:d})}return J(()=>{m.props.flash.success&&F.success(m.props.flash.success),m.props.flash.error&&F.error(m.props.flash.error)}),(s,d)=>{const f=O("ease-button");return l(),g(P,null,[n(a(Z),{title:"Pencairan Dana"}),n(V,null,{breadcrumb:e(()=>[n(M,h(C({second:"Keuangan",current:p.keuangan.nama_proyek})),null,16)]),default:e(()=>[n(S,null,{default:e(()=>[n(Y,h(C({keuangan:s.keuangan,pencairan_dana:s.pencairan_dana})),null,16),n(a(H),null,{default:e(()=>[n(a(K),null,{default:e(()=>[ra]),_:1}),n(a(q),{table:""},{default:e(()=>[n(a(G),null,{default:e(()=>[n(a(I),null,{default:e(()=>[n(a(j),null,{default:e(()=>[n(a(o),{value:"#"}),n(a(o),{value:"Uraian"}),n(a(o),{value:"Pos"}),n(a(o),{value:"Jenis Pembayaran"}),n(a(o),{value:"Rekening"}),n(a(o),{"text-align":"right",value:"Pengajuan"}),n(a(o),{"text-align":"center",value:"Pembayaran"}),n(a(o),{"text-align":"right",value:"Belum Dibayar"})]),_:1})]),_:1}),n(a(Q),null,{default:e(()=>[x.value.length?(l(!0),g(P,{key:0},A(x.value,(t,U)=>(l(),c(a(j),{key:t.id_detail_pengajuan_dana},{default:e(()=>[n(a(r),null,{default:e(()=>[i(u(U+1),1)]),_:2},1024),n(a(r),{whitespace:"nowrap",class:"font-semibold text-dark"},{default:e(()=>[i(u(t.uraian),1)]),_:2},1024),n(a(r),{whitespace:"nowrap"},{default:e(()=>[i(u(t.uraian_rap),1)]),_:2},1024),n(a(r),{whitespace:"nowrap"},{default:e(()=>[i(u(t.jenis_pembayaran),1)]),_:2},1024),n(a(r),{whitespace:"nowrap"},{default:e(()=>[v("span",sa,u(t.nama_bank)+" | "+u(t.nomor_rekening),1),i(" - "+u(t.nama_rekening),1)]),_:2},1024),n(a(r),{whitespace:"nowrap","text-align":"right"},{default:e(()=>[i(u(t.jumlah_pengajuan_in_rupiah),1)]),_:2},1024),n(a(r),{whitespace:"nowrap","text-align":"center"},{default:e(()=>[D.value&&B.value?(l(),g(P,{key:0},[t.jumlah_pencairan<t.jumlah_pengajuan?(l(),c(f,y({key:0,onClick:pa=>R(t,t.jumlah_pencairan)},{variant:"link",text:t.jumlah_pencairan?a(_)(t.jumlah_pencairan):"Bayar"}),null,16,["onClick"])):(l(),c(f,h(y({key:1},{variant:"transparent",text:a(_)(t.jumlah_pencairan)})),null,16))],64)):(l(),g("span",la,u(a(_)(t.jumlah_pencairan)),1))]),_:2},1024),n(a(r),{whitespace:"nowrap","text-align":"right"},{default:e(()=>[t.jumlah_pencairan<t.jumlah_pengajuan?(l(),g("span",ia,u(a(_)(t.jumlah_pengajuan-t.jumlah_pencairan)),1)):(l(),g("span",ua,"-"))]),_:2},1024)]),_:2},1024))),128)):(l(),c(a(j),{key:1,last:""},{default:e(()=>[n(a(r),{colspan:"8","text-align":"center"},{default:e(()=>[i(" Uraian tidak ditemukan ")]),_:1})]),_:1}))]),_:1}),x.value.length?(l(),c(a(ta),{key:0},{default:e(()=>[n(a(j),{last:""},{default:e(()=>[n(a(r),{colspan:"4"}),n(a(r),{class:"font-semibold"},{default:e(()=>[i(" Total Pengajuan ")]),_:1}),n(a(r),{"text-align":"right",class:"font-semibold"},{default:e(()=>[i(u(w.value.pengajuan_dana),1)]),_:1})]),_:1}),n(a(j),{last:""},{default:e(()=>[n(a(r),{colspan:"4"}),n(a(r),{class:"font-semibold"},{default:e(()=>[i(" Total Pembayaran ")]),_:1}),n(a(r),{"text-align":"right",class:"font-semibold"},{default:e(()=>[i(u(w.value.pencairan_dana),1)]),_:1})]),_:1}),n(a(j),{last:""},{default:e(()=>[n(a(r),{colspan:"4"}),n(a(r),{class:"font-semibold"},{default:e(()=>[i(" Total Belum Dibayarkan ")]),_:1}),n(a(r),{"text-align":"right",class:"font-semibold"},{default:e(()=>[i(u(w.value.belum_dibayar),1)]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1}),v("div",oa,[v("div",_a,[n(aa,h(C({timeline:s.timeline})),null,16)]),D.value&&B.value?(l(),c(ea,h(y({key:0},{id_pencairan_dana:s.pencairan_dana.id_pencairan_dana})),null,16)):T("",!0),N.value?(l(),c(na,h(y({key:1},{id_pencairan_dana:s.pencairan_dana.id_pencairan_dana})),null,16)):T("",!0)])]),_:1})]),_:1})],64)}}});export{Ua as default};
