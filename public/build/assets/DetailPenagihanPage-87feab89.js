import{i as B,d as R,e as O,f as pe,g as ge,Q as M,a as L,b as me,h as ce,_ as _e,c as he}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-37451739.js";import{d as I,l as fe,j as A,T as N,o as m,c as x,C as be,w as t,a,b as k,t as _,u as e,Q as D,h as b,i as q,A as j,g as s,y as ve,e as S,k as re,F as X,f as le,s as F,p as J,q as T,v as Y,x as K,D as ke,E as ye,m as Ve,Z as Ce,G as xe,H as we,n as Pe}from"./app-9a281e26.js";import{Q as ee}from"./QTooltip-2e5a4439.js";import{b as c,a as H,c as $e,d as Qe,Q as ae}from"./QTable-055131ee.js";import{Q as Se,a as ie,b as De,c as se,_ as Ue}from"./FileDeleteDialog.vue_vue_type_script_setup_true_lang-eafb6399.js";import{f as z}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-42904bb0.js";import{Q as G}from"./QPopupEdit-7ad70503.js";import{u as Z}from"./use-quasar-a06a674a.js";import{a as y,t as $}from"./money-3074a8fc.js";import{u as E,Q as te}from"./use-dialog-plugin-component-33e3ef66.js";import{Q as ne}from"./QForm-2af13f93.js";import{m as oe}from"./options-964f32b0.js";import{Q as W,a as Te,b as de,_ as qe}from"./QFile-fbfe7a62.js";import"./QImg-75496342.js";const Re={class:"q-gutter-sm"},je={key:1},Oe=I({__name:"PenagihanItemTable",props:{rows:{},data:{},formOptions:{}},setup(Q){const r=Q,V=fe(()=>{const w=r.rows.reduce((i,C)=>i+y(C.harga_satuan_penagihan)*y(C.volume_penagihan),0),g=w-y(n.potongan_ppn)-y(n.potongan_pph)-y(n.potongan_lainnya);return{penagihan:w,pencairan:g}}),f=Z();function P(){f.dialog({component:ze,componentProps:{penagihan:r.data.penagihan,options:r.formOptions}}).onOk(w=>{f.notify({type:w.type,message:w.message,position:"top"})})}function v(w){f.dialog({component:oa,componentProps:{detailPenagihan:w,options:r.formOptions}}).onOk(g=>{f.notify({type:g.type,message:g.message,position:"top"})})}function h(w){f.dialog({component:sa,componentProps:{id_detail_penagihan:w}}).onOk(g=>{f.notify({type:g.type,message:g.message,position:"top"})})}const U=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"harga_satuan",label:"Harga Satuan",field:"harga_satuan",align:"right",sortable:!0},{name:"volume",label:"Volume",field:"volume",align:"right",sortable:!0},{name:"total_harga",label:"Total Harga",field:"total_harga",align:"right",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],d=A(!1);function o(){d.value=!d.value}const u=A(""),p=A([]),n=N({potongan_ppn:r.data.penagihan.potongan_ppn,potongan_pph:r.data.penagihan.potongan_pph,potongan_lainnya:r.data.penagihan.potongan_lainnya,keterangan_potongan_lainnya:r.data.penagihan.keterangan_potongan_lainnya});function l(){n.put(route("penagihan.tax",r.data.penagihan.id_penagihan),{preserveScroll:!0,onSuccess:()=>!0})}return(w,g)=>(m(),x($e,{flat:"",bordered:"","row-key":"id_detail_penagihan",rows:w.rows,columns:U,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:d.value,filter:u.value,selection:"multiple",selected:p.value,"onUpdate:selected":g[13]||(g[13]=i=>p.value=i),class:"no-border"},be({"top-left":t(()=>[s("div",Re,[e(B)()||e(R)("create & modify penagihan")&&e(O)(w.data.penagihan)?(m(),x(b,{key:0,"no-caps":"",label:"Tambah Uraian",icon:"add",color:"primary",onClick:P})):j("",!0)])]),"top-right":t(()=>[a(D,{dense:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":g[0]||(g[0]=i=>u.value=i),placeholder:"Search"},{append:t(()=>[a(ve,{name:"search"})]),_:1},8,["modelValue"]),a(b,{flat:"",dense:"",icon:d.value?"fullscreen_exit":"fullscreen",onClick:o,class:"q-ml-md"},null,8,["icon"])]),header:t(i=>[a(H,{props:i},{default:t(()=>[(m(!0),S(X,null,re(i.cols,C=>(m(),x(Qe,{key:C.name,props:i,style:{"font-weight":"bold"}},{default:t(()=>[C.name==="penerimaan"?(m(),x(le,{key:0,modelValue:i.selected,"onUpdate:modelValue":ue=>i.selected=ue,label:"Penerimaan"},null,8,["modelValue","onUpdate:modelValue"])):(m(),S("span",je,_(C.label),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(i=>[a(H,{props:i},{default:t(()=>[a(c,{key:"index",props:i},{default:t(()=>[k(_(++i.rowIndex),1)]),_:2},1032,["props"]),a(c,{key:"uraian",props:i},{default:t(()=>[k(_(i.row.uraian),1)]),_:2},1032,["props"]),a(c,{key:"harga_satuan",props:i},{default:t(()=>[k(_(e($)(e(y)(i.row.harga_satuan_penagihan))),1)]),_:2},1032,["props"]),a(c,{key:"volume",props:i},{default:t(()=>[k(_(e(y)(i.row.volume_penagihan)),1)]),_:2},1032,["props"]),a(c,{key:"total_harga",props:i},{default:t(()=>[k(_(e($)(e(y)(i.row.harga_satuan_penagihan)*e(y)(i.row.volume_penagihan))),1)]),_:2},1032,["props"]),a(c,{key:"penerimaan",props:i},{default:t(()=>[a(le,{modelValue:i.selected,"onUpdate:modelValue":C=>i.selected=C},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),a(c,{key:"actions",props:i},{default:t(()=>[e(B)()||e(R)("create & modify penagihan")&&e(O)(w.data.penagihan)?(m(),x(b,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:t(()=>[a(pe,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[a(ge,{dense:"",style:{"min-width":"100px"}},{default:t(()=>[a(M,{clickable:""},{default:t(()=>[a(L,{onClick:C=>v(i.row)},{default:t(()=>[k(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),a(F),a(M,{clickable:""},{default:t(()=>[a(L,{class:"text-red",onClick:C=>h(i.row.id_detail_penagihan)},{default:t(()=>[k(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(m(),x(b,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:t(()=>[a(ee,null,{default:t(()=>[k("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:2},[w.rows.length?{name:"bottom-row",fn:t(()=>[a(H,{"no-hover":""},{default:t(()=>[a(c,{colspan:"3",style:{border:"none"}}),a(c,{class:"text-right"},{default:t(()=>[k(" Total Penagihan ")]),_:1}),a(c,{class:"text-right text-weight-bold"},{default:t(()=>[k(_(e($)(V.value.penagihan)),1)]),_:1}),a(c,{style:{border:"none"}})]),_:1}),a(H,{"no-hover":""},{default:t(()=>[a(c,{colspan:"3",style:{border:"none"}}),a(c,{class:"text-right"},{default:t(()=>[k(" Total Diterima ")]),_:1}),a(c,{class:"text-right text-weight-bold"},{default:t(()=>[k(_(e($)(e(y)(w.data.penagihan.jumlah_diterima))),1)]),_:1}),a(c,{style:{border:"none"}})]),_:1}),a(H,{"no-hover":""},{default:t(()=>[a(c,{colspan:"3",style:{border:"none"}}),a(c,{class:"text-right"},{default:t(()=>[k(" Potongan PPN ")]),_:1}),a(c,{class:"text-right text-weight-bold"},{default:t(()=>[k(_(e($)(e(y)(e(n).potongan_ppn)))+" ",1),e(B)()||e(R)("create & modify penagihan")&&e(O)(w.data.penagihan)?(m(),x(G,{key:0,modelValue:e(n).potongan_ppn,"onUpdate:modelValue":g[3]||(g[3]=i=>e(n).potongan_ppn=i),modelModifiers:{number:!0}},{default:t(i=>[a(D,{flat:"",dense:"","hide-bottom-space":"","reverse-fill-mask":"",mask:"#.##","fill-mask":"0",modelValue:e(n).potongan_ppn,"onUpdate:modelValue":g[2]||(g[2]=C=>e(n).potongan_ppn=C),hint:e($)(e(y)(e(n).potongan_ppn)),error:!!e(n).errors.potongan_ppn,"error-message":e(n).errors.potongan_ppn,"input-class":"text-right"},{after:t(()=>[a(b,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:q(i.cancel,["stop","prevent"])},null,8,["onClick"]),a(b,{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!e(n).isDirty,onClick:[g[1]||(g[1]=q(C=>l(),["stop","prevent"])),i.set]},null,8,["disable","onClick"])]),_:2},1032,["modelValue","hint","error","error-message"])]),_:1},8,["modelValue"])):j("",!0)]),_:1}),a(c,{style:{border:"none"}})]),_:1}),a(H,{"no-hover":""},{default:t(()=>[a(c,{colspan:"3",style:{border:"none"}}),a(c,{class:"text-right"},{default:t(()=>[k(" Potongan PPH ")]),_:1}),a(c,{class:"text-right text-weight-bold"},{default:t(()=>[k(_(e($)(e(y)(e(n).potongan_pph)))+" ",1),e(B)()||e(R)("create & modify penagihan")&&e(O)(w.data.penagihan)?(m(),x(G,{key:0,modelValue:e(n).potongan_pph,"onUpdate:modelValue":g[6]||(g[6]=i=>e(n).potongan_pph=i),modelModifiers:{number:!0}},{default:t(i=>[a(D,{flat:"",dense:"","hide-bottom-space":"","reverse-fill-mask":"",mask:"#.##","fill-mask":"0",modelValue:e(n).potongan_pph,"onUpdate:modelValue":g[5]||(g[5]=C=>e(n).potongan_pph=C),hint:e($)(e(y)(e(n).potongan_pph)),error:!!e(n).errors.potongan_pph,"error-message":e(n).errors.potongan_pph,"input-class":"text-right"},{after:t(()=>[a(b,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:q(i.cancel,["stop","prevent"])},null,8,["onClick"]),a(b,{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!e(n).isDirty,onClick:[g[4]||(g[4]=q(C=>l(),["stop","prevent"])),i.set]},null,8,["disable","onClick"])]),_:2},1032,["modelValue","hint","error","error-message"])]),_:1},8,["modelValue"])):j("",!0)]),_:1}),a(c,{style:{border:"none"}})]),_:1}),a(H,{"no-hover":""},{default:t(()=>[a(c,{colspan:"3",style:{border:"none"}}),a(c,{class:"text-right"},{default:t(()=>[k(" Potongan Lainnya ")]),_:1}),a(c,{class:"text-right text-weight-bold"},{default:t(()=>[k(_(e($)(e(y)(e(n).potongan_lainnya)))+" ",1),e(B)()||e(R)("create & modify penagihan")&&e(O)(w.data.penagihan)?(m(),x(G,{key:0,modelValue:e(n).potongan_lainnya,"onUpdate:modelValue":g[9]||(g[9]=i=>e(n).potongan_lainnya=i),modelModifiers:{number:!0}},{default:t(i=>[a(D,{flat:"",dense:"","hide-bottom-space":"","reverse-fill-mask":"",mask:"#.##","fill-mask":"0",modelValue:e(n).potongan_lainnya,"onUpdate:modelValue":g[8]||(g[8]=C=>e(n).potongan_lainnya=C),hint:e($)(e(y)(e(n).potongan_lainnya)),error:!!e(n).errors.potongan_lainnya,"error-message":e(n).errors.potongan_lainnya,"input-class":"text-right"},{after:t(()=>[a(b,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:q(i.cancel,["stop","prevent"])},null,8,["onClick"]),a(b,{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!e(n).isDirty,onClick:[g[7]||(g[7]=q(C=>l(),["stop","prevent"])),i.set]},null,8,["disable","onClick"])]),_:2},1032,["modelValue","hint","error","error-message"])]),_:1},8,["modelValue"])):j("",!0)]),_:1}),a(c,null,{default:t(()=>[k(_(e(n).keterangan_potongan_lainnya||"Tambah Keterangan")+" ",1),e(B)()||e(R)("create & modify penagihan")&&e(O)(w.data.penagihan)?(m(),x(G,{key:0,modelValue:e(n).keterangan_potongan_lainnya,"onUpdate:modelValue":g[12]||(g[12]=i=>e(n).keterangan_potongan_lainnya=i)},{default:t(i=>[a(D,{flat:"",dense:"",autogrow:"","hide-bottom-space":"",label:"Tambah Keterangan",modelValue:e(n).keterangan_potongan_lainnya,"onUpdate:modelValue":g[11]||(g[11]=C=>e(n).keterangan_potongan_lainnya=C),error:!!e(n).errors.keterangan_potongan_lainnya,"error-message":e(n).errors.keterangan_potongan_lainnya},{after:t(()=>[a(b,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:q(i.cancel,["stop","prevent"])},null,8,["onClick"]),a(b,{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!e(n).isDirty,onClick:[g[10]||(g[10]=q(C=>l(),["stop","prevent"])),i.set]},null,8,["disable","onClick"])]),_:2},1032,["modelValue","error","error-message"])]),_:1},8,["modelValue"])):j("",!0)]),_:1})]),_:1}),a(H,{"no-hover":""},{default:t(()=>[a(c,{colspan:"3",style:{border:"none"}}),a(c,{class:"text-right"},{default:t(()=>[k(" Total Pencairan/Netto ")]),_:1}),a(c,{class:"text-right text-weight-bold"},{default:t(()=>[k(_(e($)(V.value.pencairan)),1)]),_:1}),a(c,{style:{border:"none"}})]),_:1})]),key:"0"}:void 0]),1032,["rows","fullscreen","filter","selected"]))}}),He=s("div",{class:"text-h6"},"Tambah Uraian Penagihan",-1),Ae={class:"q-gutter-md"},Fe={class:"row"},Ee={class:"col-12 col-md-6 q-pr-sm"},Ie={class:"col-12 col-md-6 q-pl-sm"},Ne={class:"row"},Be=s("div",{class:"col-12 col-md-6 q-pr-sm"},null,-1),Ke={class:"col-12 col-md-6 q-pl-sm text-right"},Me=s("div",{class:"text-secondary text-caption"},"Total Harga",-1),Le={class:"text-weight-bold text-subtitle1"},ze=I({__name:"PenagihanItemCreateDialog",props:{penagihan:{},options:{}},emits:[...E.emits],setup(Q){const r=Q,{dialogRef:V,onDialogOK:f,onDialogCancel:P,onDialogHide:v}=E(),h=A(r.options.detailRab);function U(p,n){n(()=>{h.value=oe(p,r.options.detailRab,["uraian"])})}function d(p){const n=r.options.detailRab.find(l=>l.id_detail_rab===p);n&&n.harga_satuan&&(o.harga_satuan_penagihan=n.harga_satuan)}const o=N({id_detail_rab:null,volume_penagihan:"0",harga_satuan_penagihan:"0"});function u(){o.post(route("detail_penagihan.store",r.penagihan.id_penagihan),{onSuccess:p=>{f({type:"positive",message:p.props.flash.success})}})}return(p,n)=>(m(),x(J,{ref_key:"dialogRef",ref:V,"no-backdrop-dismiss":!0,onHide:e(v)},{default:t(()=>[a(K,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[a(T,{class:"row items-center q-pb-none"},{default:t(()=>[He,a(te),a(b,{flat:"",round:"",dense:"",icon:"close",onClick:e(P)},null,8,["onClick"])]),_:1}),a(F),a(ne,{onSubmit:q(u,["prevent"])},{default:t(()=>[a(T,{class:"scroll"},{default:t(()=>[s("div",Ae,[a(ae,{outlined:"",clearable:"","use-input":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Uraian RAB","option-value":"id_detail_rab","option-label":"uraian","model-value":e(o).id_detail_rab,options:h.value,error:!!e(o).errors.id_detail_rab,"error-message":e(o).errors.id_detail_rab,onFilter:U,"onUpdate:modelValue":n[0]||(n[0]=l=>{e(o).id_detail_rab=l,d(l)})},{"no-option":t(()=>[a(M,null,{default:t(()=>[a(L,{class:"text-grey"},{default:t(()=>[k(" No results ")]),_:1})]),_:1})]),_:1},8,["model-value","options","error","error-message"]),s("div",Fe,[s("div",Ee,[a(D,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Harga Satuan",mask:"#.##","fill-mask":"0",modelValue:e(o).harga_satuan_penagihan,"onUpdate:modelValue":n[1]||(n[1]=l=>e(o).harga_satuan_penagihan=l),hint:e($)(e(y)(e(o).harga_satuan_penagihan)),"hide-hint":e(y)(e(o).harga_satuan_penagihan)<1,error:!!e(o).errors.harga_satuan_penagihan,"error-message":e(o).errors.harga_satuan_penagihan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),s("div",Ie,[a(D,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Volume",mask:"#.##","fill-mask":"0",modelValue:e(o).volume_penagihan,"onUpdate:modelValue":n[2]||(n[2]=l=>e(o).volume_penagihan=l),error:!!e(o).errors.volume_penagihan,"error-message":e(o).errors.volume_penagihan,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),s("div",Ne,[Be,s("div",Ke,[Me,s("div",Le,_(e($)(e(y)(e(o).harga_satuan_penagihan)*e(y)(e(o).volume_penagihan))),1)])])])]),_:1}),a(F),a(Y,{align:"right"},{default:t(()=>[e(o).hasErrors?(m(),x(b,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:n[3]||(n[3]=l=>e(o).clearErrors())})):j("",!0),a(b,{flat:"",label:"Reset",color:"secondary",onClick:n[4]||(n[4]=l=>e(o).reset())}),a(b,{flat:"",type:"submit",label:"Submit",color:"primary",loading:e(o).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ge=s("div",{class:"text-h6"},"Edit Uraian Penagihan",-1),Je={class:"q-gutter-md"},Ye={class:"row"},Ze={class:"col-12 col-md-6 q-pr-sm"},We={class:"col-12 col-md-6 q-pl-sm"},Xe={class:"row"},ea=s("div",{class:"col-12 col-md-6 q-pr-sm"},null,-1),aa={class:"col-12 col-md-6 q-pl-sm text-right"},ta=s("div",{class:"text-secondary text-caption"},"Total Harga",-1),na={class:"text-weight-bold text-subtitle1"},oa=I({__name:"PenagihanItemEditDialog",props:{detailPenagihan:{},options:{}},emits:[...E.emits],setup(Q){const r=Q,{dialogRef:V,onDialogOK:f,onDialogCancel:P,onDialogHide:v}=E(),h=A(r.options.detailRab);function U(p,n){n(()=>{h.value=oe(p,r.options.detailRab,["uraian"])})}function d(p){const n=r.options.detailRab.find(l=>l.id_detail_rab===p);n&&n.harga_satuan&&(o.harga_satuan_penagihan=n.harga_satuan)}const o=N({id_detail_rab:r.detailPenagihan.id_detail_rab,volume_penagihan:r.detailPenagihan.volume_penagihan,harga_satuan_penagihan:r.detailPenagihan.harga_satuan_penagihan});function u(){o.patch(route("detail_penagihan.update",r.detailPenagihan.id_detail_penagihan),{onSuccess:p=>{f({type:"positive",message:p.props.flash.success})}})}return(p,n)=>(m(),x(J,{ref_key:"dialogRef",ref:V,"no-backdrop-dismiss":!0,onHide:e(v)},{default:t(()=>[a(K,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[a(T,{class:"row items-center q-pb-none"},{default:t(()=>[Ge,a(te),a(b,{flat:"",round:"",dense:"",icon:"close",onClick:e(P)},null,8,["onClick"])]),_:1}),a(F),a(ne,{onSubmit:q(u,["prevent"])},{default:t(()=>[a(T,{class:"scroll"},{default:t(()=>[s("div",Je,[a(ae,{outlined:"",clearable:"","use-input":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Uraian RAB","option-value":"id_detail_rab","option-label":"uraian","model-value":e(o).id_detail_rab,options:h.value,error:!!e(o).errors.id_detail_rab,"error-message":e(o).errors.id_detail_rab,onFilter:U,"onUpdate:modelValue":n[0]||(n[0]=l=>{e(o).id_detail_rab=l,d(l)})},{"no-option":t(()=>[a(M,null,{default:t(()=>[a(L,{class:"text-grey"},{default:t(()=>[k(" No results ")]),_:1})]),_:1})]),_:1},8,["model-value","options","error","error-message"]),s("div",Ye,[s("div",Ze,[a(D,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Harga Satuan",mask:"#.##","fill-mask":"0",modelValue:e(o).harga_satuan_penagihan,"onUpdate:modelValue":n[1]||(n[1]=l=>e(o).harga_satuan_penagihan=l),hint:e($)(e(y)(e(o).harga_satuan_penagihan)),"hide-hint":e(y)(e(o).harga_satuan_penagihan)<1,error:!!e(o).errors.harga_satuan_penagihan,"error-message":e(o).errors.harga_satuan_penagihan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),s("div",We,[a(D,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Volume",mask:"#.##","fill-mask":"0",modelValue:e(o).volume_penagihan,"onUpdate:modelValue":n[2]||(n[2]=l=>e(o).volume_penagihan=l),error:!!e(o).errors.volume_penagihan,"error-message":e(o).errors.volume_penagihan,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),s("div",Xe,[ea,s("div",aa,[ta,s("div",na,_(e($)(e(y)(e(o).harga_satuan_penagihan)*e(y)(e(o).volume_penagihan))),1)])])])]),_:1}),a(F),a(Y,{align:"right"},{default:t(()=>[e(o).hasErrors?(m(),x(b,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:n[3]||(n[3]=l=>e(o).clearErrors())})):j("",!0),a(b,{flat:"",label:"Reset",color:"secondary",onClick:n[4]||(n[4]=l=>e(o).reset())}),a(b,{flat:"",type:"submit",label:"Update",color:"primary",loading:e(o).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),la=s("div",{class:"text-h6"},"Delete Confirmation",-1),ia=s("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),sa=I({__name:"PenagihanItemDeleteDialog",props:{id_detail_penagihan:{}},emits:[...E.emits],setup(Q){const r=Q,{dialogRef:V,onDialogOK:f,onDialogCancel:P,onDialogHide:v}=E(),h=N({id_detail_penagihan:r.id_detail_penagihan});function U(){h.delete(route("detail_penagihan.destroy",r.id_detail_penagihan),{onSuccess:d=>{f({type:"positive",message:d.props.flash.success})}})}return(d,o)=>(m(),x(J,{ref_key:"dialogRef",ref:V,"no-backdrop-dismiss":!0,onHide:e(v)},{default:t(()=>[a(K,null,{default:t(()=>[a(T,{class:"row items-center q-pb-none"},{default:t(()=>[la]),_:1}),a(F),a(T,{class:"row items-center"},{default:t(()=>[a(ke,{icon:"dangerous",color:"red","text-color":"white"}),ia]),_:1}),a(Y,{align:"right"},{default:t(()=>[a(b,{flat:"",label:"Cancel",color:"primary",onClick:e(P)},null,8,["onClick"]),a(b,{flat:"",label:"Yes, delete it",color:"red",onClick:U})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),ra=s("div",{class:"text-h6"},"Action Confirmation",-1),da=s("div",{class:"text-body"}," Are you sure want to perform this action? ",-1),ua={class:"q-gutter-md"},pa=I({__name:"PenagihanShallowAcceptDialog",props:{id_penagihan:{},jumlah_diterima:{}},emits:[...E.emits],setup(Q){const r=Q,{dialogRef:V,onDialogOK:f,onDialogCancel:P,onDialogHide:v}=E(),h=N({bertahap:!0,catatan:null,jumlah_diterima:r.jumlah_diterima});function U(){h.post(route("penagihan.confirm",r.id_penagihan),{onSuccess:d=>{f({type:"positive",message:d.props.flash.success})}})}return(d,o)=>(m(),x(J,{ref_key:"dialogRef",ref:V,"no-backdrop-dismiss":!0,onHide:e(v)},{default:t(()=>[a(K,{style:{width:"400px","max-width":"80vw"}},{default:t(()=>[a(T,{class:"row items-center q-pb-none"},{default:t(()=>[ra,a(te),a(b,{flat:"",round:"",dense:"",icon:"close",onClick:e(P)},null,8,["onClick"])]),_:1}),a(T,null,{default:t(()=>[da]),_:1}),a(ne,{onSubmit:q(U,["prevent"])},{default:t(()=>[a(T,{class:"scroll"},{default:t(()=>[s("div",ua,[a(D,{flat:"","reverse-fill-mask":"","hide-bottom-space":"","fill-mask":"0",mask:"#.##",label:"Masukkan Jumlah Diterima",modelValue:e(h).jumlah_diterima,"onUpdate:modelValue":o[0]||(o[0]=u=>e(h).jumlah_diterima=u),hint:e($)(e(y)(e(h).jumlah_diterima)),error:!!e(h).errors.jumlah_diterima,"error-message":e(h).errors.jumlah_diterima,"input-class":"text-right"},null,8,["modelValue","hint","error","error-message"]),a(D,{flat:"",autogrow:"","hide-bottom-space":"",label:"Tambahkan Catatan",modelValue:e(h).catatan,"onUpdate:modelValue":o[1]||(o[1]=u=>e(h).catatan=u)},null,8,["modelValue"])])]),_:1}),a(Y,{align:"right"},{default:t(()=>[a(b,{flat:"",label:"Cancel",color:"secondary",onClick:e(P)},null,8,["onClick"]),a(b,{flat:"",type:"submit",label:"Ok",color:"secondary",loading:e(h).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ga=I({__name:"PenagihanApprovalForm",props:{data:{}},setup(Q){const r=Q,V=Z(),f=N({catatan:null});function P(){f.post(route("penagihan.confirm",r.data.id_penagihan),{onSuccess:o=>{V.notify({type:"positive",message:o.props.flash.success,position:"top"})}})}function v(){f.post(route("penagihan.reject",r.data.id_penagihan),{onSuccess:o=>{V.notify({type:"positive",message:o.props.flash.success,position:"top"})}})}function h(){V.dialog({title:"Action Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"positive",cancel:!0,persistent:!0}).onOk(o=>{f.catatan=o,P()})}function U(){V.dialog({component:pa,componentProps:{id_penagihan:r.data.id_penagihan,jumlah_diterima:r.data.jumlah_diterima}}).onOk(o=>{V.notify({type:o.type,message:o.message,position:"top"})})}function d(){V.dialog({title:"Action Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"negative",cancel:!0,persistent:!0}).onOk(o=>{f.catatan=o,v()})}return(o,u)=>(m(),x(de,{position:"bottom-right",offset:[18,18]},{default:t(()=>[a(Te,{color:"primary",icon:"keyboard_arrow_left",direction:"left"},{label:t(({opened:p})=>[s("div",{class:ye({"example-fab-animate--hover":p!==!0})},_(p!==!0?"Verifikasi Penerimaan":"Close"),3)]),default:t(()=>[a(W,{color:"green-7",label:"Sudah Diterima",icon:"done_all",onClick:h}),a(W,{color:"secondary",label:"Diterima Bertahap",icon:"check",onClick:U}),a(W,{color:"red",label:"Tolak",icon:"clear",onClick:d})]),_:1})]),_:1}))}}),ma=I({__name:"PenagihanSubmissionForm",props:{data:{}},setup(Q){const r=Q,V=Z(),f=N({catatan:""});function P(){f.post(route("penagihan.submit",r.data.id_penagihan),{onSuccess:h=>{V.notify({type:"positive",message:h.props.flash.success,position:"top"})}})}function v(){V.dialog({title:"Submission Confirmation",message:"Are you sure want to submit this data?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"primary",cancel:!0,persistent:!0}).onOk(h=>{f.catatan=h,P()})}return(h,U)=>(m(),x(de,{position:"bottom-right",offset:[18,18]},{default:t(()=>[a(b,{rounded:"",color:"primary",label:"Submit","icon-right":"check",onClick:v},{default:t(()=>[a(ee,null,{default:t(()=>[k("Click to submit")]),_:1})]),_:1})]),_:1}))}}),ca={class:"q-px-md q-pt-md"},_a={class:"row q-col-gutter-md"},ha={class:"col-12 col-md-6"},fa={class:"row"},ba=s("div",{class:"col-4 text-caption"}," Keperluan ",-1),va={class:"col-8 text-subtitle2"},ka=s("div",{class:"col-4 text-caption"}," Kas Masuk ",-1),ya={class:"col-8 text-subtitle2"},Va=s("div",{class:"col-4 text-caption"}," Tanggal Pengajuan ",-1),Ca={class:"col-8 text-subtitle2"},xa={class:"col-12 col-md-6"},wa={key:0,class:"text-subtitle2 absolute-top text-right q-pa-sm"},Pa=s("div",{class:"text-h6"},"Info Penagihan",-1),$a={class:"row"},Qa=s("div",{class:"col-4 text-caption"}," Nomor Rekening Tujuan ",-1),Sa={key:0,class:"col-8 text-subtitle2"},Da={key:1,class:"col-8"},Ua={class:"text-primary"},Ta=s("div",{class:"col-4 text-caption"}," Nomor SP2D ",-1),qa={key:2,class:"col-8 text-subtitle2"},Ra={key:3,class:"col-8"},ja=s("div",{class:"col-4 text-caption"}," Tanggal SP2D ",-1),Oa={key:4,class:"col-8 text-subtitle2"},Ha={key:5,class:"col-8 text-subtitle2"},Aa=s("div",{class:"col-4 text-caption"}," Tanggal Terbit ",-1),Fa={key:6,class:"col-8 text-subtitle2"},Ea={key:7,class:"col-8 text-subtitle2"},Ia=s("div",{class:"col-4 text-caption"}," Tanggal Cair ",-1),Na={key:8,class:"col-8 text-subtitle2"},Ba={key:9,class:"col-8 text-subtitle2"},Ka={class:"q-px-md q-pt-md"},lt=I({__name:"DetailPenagihanPage",props:{penagihan:{},detailPenagihan:{},dokumenPenunjang:{},formOptions:{},timeline:{}},setup(Q){const r=Q,V=[{label:"Keuangan",url:"#"},{label:"Penagihan/Invoice",url:route("penagihan")},{label:r.penagihan.nama_proyek,url:"#"}],f=A("uraian"),P=Z(),v=A(!1),h=A(r.formOptions.rekening);function U(u,p){p(()=>{h.value=oe(u,r.formOptions.rekening,["nama_bank","nomor_rekening","nama_rekening"])})}const d=N({id_rekening:r.penagihan.id_rekening_pg,nomor_sp2d:r.penagihan.nomor_sp2d,tanggal_sp2d:r.penagihan.tanggal_sp2d,tanggal_terbit:r.penagihan.tanggal_terbit,tanggal_cair:r.penagihan.tanggal_cair});function o(){d.put(route("penagihan.fill",r.penagihan.id_penagihan),{onSuccess:u=>{P.notify({type:"positive",message:u.props.flash.success,position:"top"}),v.value=!1}})}return(u,p)=>{const n=Ve("in-link");return m(),S(X,null,[a(e(Ce),{title:"Penagihan"}),a(_e,null,{breadcrumbs:t(()=>[a(me,{align:"left"},{default:t(()=>[(m(),S(X,null,re(V,l=>Pe(a(he,{label:l.label},null,8,["label"]),[[n,l.url]])),64))]),_:1})]),default:t(()=>[a(qe,{title:"Penagihan","timeline-title":"Timeline Penagihan",data:{proyek:u.penagihan,status:u.penagihan.status_penagihan,timeline:u.timeline}},null,8,["data"]),s("div",ca,[s("div",_a,[s("div",ha,[a(K,{flat:"",bordered:""},{default:t(()=>[a(T,null,{default:t(()=>[s("div",fa,[ba,s("div",va," : "+_(u.penagihan.keperluan),1),ka,s("div",ya," : "+_(u.penagihan.kas_masuk),1),Va,s("div",Ca," : "+_(e(z)(u.penagihan.tanggal_pengajuan)||"-"),1)])]),_:1})]),_:1})]),s("div",xa,[a(K,{flat:"",bordered:""},{default:t(()=>[a(T,null,{default:t(()=>[e(B)()||e(R)("create & modify penagihan")&&e(O)(u.penagihan)?(m(),S("div",wa,[a(b,{flat:"",dense:"",label:v.value?"Save":"Edit",icon:v.value?"done":"edit_note",color:v.value?"green":"secondary",disable:!e(R)("create & modify penagihan")&&!e(O)(u.penagihan),onClick:p[0]||(p[0]=l=>v.value?o():v.value=!0)},{default:t(()=>[a(ee,{textContent:_(v.value?"Save":"Edit")},null,8,["textContent"])]),_:1},8,["label","icon","color","disable"])])):j("",!0),Pa]),_:1}),a(F),a(T,null,{default:t(()=>[s("div",$a,[Qa,v.value?(m(),S("div",Da,[a(ae,{flat:"",dense:"","use-input":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Rekening Pembayaran",modelValue:e(d).id_rekening,"onUpdate:modelValue":p[1]||(p[1]=l=>e(d).id_rekening=l),"option-value":"id_rekening","option-label":l=>`${l.nama_bank} | ${l.nomor_rekening} - ${l.nama_rekening}`,options:h.value,error:!!e(d).errors.id_rekening,"error-message":e(d).errors.id_rekening,onFilter:U},{option:t(l=>[a(M,xe(we(l.itemProps)),{default:t(()=>[a(L,null,{default:t(()=>[s("strong",Ua,_(l.opt.nama_bank),1),k(" "+_(l.opt.nomor_rekening)+" - "+_(l.opt.nama_rekening),1)]),_:2},1024)]),_:2},1040)]),"no-option":t(()=>[a(M,null,{default:t(()=>[a(L,{class:"text-grey"},{default:t(()=>[k(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"])])):(m(),S("div",Sa," : "+_(u.penagihan.nama_bank_pg)+" | "+_(u.penagihan.nomor_rekening_pg)+" - "+_(u.penagihan.nama_rekening_pg),1)),Ta,v.value?(m(),S("div",Ra,[a(D,{flat:"",dense:"","hide-bottom-space":"",modelValue:e(d).nomor_sp2d,"onUpdate:modelValue":p[2]||(p[2]=l=>e(d).nomor_sp2d=l),error:!!e(d).errors.nomor_sp2d,"error-message":e(d).errors.nomor_sp2d},null,8,["modelValue","error","error-message"])])):(m(),S("div",qa," : "+_(e(d).nomor_sp2d||"-"),1)),ja,v.value?(m(),S("div",Ha,[a(D,{flat:"",dense:"","hide-bottom-space":"",type:"date",modelValue:e(d).tanggal_sp2d,"onUpdate:modelValue":p[3]||(p[3]=l=>e(d).tanggal_sp2d=l),error:!!e(d).errors.tanggal_sp2d,"error-message":e(d).errors.tanggal_sp2d},null,8,["modelValue","error","error-message"])])):(m(),S("div",Oa," : "+_(e(z)(e(d).tanggal_sp2d)||"-"),1)),Aa,v.value?(m(),S("div",Ea,[a(D,{flat:"",dense:"","hide-bottom-space":"",type:"date",modelValue:e(d).tanggal_terbit,"onUpdate:modelValue":p[4]||(p[4]=l=>e(d).tanggal_terbit=l),error:!!e(d).errors.tanggal_terbit,"error-message":e(d).errors.tanggal_terbit},null,8,["modelValue","error","error-message"])])):(m(),S("div",Fa," : "+_(e(z)(e(d).tanggal_terbit)||"-"),1)),Ia,v.value?(m(),S("div",Ba,[a(D,{flat:"",dense:"","hide-bottom-space":"",type:"date",modelValue:e(d).tanggal_cair,"onUpdate:modelValue":p[5]||(p[5]=l=>e(d).tanggal_cair=l),error:!!e(d).errors.tanggal_cair,"error-message":e(d).errors.tanggal_cair},null,8,["modelValue","error","error-message"])])):(m(),S("div",Na," : "+_(e(z)(e(d).tanggal_cair)||"-"),1))])]),_:1})]),_:1})])])]),s("div",Ka,[a(K,{flat:"",bordered:""},{default:t(()=>[a(Se,{modelValue:f.value,"onUpdate:modelValue":p[6]||(p[6]=l=>f.value=l),class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t(()=>[a(ie,{"no-caps":"",name:"uraian",label:"Uraian"}),a(ie,{"no-caps":"",name:"dokumen",label:"Dokumen Penunjang"})]),_:1},8,["modelValue"]),a(F),a(De,{modelValue:f.value,"onUpdate:modelValue":p[7]||(p[7]=l=>f.value=l)},{default:t(()=>[a(se,{class:"q-pa-none",name:"uraian"},{default:t(()=>[a(e(Oe),{rows:u.detailPenagihan,data:{penagihan:u.penagihan},"form-options":u.formOptions},null,8,["rows","data","form-options"])]),_:1}),a(se,{class:"q-pa-none",name:"dokumen"},{default:t(()=>[a(e(Ue),{rows:u.dokumenPenunjang,data:{model_id:u.penagihan.id_penagihan,permissions:"create & modify penagihan",status_aktivitas:u.penagihan.status_aktivitas}},null,8,["rows","data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),e(R)("create & modify penagihan")&&e(O)(u.penagihan)&&u.detailPenagihan.length?(m(),x(e(ma),{key:0,data:{id_penagihan:u.penagihan.id_penagihan}},null,8,["data"])):j("",!0),e(R)("receipt penagihan")&&e(ce)(u.penagihan)?(m(),x(e(ga),{key:1,data:{id_penagihan:u.penagihan.id_penagihan,jumlah_diterima:u.penagihan.jumlah_diterima}},null,8,["data"])):j("",!0)]),_:1})],64)}}});export{lt as default};
