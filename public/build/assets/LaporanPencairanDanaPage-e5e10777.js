import{l as R,b as E,_ as S,c as V}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-84cf796f.js";import{d as F,l as z,j as g,W as A,o as p,e as v,a as e,w as n,g as M,c as D,u as l,O as c,h as u,A as O,b as o,F as Q,k as N,t as d,i as m,z as I,m as J,Z as K,n as W}from"./app-456b7b81.js";import{Q as h}from"./QTooltip-5a592d07.js";import{a as x,b as s,c as Z,d as G}from"./QTable-777e4ca6.js";import{Q as H,_ as U}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-10c56c26.js";import{c as X,e as Y,t as aa,a as ea}from"./LaporanPengajuanDanaSearchDialog.vue_vue_type_script_setup_true_lang-1b78c362.js";import{u as na}from"./use-quasar-53e0b1d3.js";import{t as P,a as $}from"./money-915f7772.js";import"./QImg-62f985a3.js";import"./use-dialog-plugin-component-b08011d3.js";import"./QForm-1fc4bb1a.js";import"./options-4b88285e.js";const la={class:"q-pa-md"},ra={class:"q-gutter-sm"},ta=F({__name:"LaporanPencairanDanaTable",props:{rows:{},formOptions:{}},setup(T){const f=T,b=z(()=>f.rows.map(r=>{const t=r.status_pencairan==="400"?"Closed":"Open";return{...r,status:t}})),w=na();function j(r){w.dialog({component:U,componentProps:{proyek:r}})}function _(){w.dialog({component:ea,componentProps:{options:f.formOptions}})}const L=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"nilai_pengajuan",label:"Nilai Pengajuan Dana",field:"nilai_pengajuan",align:"right",sortable:!0},{name:"jumlah_sudah_dibayar",label:"Sudah Dibayarkan",field:"jumlah_sudah_dibayar",align:"right",sortable:!0},{name:"jumlah_belum_dibayar",label:"Belum Dibayarkan",field:"jumlah_belum_dibayar",align:"right",sortable:!0},{name:"status",label:"Status",field:"status_pencairan",align:"left",sortable:!0}],k=g(!1);function q(){k.value=!k.value}const y=g(),C=g(),B=g();return A(()=>{var r,t,a;C.value={columns:(r=y.value)==null?void 0:r.columns,body:{rows:(t=y.value)==null?void 0:t.computedRows,props:["index","nama_proyek","tahun_anggaran","keperluan","nilai_pengajuan","jumlah_sudah_dibayar","jumlah_belum_dibayar","status"]}},B.value=X({rows:(a=y.value)==null?void 0:a.computedRows,props:["nama_proyek","tahun_anggaran","keperluan","nilai_pengajuan","jumlah_sudah_dibayar","jumlah_belum_dibayar","status"]})}),(r,t)=>(p(),v("div",la,[e(l(Z),{ref_key:"table",ref:y,flat:"",bordered:"","row-key":"id_rab",title:"Laporan Pencairan Dana",rows:b.value,columns:L,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:k.value},{"top-right":n(()=>[M("div",ra,[Object.keys(r.$page.props.query).length?(p(),D(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:t[0]||(t[0]=a=>l(c).visit(r.route("laporan.pencairan_dana")))})):O("",!0),e(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:_}),e(u,{flat:"",dense:"",label:"xls",color:"green",onClick:t[1]||(t[1]=a=>l(Y)().exportDataFromJSON({data:B.value,name:"pencairan-dana",type:"xls"}))},{default:n(()=>[e(h,null,{default:n(()=>[o("Export to xls")]),_:1})]),_:1}),e(u,{flat:"",dense:"",label:"pdf",color:"red-8",onClick:t[2]||(t[2]=a=>l(aa)({filename:"pencairan_dana",header:"Pencairan Dana",columns:C.value.columns,body:C.value.body}))},{default:n(()=>[e(h,null,{default:n(()=>[o("Export to pdf")]),_:1})]),_:1}),e(u,{flat:"",dense:"",icon:k.value?"fullscreen_exit":"fullscreen",onClick:q,class:"q-ml-md"},null,8,["icon"])])]),header:n(a=>[e(x,{props:a},{default:n(()=>[(p(!0),v(Q,null,N(a.cols,i=>(p(),D(G,{key:i.name,props:a,style:{"font-weight":"bold"}},{default:n(()=>[o(d(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(a=>[e(x,{props:a},{default:n(()=>[e(s,{key:"index",props:a},{default:n(()=>[o(d(++a.rowIndex),1)]),_:2},1032,["props"]),e(s,{key:"nama_proyek",props:a},{default:n(()=>[e(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:a.row.nama_proyek,onClick:i=>j(a.row)},{default:n(()=>[e(h,{anchor:"bottom middle",self:"top middle"},{default:n(()=>[o(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(s,{key:"tahun_anggaran",props:a,onClick:m(i=>l(c).visit(r.route("detail_pencairan_dana",a.row.id_pencairan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[o(d(a.row.tahun_anggaran),1)]),_:2},1032,["props","onClick"]),e(s,{key:"keperluan",props:a,onClick:m(i=>l(c).visit(r.route("detail_pencairan_dana",a.row.id_pencairan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[o(d(a.row.keperluan),1)]),_:2},1032,["props","onClick"]),e(s,{key:"nilai_pengajuan",props:a,onClick:m(i=>l(c).visit(r.route("detail_pencairan_dana",a.row.id_pencairan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[o(d(l(P)(l($)(a.row.nilai_pengajuan))),1)]),_:2},1032,["props","onClick"]),e(s,{key:"jumlah_sudah_dibayar",props:a,onClick:m(i=>l(c).visit(r.route("detail_pencairan_dana",a.row.id_pencairan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[o(d(l(P)(l($)(a.row.jumlah_sudah_dibayar))),1)]),_:2},1032,["props","onClick"]),e(s,{key:"jumlah_belum_dibayar",props:a,onClick:m(i=>l(c).visit(r.route("detail_pencairan_dana",a.row.id_pencairan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[o(d(l(P)(l($)(a.row.jumlah_belum_dibayar))),1)]),_:2},1032,["props","onClick"]),e(s,{key:"status",props:a},{default:n(()=>[l(R)(a.row.status_aktivitas)?(p(),D(u,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:n(()=>[e(h,null,{default:n(()=>[o("Ditolak")]),_:1})]),_:1})):O("",!0),e(l(I),{href:r.route("detail_pencairan_dana",a.row.id_pencairan_dana)},{default:n(()=>[e(H,{color:a.row.status_pencairan==400?"red":"primary",label:a.row.status_pencairan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),ya=F({__name:"LaporanPencairanDanaPage",props:{pencairanDana:{},formOptions:{}},setup(T){const f=[{label:"Reports",url:"#"},{label:"Pencairan Dana",url:"#"}];return(b,w)=>{const j=J("in-link");return p(),v(Q,null,[e(l(K),{title:"Laporan Pengajuan Dana"}),e(S,null,{breadcrumbs:n(()=>[e(E,{align:"left"},{default:n(()=>[(p(),v(Q,null,N(f,_=>W(e(V,{key:_.label,label:_.label},null,8,["label"]),[[j,_.url]])),64))]),_:1})]),default:n(()=>[e(l(ta),{rows:b.pencairanDana,"form-options":b.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{ya as default};
