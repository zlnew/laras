import{d as Z,l as oe,i as te,m as re,f as le,g as se,Q as D,a as P,b as ie,_ as ue,c as de}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-84cf796f.js";import{d as S,j as E,o as m,e as R,a as e,w as a,u as n,c as f,h as i,O as U,A as q,F as I,k as W,b as c,t as k,i as T,z as pe,s as $,K as ce,T as K,p as N,q as V,g as b,N as F,P as H,f as me,an as _e,v as B,x as A,Q as X,D as ge,m as fe,Z as ke,n as ye}from"./app-456b7b81.js";import{a as G,b as x,c as be,d as je,Q as O}from"./QTable-777e4ca6.js";import{Q as z}from"./QTooltip-5a592d07.js";import{Q as ee,_ as he}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-10c56c26.js";import{u as ve}from"./use-quasar-53e0b1d3.js";import{u as Q,Q as J}from"./use-dialog-plugin-component-b08011d3.js";import{Q as L}from"./QForm-1fc4bb1a.js";import{m as Y}from"./options-4b88285e.js";import"./QImg-62f985a3.js";import"./money-915f7772.js";const Pe={class:"q-pa-md"},we={key:1,class:"text-h6"},Ce=S({__name:"PengajuanDanaTable",props:{rows:{},formOptions:{}},setup(j){const s=j,u=ve();function h(r){u.dialog({component:he,componentProps:{proyek:r}})}function y(){u.dialog({component:Qe,componentProps:{options:s.formOptions}})}function _(){u.dialog({component:Se,componentProps:{options:s.formOptions}}).onOk(r=>{u.notify({type:r.type,message:r.message,position:"top"})})}function g(r){u.dialog({component:Fe,componentProps:{pengajuanDana:r,options:s.formOptions}}).onOk(l=>{u.notify({type:l.type,message:l.message,position:"top"})})}function w(r){u.dialog({component:Ke,componentProps:{id_pengajuan_dana:r}}).onOk(l=>{u.notify({type:l.type,message:l.message,position:"top"})})}const v=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"jenis_transaksi",label:"Jenis Transaksi",field:"jenis_transaksi",align:"left",sortable:!0},{name:"status_pengajuan",label:"Status",field:"status_pengajuan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],t=E(!1);function C(){t.value=!t.value}return(r,l)=>(m(),R("div",Pe,[e(be,{flat:"",bordered:"","row-key":"id_rap",rows:r.rows,columns:v,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:t.value},{"top-left":a(()=>[n(Z)("create & modify pengajuan dana")?(m(),f(i,{key:0,"no-caps":"",label:"Tambah Pengajuan Transaksi",icon:"add",color:"primary",onClick:_})):(m(),R("div",we,"List Pengajuan Dana"))]),"top-right":a(()=>[Object.keys(r.$page.props.query).length?(m(),f(i,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:l[0]||(l[0]=o=>n(U).visit(r.route("pengajuan_dana")))})):q("",!0),e(i,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:y}),e(i,{flat:"",dense:"",icon:t.value?"fullscreen_exit":"fullscreen",onClick:C,class:"q-ml-md"},null,8,["icon"])]),header:a(o=>[e(G,{props:o},{default:a(()=>[(m(!0),R(I,null,W(o.cols,d=>(m(),f(je,{key:d.name,props:o,style:{"font-weight":"bold"}},{default:a(()=>[c(k(d.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(o=>[e(G,{props:o},{default:a(()=>[e(x,{key:"index",props:o},{default:a(()=>[c(k(++o.rowIndex),1)]),_:2},1032,["props"]),e(x,{key:"nama_proyek",props:o},{default:a(()=>[e(i,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:o.row.nama_proyek,onClick:d=>h(o.row)},{default:a(()=>[e(z,{anchor:"bottom middle",self:"top middle"},{default:a(()=>[c(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(x,{key:"tahun_anggaran",props:o,onClick:T(d=>n(U).visit(r.route("detail_pengajuan_dana",o.row.id_pengajuan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[c(k(o.row.tahun_anggaran),1)]),_:2},1032,["props","onClick"]),e(x,{key:"keperluan",props:o,onClick:T(d=>n(U).visit(r.route("detail_pengajuan_dana",o.row.id_pengajuan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[c(k(o.row.keperluan),1)]),_:2},1032,["props","onClick"]),e(x,{key:"jenis_transaksi",props:o,onClick:T(d=>n(U).visit(r.route("detail_pengajuan_dana",o.row.id_pengajuan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[c(k(o.row.jenis_transaksi),1)]),_:2},1032,["props","onClick"]),e(x,{key:"status_pengajuan",props:o},{default:a(()=>[n(oe)(o.row.status_aktivitas)?(m(),f(i,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:a(()=>[e(z,null,{default:a(()=>[c("Ditolak")]),_:1})]),_:1})):q("",!0),e(n(pe),{href:r.route("detail_pengajuan_dana",o.row.id_pengajuan_dana)},{default:a(()=>[e(ee,{color:o.row.status_pengajuan==400?"red":"primary",label:o.row.status_pengajuan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"]),e(x,{key:"actions",props:o},{default:a(()=>[n(te)()||n(Z)("create & modify pengajuan dana")&&n(re)(o.row.status_pengajuan)?(m(),f(i,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:a(()=>[e(le,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(se,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[e(D,{clickable:""},{default:a(()=>[e(P,{onClick:d=>g(o.row)},{default:a(()=>[c(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e($),e(D,{clickable:""},{default:a(()=>[e(P,{class:"text-red",onClick:d=>w(o.row.id_pengajuan_dana)},{default:a(()=>[c(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(m(),f(i,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:a(()=>[e(z,null,{default:a(()=>[c("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),De=b("div",{class:"text-h6"},"Pencarian Pengajuan Transaksi",-1),$e={class:"q-gutter-md"},Ve={class:"text-primary"},Qe=S({__name:"PengajuanDanaSearchDialog",props:{options:{}},emits:[...Q.emits],setup(j){const s=j,{dialogRef:u,onDialogOK:h,onDialogCancel:y,onDialogHide:_}=Q(),g=E(s.options.currentProyek),w=["Setoran Modal","Penarikan","Utang","Piutang","Pembayaran"];function v(o,d){d(()=>{g.value=Y(o,s.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const C=ce().props.query,r=K({id_proyek:C.id_proyek,jenis_transaksi:C.jenis_transaksi,status_pengajuan:C.status_pengajuan,ditolak:!1});function l(){r.get(route("pengajuan_dana"),{onSuccess:()=>{h()}})}return(o,d)=>(m(),f(N,{ref_key:"dialogRef",ref:u,onHide:n(_)},{default:a(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(V,{class:"row items-center q-pb-none"},{default:a(()=>[De,e(J),e(i,{flat:"",round:"",dense:"",icon:"close",onClick:n(y)},null,8,["onClick"])]),_:1}),e($),e(L,{onSubmit:T(l,["prevent"])},{default:a(()=>[e(V,{class:"scroll"},{default:a(()=>[b("div",$e,[e(O,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:n(r).id_proyek,"onUpdate:modelValue":d[0]||(d[0]=p=>n(r).id_proyek=p),"option-value":"id_proyek","option-label":p=>`${p.nama_proyek} | ${p.tahun_anggaran}`,options:g.value,error:!!n(r).errors.id_proyek,"error-message":n(r).errors.id_proyek,onFilter:v},{option:a(({itemProps:p,opt:M,selected:ae,toggleOption:ne})=>[e(D,F(H(p)),{default:a(()=>[e(P,{side:""},{default:a(()=>[e(me,{size:"sm","model-value":ae,"onUpdate:modelValue":Ne=>ne(M)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(P,null,{default:a(()=>[b("strong",Ve,k(M.nama_proyek),1),c(" "+k(M.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(D,null,{default:a(()=>[e(P,{class:"text-grey"},{default:a(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(O,{outlined:"","hide-bottom-space":"","input-debounce":"500",label:"Jenis Transaksi",modelValue:n(r).jenis_transaksi,"onUpdate:modelValue":d[1]||(d[1]=p=>n(r).jenis_transaksi=p),options:w,error:!!n(r).errors.jenis_transaksi,"error-message":n(r).errors.jenis_transaksi},null,8,["modelValue","error","error-message"]),e(O,{outlined:"",clearable:"","fill-input":"",label:"Status Pengajuan Dana",modelValue:n(r).status_pengajuan,"onUpdate:modelValue":d[2]||(d[2]=p=>n(r).status_pengajuan=p),options:[100,400]},{"selected-item":a(p=>[e(ee,{color:p.opt==400?"red":"primary",label:p.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:a(p=>[e(D,F(H(p.itemProps)),{default:a(()=>[e(P,null,{default:a(()=>[c(k(p.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),e(_e,{"checked-icon":"check","unchecked-icon":"clear",label:"Hanya tampilkan Pengajuan Transaksi yang ditolak",modelValue:n(r).ditolak,"onUpdate:modelValue":d[3]||(d[3]=p=>n(r).ditolak=p)},null,8,["modelValue"])])]),_:1}),e($),e(B,{align:"right"},{default:a(()=>[e(i,{flat:"",type:"submit",label:"Search",color:"primary",loading:n(r).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),xe=b("div",{class:"text-h6"},"Tambah Pengajuan Transaksi",-1),Oe={class:"q-gutter-md"},Te={class:"text-primary"},Se=S({__name:"PengajuanDanaCreateDialog",props:{options:{}},emits:[...Q.emits],setup(j){const s=j,{dialogRef:u,onDialogOK:h,onDialogCancel:y,onDialogHide:_}=Q(),g=E(s.options.proyek),w=["Setoran Modal","Penarikan","Utang","Piutang","Pembayaran"];function v(r,l){l(()=>{g.value=Y(r,s.options.proyek,["nama_proyek","tahun_anggaran"])})}const t=K({id_proyek:null,keperluan:null,jenis_transaksi:null});function C(){t.post(route("pengajuan_dana.store"),{onSuccess:r=>{h({type:"positive",message:r.props.flash.success})}})}return(r,l)=>(m(),f(N,{ref_key:"dialogRef",ref:u,"no-backdrop-dismiss":!0,onHide:n(_)},{default:a(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(V,{class:"row items-center q-pb-none"},{default:a(()=>[xe,e(J),e(i,{flat:"",round:"",dense:"",icon:"close",onClick:n(y)},null,8,["onClick"])]),_:1}),e($),e(L,{onSubmit:T(C,["prevent"])},{default:a(()=>[e(V,{class:"scroll"},{default:a(()=>[b("div",Oe,[e(O,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:n(t).id_proyek,"onUpdate:modelValue":l[0]||(l[0]=o=>n(t).id_proyek=o),"option-value":"id_proyek","option-label":o=>`${o.nama_proyek} | ${o.tahun_anggaran}`,options:g.value,error:!!n(t).errors.id_proyek,"error-message":n(t).errors.id_proyek,onFilter:v},{option:a(o=>[e(D,F(H(o.itemProps)),{default:a(()=>[e(P,null,{default:a(()=>[b("strong",Te,k(o.opt.nama_proyek),1),c(" "+k(o.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(D,null,{default:a(()=>[e(P,{class:"text-grey"},{default:a(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(X,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:n(t).keperluan,"onUpdate:modelValue":l[1]||(l[1]=o=>n(t).keperluan=o),error:!!n(t).errors.keperluan,"error-message":n(t).errors.keperluan},null,8,["modelValue","error","error-message"]),e(O,{outlined:"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Jenis Transaksi",modelValue:n(t).jenis_transaksi,"onUpdate:modelValue":l[2]||(l[2]=o=>n(t).jenis_transaksi=o),options:w,error:!!n(t).errors.jenis_transaksi,"error-message":n(t).errors.jenis_transaksi},null,8,["modelValue","error","error-message"])])]),_:1}),e($),e(B,{align:"right"},{default:a(()=>[n(t).hasErrors?(m(),f(i,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[3]||(l[3]=o=>n(t).clearErrors())})):q("",!0),e(i,{flat:"",label:"Reset",color:"secondary",onClick:l[4]||(l[4]=o=>n(t).reset())}),e(i,{flat:"",type:"submit",label:"Submit",color:"primary",loading:n(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Re=b("div",{class:"text-h6"},"Edit Pengajuan Transaksi",-1),Ue={class:"q-gutter-md"},qe={class:"text-primary"},Fe=S({__name:"PengajuanDanaEditDialog",props:{pengajuanDana:{},options:{}},emits:[...Q.emits],setup(j){const s=j,{dialogRef:u,onDialogOK:h,onDialogCancel:y,onDialogHide:_}=Q(),g=E(s.options.proyek),w=["Setoran Modal","Penarikan","Utang","Piutang","Pembayaran"];function v(r,l){l(()=>{g.value=Y(r,s.options.proyek,["nama_proyek","tahun_anggaran"])})}const t=K({id_proyek:s.pengajuanDana.id_proyek,keperluan:s.pengajuanDana.keperluan,jenis_transaksi:s.pengajuanDana.jenis_transaksi});function C(){t.patch(route("pengajuan_dana.update",s.pengajuanDana.id_pengajuan_dana),{onSuccess:r=>{h({type:"positive",message:r.props.flash.success})}})}return(r,l)=>(m(),f(N,{ref_key:"dialogRef",ref:u,"no-backdrop-dismiss":!0,onHide:n(_)},{default:a(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(V,{class:"row items-center q-pb-none"},{default:a(()=>[Re,e(J),e(i,{flat:"",round:"",dense:"",icon:"close",onClick:n(y)},null,8,["onClick"])]),_:1}),e($),e(L,{onSubmit:T(C,["prevent"])},{default:a(()=>[e(V,{class:"scroll"},{default:a(()=>[b("div",Ue,[e(O,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:n(t).id_proyek,"onUpdate:modelValue":l[0]||(l[0]=o=>n(t).id_proyek=o),"option-value":"id_proyek","option-label":o=>`${o.nama_proyek} | ${o.tahun_anggaran}`,options:g.value,error:!!n(t).errors.id_proyek,"error-message":n(t).errors.id_proyek,onFilter:v},{option:a(o=>[e(D,F(H(o.itemProps)),{default:a(()=>[e(P,null,{default:a(()=>[b("strong",qe,k(o.opt.nama_proyek),1),c(" "+k(o.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(D,null,{default:a(()=>[e(P,{class:"text-grey"},{default:a(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(X,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:n(t).keperluan,"onUpdate:modelValue":l[1]||(l[1]=o=>n(t).keperluan=o),error:!!n(t).errors.keperluan,"error-message":n(t).errors.keperluan},null,8,["modelValue","error","error-message"]),e(O,{outlined:"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Jenis Transaksi",modelValue:n(t).jenis_transaksi,"onUpdate:modelValue":l[2]||(l[2]=o=>n(t).jenis_transaksi=o),options:w,error:!!n(t).errors.jenis_transaksi,"error-message":n(t).errors.jenis_transaksi},null,8,["modelValue","error","error-message"])])]),_:1}),e($),e(B,{align:"right"},{default:a(()=>[n(t).hasErrors?(m(),f(i,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[3]||(l[3]=o=>n(t).clearErrors())})):q("",!0),e(i,{flat:"",label:"Reset",color:"secondary",onClick:l[4]||(l[4]=o=>n(t).reset())}),e(i,{flat:"",type:"submit",label:"Update",color:"primary",loading:n(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),He=b("div",{class:"text-h6"},"Delete Confirmation",-1),Ee=b("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),Ke=S({__name:"PengajuanDanaDeleteDialog",props:{id_pengajuan_dana:{}},emits:[...Q.emits],setup(j){const s=j,{dialogRef:u,onDialogOK:h,onDialogCancel:y,onDialogHide:_}=Q(),g=K({id_pengajuan_dana:s.id_pengajuan_dana});function w(){g.delete(route("pengajuan_dana.destroy",s.id_pengajuan_dana),{onSuccess:v=>{h({type:"positive",message:v.props.flash.success})}})}return(v,t)=>(m(),f(N,{ref_key:"dialogRef",ref:u,"no-backdrop-dismiss":!0,onHide:n(_)},{default:a(()=>[e(A,null,{default:a(()=>[e(V,{class:"row items-center q-pb-none"},{default:a(()=>[He]),_:1}),e($),e(V,{class:"row items-center"},{default:a(()=>[e(ge,{icon:"dangerous",color:"red","text-color":"white"}),Ee]),_:1}),e(B,{align:"right"},{default:a(()=>[e(i,{flat:"",label:"Cancel",color:"primary",onClick:n(y)},null,8,["onClick"]),e(i,{flat:"",label:"Yes, delete it",color:"red",onClick:w})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Xe=S({__name:"PengajuanDanaPage",props:{pengajuanDana:{},formOptions:{}},setup(j){const s=[{label:"Keuangan",url:"#"},{label:"Pengajuan Transaksi",url:"#"}];return(u,h)=>{const y=fe("in-link");return m(),R(I,null,[e(n(ke),{title:"Pengajuan Transaksi"}),e(ue,null,{breadcrumbs:a(()=>[e(ie,{align:"left"},{default:a(()=>[(m(),R(I,null,W(s,_=>ye(e(de,{key:_.label,label:_.label},null,8,["label"]),[[y,_.url]])),64))]),_:1})]),default:a(()=>[e(n(Ce),{rows:u.pengajuanDana,"form-options":u.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{Xe as default};
