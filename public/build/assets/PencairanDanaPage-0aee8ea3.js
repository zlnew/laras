import{m as L,Q as V,a as Q,b as E,_ as M,c as G}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-ca464798.js";import{d as S,l as Z,j,o as u,e as P,a as e,w as a,g as D,c as w,u as o,O as J,h as p,A as F,b as s,F as x,k as z,t as c,z as W,K as X,T as Y,p as ee,q as T,s as q,i as ae,G as B,H as N,f as ne,an as oe,v as le,x as te,m as re,Z as se,n as ie}from"./app-820d56a8.js";import{Q as O}from"./QTooltip-60a2bd3d.js";import{a as H,b as y,c as ue,d as de,Q as R}from"./QTable-7858290f.js";import{Q as K,_ as pe}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-32232352.js";import{u as ce}from"./use-quasar-d1cd8476.js";import{u as U,Q as me}from"./use-dialog-plugin-component-0650bf81.js";import{Q as fe}from"./QForm-406a8856.js";import{m as _e}from"./options-964f32b0.js";import"./QImg-adc75621.js";import"./money-3074a8fc.js";const ge={class:"q-pa-md"},ke={class:"q-gutter-sm"},be=S({__name:"PencairanDanaTable",props:{rows:{},formOptions:{}},setup(h){const d=h,m=Z(()=>d.rows.map(r=>{const t=r.status_pencairan==="400"?"Closed":"Open";return{...r,status:t}})),k=ce();function b(r){k.dialog({component:pe,componentProps:{proyek:r}})}function f(){k.dialog({component:Qe,componentProps:{options:d.formOptions}})}const v=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"left",sortable:!0}],_=j(!1);function $(){_.value=!_.value}return(r,t)=>(u(),P("div",ge,[e(o(ue),{ref:"table",flat:"",bordered:"","row-key":"id_rap",title:"List Pencairan Dana",rows:m.value,columns:v,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:_.value},{"top-right":a(()=>[D("div",ke,[Object.keys(r.$page.props.query).length?(u(),w(p,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:t[0]||(t[0]=n=>o(J).visit(r.route("pencairan_dana")))})):F("",!0),e(p,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:f}),e(p,{flat:"",dense:"",icon:_.value?"fullscreen_exit":"fullscreen",onClick:$},{default:a(()=>[e(O,null,{default:a(()=>[s("Fullscreen Mode")]),_:1})]),_:1},8,["icon"])])]),header:a(n=>[e(H,{props:n},{default:a(()=>[(u(!0),P(x,null,z(n.cols,g=>(u(),w(de,{key:g.name,props:n,style:{"font-weight":"bold"}},{default:a(()=>[s(c(g.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(n=>[e(H,{props:n},{default:a(()=>[e(y,{key:"index",props:n},{default:a(()=>[s(c(++n.rowIndex),1)]),_:2},1032,["props"]),e(y,{key:"nama_proyek",props:n},{default:a(()=>[e(p,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:n.row.nama_proyek,onClick:g=>b(n.row)},{default:a(()=>[e(O,{anchor:"bottom middle",self:"top middle"},{default:a(()=>[s(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(y,{key:"tahun_anggaran",props:n},{default:a(()=>[s(c(n.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(y,{key:"keperluan",props:n},{default:a(()=>[s(c(n.row.keperluan),1)]),_:2},1032,["props"]),e(y,{key:"status",props:n},{default:a(()=>[o(L)(n.row.status_aktivitas)?(u(),w(p,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:a(()=>[e(O,null,{default:a(()=>[s("Ditolak")]),_:1})]),_:1})):F("",!0),e(o(W),{href:r.route("detail_pencairan_dana",n.row.id_pencairan_dana)},{default:a(()=>[e(K,{color:n.row.status_pencairan==400?"red":"primary",label:n.row.status_pencairan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),ye=D("div",{class:"text-h6"},"Pencarian Pengajuan Dana",-1),he={class:"q-gutter-md"},ve={class:"text-primary"},Qe=S({__name:"PencairanDanaSearchDialog",props:{options:{}},emits:[...U.emits],setup(h){const d=h,{dialogRef:m,onDialogOK:k,onDialogCancel:b,onDialogHide:f}=U(),v=j(d.options.currentProyek);function _(g,i){i(()=>{v.value=_e(g,d.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const r=X().props.query,t=Y({id_proyek:r.id_proyek,status_pencairan:r.status_pencairan,ditolak:!1});function n(){t.get(route("pencairan_dana"),{onSuccess:()=>k()})}return(g,i)=>(u(),w(ee,{ref_key:"dialogRef",ref:m,onHide:o(f)},{default:a(()=>[e(te,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(T,{class:"row items-center q-pb-none"},{default:a(()=>[ye,e(me),e(p,{flat:"",round:"",dense:"",icon:"close",onClick:o(b)},null,8,["onClick"])]),_:1}),e(q),e(fe,{onSubmit:ae(n,["prevent"])},{default:a(()=>[e(T,{class:"scroll"},{default:a(()=>[D("div",he,[e(R,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:o(t).id_proyek,"onUpdate:modelValue":i[0]||(i[0]=l=>o(t).id_proyek=l),"option-value":"id_proyek","option-label":l=>`${l.nama_proyek} | ${l.tahun_anggaran}`,options:v.value,error:!!o(t).errors.id_proyek,"error-message":o(t).errors.id_proyek,onFilter:_},{option:a(({itemProps:l,opt:C,selected:A,toggleOption:I})=>[e(V,B(N(l)),{default:a(()=>[e(Q,{side:""},{default:a(()=>[e(ne,{size:"sm","model-value":A,"onUpdate:modelValue":we=>I(C)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(Q,null,{default:a(()=>[D("strong",ve,c(C.nama_proyek),1),s(" "+c(C.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(V,null,{default:a(()=>[e(Q,{class:"text-grey"},{default:a(()=>[s(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(R,{outlined:"",clearable:"","fill-input":"",label:"Status Pencairan Dana",modelValue:o(t).status_pencairan,"onUpdate:modelValue":i[1]||(i[1]=l=>o(t).status_pencairan=l),options:[100,400]},{"selected-item":a(l=>[e(K,{color:l.opt==400?"red":"primary",label:l.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:a(l=>[e(V,B(N(l.itemProps)),{default:a(()=>[e(Q,null,{default:a(()=>[s(c(l.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),e(oe,{"checked-icon":"check","unchecked-icon":"clear",label:"Hanya tampilkan Pencairan Dana yang ditolak",modelValue:o(t).ditolak,"onUpdate:modelValue":i[2]||(i[2]=l=>o(t).ditolak=l)},null,8,["modelValue"])])]),_:1}),e(q),e(le,{align:"right"},{default:a(()=>[e(p,{flat:"",type:"submit",label:"Search",color:"primary",loading:o(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Be=S({__name:"PencairanDanaPage",props:{pencairanDana:{},formOptions:{}},setup(h){const d=[{label:"Keuangan",url:"#"},{label:"Pencairan Dana",url:"#"}];return(m,k)=>{const b=re("in-link");return u(),P(x,null,[e(o(se),{title:"Pencairan Dana"}),e(M,null,{breadcrumbs:a(()=>[e(E,{align:"left"},{default:a(()=>[(u(),P(x,null,z(d,f=>ie(e(G,{label:f.label},null,8,["label"]),[[b,f.url]])),64))]),_:1})]),default:a(()=>[e(o(be),{rows:m.pencairanDana,"form-options":m.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{Be as default};
