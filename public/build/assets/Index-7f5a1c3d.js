import{d as F,K as H,b as w,T as I,l as J,e as y,c as B,h as a,u as e,g as t,F as T,o,Z as K,n as v,j as C,a as l,f as c,p as m,q as R,i as O,m as V,s as Z,z as A,t as P}from"./app-75a3a99f.js";import{_ as G,a as Q,C as W}from"./Content-c6f442a5.js";import{C as X,a as Y,_ as aa}from"./Card-7d71d8a7.js";import{T as ea,a as ta,_ as x,b as u,c as sa,d as i}from"./Table-3adccec2.js";import{_ as na}from"./Input.vue_vue_type_script_setup_true_lang-8599c816.js";import{M as b}from"./modal-cb471a77.js";import{T as M}from"./toastify-1f71f880.js";import{_ as ra}from"./Create.m.vue_vue_type_script_setup_true_lang-fc1a2063.js";import{_ as oa}from"./Edit.m.vue_vue_type_script_setup_true_lang-4d99d41f.js";import{_ as la}from"./Delete.m.vue_vue_type_script_setup_true_lang-1e647332.js";import"./Modal.vue_vue_type_style_index_0_scoped_fdb70d85_lang-9b77fc3b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Footer-8b073701.js";import"./Head.vue_vue_type_script_setup_true_lang-0b8949ad.js";import"./Label.vue_vue_type_script_setup_true_lang-21506f02.js";import"./Error.vue_vue_type_script_setup_true_lang-f9f51393.js";import"./Select.vue_vue_type_script_setup_true_lang-f552b2ec.js";const ia={class:"grid grid-cols-2 gap-4"},pa=["onSubmit"],ua={class:"flex justify-between items-center space-x-2"},da={class:"line-clamp-2 hover:line-clamp-none"},_a={class:"flex"},Va=F({__name:"Index",props:{rap:{},proyek:{}},setup(N){const f=N,r=H(),g=r.props.permissions,E=r.props.query,$=w(()=>!!(g.includes("create rap")&&g.includes("update rap")&&g.includes("delete rap"))),k=w(()=>({data:f.rap.data.map(p=>{const h=p.status_rap==400?"Closed":"On Progress";return{...p,status_rap_in_string:h}})})),d=I({nama_proyek:E.nama_proyek});function L(){b.pop(ra,{daftar_proyek:f.proyek})}function D(n){b.pop(oa,{id_rap:n.id_rap,id_proyek:n.id_proyek,nama_proyek:n.nama_proyek,daftar_proyek:f.proyek})}function S(n){b.pop(la,{id_rap:n})}function j(){d.get(route("rap"))}return J(()=>{r.props.flash.success&&M.success(r.props.flash.success),r.props.flash.error&&M.error(r.props.flash.error)}),(n,p)=>{const h=y("fas-icon"),_=y("ease-button"),q=y("EaseButton");return o(),B(T,null,[a(e(K),{title:"RAP"}),a(G,null,{breadcrumb:t(()=>[a(Q,v(C({second:"RAP",current:"Rencana Anggaran Proyek"})),null,16)]),default:t(()=>[a(W,null,{default:t(()=>[a(e(X),null,{default:t(()=>[a(e(Y),{class:"mb-4"},{default:t(()=>[l("div",ia,[l("div",null,[$.value?(o(),c(_,{key:0,onClick:L,slotted:""},{default:t(()=>[a(h,{icon:"fa-solid fa-plus",class:"mr-1"}),m(" Buat RAP ")]),_:1})):R("",!0)]),l("form",{onSubmit:O(j,["prevent"])},[l("div",ua,[a(e(na),V({modelValue:e(d).nama_proyek,"onUpdate:modelValue":p[0]||(p[0]=s=>e(d).nama_proyek=s)},{type:"search",size:"lg",placeholder:"Cari Berdasarkan Nama Proyek",autocomplete:"off"}),null,16,["modelValue"]),a(_,v(C({type:"submit",text:"Cari",loading:e(d).processing,onLoading:()=>({text:!1})})),null,16)])],40,pa)])]),_:1}),a(e(aa),{table:""},{default:t(()=>[a(e(ea),null,{default:t(()=>[a(e(ta),null,{default:t(()=>[a(e(x),null,{default:t(()=>[a(e(u),{value:"Nama Proyek"}),a(e(u),{value:"Tahun Anggaran"}),a(e(u),{value:"Pengguna Jasa"}),a(e(u),{"text-align":"center",value:"Status"}),a(e(u))]),_:1})]),_:1}),a(e(sa),null,{default:t(()=>[k.value.data.length?(o(!0),B(T,{key:0},Z(k.value.data,(s,z)=>(o(),c(e(x),V({key:s.id_proyek},{last:z===k.value.data.length-1}),{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(A),{class:"link",href:n.route("detail_rap",s.id_rap)},{default:t(()=>[l("span",da,P(s.nama_proyek),1)]),_:2},1032,["href"])]),_:2},1024),a(e(i),{whitespace:"nowrap"},{default:t(()=>[m(P(s.tahun_anggaran),1)]),_:2},1024),a(e(i),{whitespace:"nowrap"},{default:t(()=>[m(P(s.pengguna_jasa),1)]),_:2},1024),a(e(i),{whitespace:"nowrap","text-align":"center"},{default:t(()=>[a(e(A),{href:n.route("detail_rap",s.id_rap)},{default:t(()=>[a(q,v(C({text:s.status_rap_in_string,variant:s.status_rap==400?"danger-transparent":"transparent"})),null,16)]),_:2},1032,["href"])]),_:2},1024),$.value?(o(),c(e(i),{key:0,whitespace:"nowrap"},{default:t(()=>[l("div",_a,[a(_,{onClick:U=>D(s),variant:"link",text:"Edit"},null,8,["onClick"]),a(_,{onClick:U=>S(s.id_rap),variant:"danger-link",text:"Delete"},null,8,["onClick"])])]),_:2},1024)):R("",!0)]),_:2},1040))),128)):(o(),c(e(x),{key:1,last:""},{default:t(()=>[a(e(i),{colspan:"5","text-align":"center"},{default:t(()=>[m(" RAP tidak ditemukan ")]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Va as default};
