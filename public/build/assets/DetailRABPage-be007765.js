import{i as F,d as U,e as I,f as ue,g as de,Q as K,a as N,b as me,n as pe,_ as ce,c as fe}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-b69e3ed2.js";import{d as q,l as _e,T as O,j,o as c,e as P,a as e,D as be,w as t,b as m,t as k,u as a,c as x,Q as A,E as ae,g as p,h as g,B as T,z as ge,F as X,k as re,v as $,q as M,s as B,i as G,x as L,y as z,G as he,H as ye,n as ve,Z as ke,p as xe}from"./app-a9c22e82.js";import{a as H,b as d,c as we,d as Ve,Q as le}from"./QTable-0e41b0f2.js";import{Q as Y}from"./datetime-dc60c162.js";import{Q as te}from"./QPopupEdit-4a5cd368.js";import{u as Z}from"./use-quasar-954ed4d5.js";import{a as E,t as S,s as se}from"./money-915f7772.js";import{u as D,Q as J}from"./use-dialog-plugin-component-646efe56.js";import{Q as Ce}from"./QFile-41b2f763.js";import{Q as W}from"./QForm-332245d0.js";import{m as ne}from"./options-4b88285e.js";import{Q as oe,a as Re}from"./QFab-734dfc72.js";import{Q as ie,_ as Ae}from"./ModuleTopSection.vue_vue_type_script_setup_true_lang-430fdd1b.js";import"./QImg-b742b038.js";import"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-29a71a0e.js";const Qe={class:"q-pa-md"},Se={class:"q-gutter-sm"},$e={key:1},Be={key:1},De=q({__name:"RABItemTable",props:{rows:{},data:{},formOptions:{}},setup(V){const n=V,f=_e(()=>{const _=n.rows.reduce((Q,ee)=>Q+E(ee.harga_satuan)*E(ee.volume),0),v=E(r.tax)/100*_,s=E(r.additional_tax)/100*_;return{dpp:_,ppn:v,pph:s}}),r=O({tax:n.data.rab.tax,additional_tax:n.data.rab.additional_tax});function w(){r.patch(route("rab.update_tax",n.data.rab.id_rab))}const b=Z();function u(){b.dialog({component:Ue,componentProps:{id_rab:n.data.rab.id_rab}}).onOk(_=>{b.notify({type:_.type,message:_.message,position:"top"})})}function C(){b.dialog({component:Le,componentProps:{rab:n.data.rab,options:n.formOptions}}).onOk(_=>{b.notify({type:_.type,message:_.message,position:"top"})})}function h(_){b.dialog({component:oa,componentProps:{detailRab:_,options:n.formOptions}}).onOk(v=>{b.notify({type:v.type,message:v.message,position:"top"})})}function o(_){b.dialog({component:sa,componentProps:{id_detail_rab:_}}).onOk(v=>{b.notify({type:v.type,message:v.message,position:"top"})})}const R=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"nama_satuan",label:"Satuan",field:"nama_satuan",align:"left",sortable:!0},{name:"harga_satuan",label:"Harga Satuan",field:"harga_satuan",align:"right",sortable:!0},{name:"volume",label:"Volume",field:"volume",align:"left",sortable:!0},{name:"total_harga",label:"Total Harga",field:"",align:"right",sortable:!0},{name:"keterangan",label:"Ket",field:"keterangan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],y=j(!1);function l(){y.value=!y.value}const i=j("");return(_,v)=>(c(),P("div",Qe,[e(we,{flat:"",bordered:"","row-key":"id_detail_rab",rows:_.rows,columns:R,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:y.value,filter:i.value},be({"top-left":t(()=>[p("div",Se,[a(F)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(c(),x(g,{key:0,"no-caps":"",label:"Tambah Uraian RAB",icon:"add",color:"primary",onClick:C})):T("",!0),a(F)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(c(),x(g,{key:1,"no-caps":"",label:"Import dari CSV/XLS",icon:"upload_file",color:"green-8",onClick:u})):T("",!0)])]),"top-right":t(()=>[e(A,{dense:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=s=>i.value=s),placeholder:"Search"},{append:t(()=>[e(ge,{name:"search"})]),_:1},8,["modelValue"]),e(g,{flat:"",dense:"",icon:y.value?"fullscreen_exit":"fullscreen",onClick:l,class:"q-ml-md"},null,8,["icon"])]),header:t(s=>[e(H,{props:s},{default:t(()=>[(c(!0),P(X,null,re(s.cols,Q=>(c(),x(Ve,{key:Q.name,props:s,style:{"font-weight":"bold"}},{default:t(()=>[m(k(Q.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(s=>[e(H,{props:s},{default:t(()=>[e(d,{key:"index",props:s},{default:t(()=>[m(k(++s.rowIndex),1)]),_:2},1032,["props"]),e(d,{key:"uraian",props:s},{default:t(()=>[m(k(s.row.uraian),1)]),_:2},1032,["props"]),e(d,{key:"nama_satuan",props:s},{default:t(()=>[m(k(s.row.nama_satuan),1)]),_:2},1032,["props"]),e(d,{key:"harga_satuan",props:s},{default:t(()=>[m(k(a(S)(s.row.harga_satuan)),1)]),_:2},1032,["props"]),e(d,{key:"volume",props:s},{default:t(()=>[m(k(s.row.volume),1)]),_:2},1032,["props"]),e(d,{key:"total_harga",props:s},{default:t(()=>[m(k(a(S)(s.row.harga_satuan*s.row.volume)),1)]),_:2},1032,["props"]),e(d,{key:"keterangan",props:s},{default:t(()=>[m(k(s.row.keterangan),1)]),_:2},1032,["props"]),e(d,{key:"actions",props:s},{default:t(()=>[a(F)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(c(),x(g,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:t(()=>[e(ue,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[e(de,{dense:"",style:{"min-width":"100px"}},{default:t(()=>[e(K,{clickable:""},{default:t(()=>[e(N,{onClick:Q=>h(s.row)},{default:t(()=>[m(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e($),e(K,{clickable:""},{default:t(()=>[e(N,{class:"text-red",onClick:Q=>o(s.row.id_detail_rab)},{default:t(()=>[m(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(c(),x(g,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:t(()=>[e(Y,null,{default:t(()=>[m("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:2},[_.rows.length?{name:"bottom-row",fn:t(()=>[e(H,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[m(" PPN ")]),_:1}),e(d,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:t(()=>[m(k(a(r).tax)+" % ",1),a(F)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(c(),x(te,{key:0,modelValue:a(r).tax,"onUpdate:modelValue":v[2]||(v[2]=s=>a(r).tax=s),modelModifiers:{number:!0},title:"PPN",onHide:w},{default:t(s=>[e(A,{flat:"",dense:"",autofocus:"","hide-bottom-space":"",modelValue:a(r).tax,"onUpdate:modelValue":v[1]||(v[1]=Q=>a(r).tax=Q),error:!!a(r).errors.tax,"error-message":a(r).errors.tax,"input-class":"text-right",onKeyup:ae(()=>{w(),s.set()},["enter"])},{append:t(()=>[m("%")]),_:2},1032,["modelValue","error","error-message","onKeyup"])]),_:1},8,["modelValue"])):(c(),P("span",$e,k(_.data.rab.tax)+"%",1))]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(H,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[m(" PPH ")]),_:1}),e(d,{class:"text-right text-weight-bold text-primary",style:{cursor:"pointer"}},{default:t(()=>[m(k(a(r).additional_tax)+" % ",1),a(F)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(c(),x(te,{key:0,modelValue:a(r).additional_tax,"onUpdate:modelValue":v[4]||(v[4]=s=>a(r).additional_tax=s),modelModifiers:{number:!0},title:"PPH",onHide:w},{default:t(s=>[e(A,{flat:"",dense:"",autofocus:"","hide-bottom-space":"",modelValue:a(r).additional_tax,"onUpdate:modelValue":v[3]||(v[3]=Q=>a(r).additional_tax=Q),error:!!a(r).errors.additional_tax,"error-message":a(r).errors.additional_tax,"input-class":"text-right",onKeyup:ae(()=>{w(),s.set()},["enter"])},{append:t(()=>[m("%")]),_:2},1032,["modelValue","error","error-message","onKeyup"])]),_:1},8,["modelValue"])):(c(),P("span",Be,k(_.data.rab.additional_tax)+"%",1))]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(H,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[m(" Total RAB ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[m(k(a(S)(f.value.dpp)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(H,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[m(" Nilai Kontrak ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[m(k(a(S)(f.value.dpp+f.value.ppn)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(H,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[m(" Netto ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[m(k(a(S)(f.value.dpp-f.value.pph)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1})]),key:"0"}:void 0]),1032,["rows","fullscreen","filter"])]))}}),qe=p("div",{class:"text-h6"},"Import Uraian RAB",-1),He={class:"q-gutter-md"},Ue=q({__name:"RABItemImportDialog",props:{id_rab:{}},emits:[...D.emits],setup(V){const n=V,{dialogRef:f,onDialogOK:r,onDialogCancel:w,onDialogHide:b}=D(),u=O({file:null});function C(){u.post(route("detail_rab.import",n.id_rab),{onSuccess:h=>{r({type:"positive",message:h.props.flash.success})}})}return(h,o)=>(c(),x(M,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(b)},{default:t(()=>[e(z,{style:{width:"500px","max-width":"80vw"}},{default:t(()=>[e(B,{class:"row items-center q-pb-none"},{default:t(()=>[qe,e(J),e(g,{flat:"",round:"",dense:"",icon:"close",onClick:a(w)},null,8,["onClick"])]),_:1}),e($),e(W,{onSubmit:G(C,["prevent"])},{default:t(()=>[e(B,{class:"scroll"},{default:t(()=>[p("div",He,[e(g,{color:"green-8",icon:"download",label:"Template",href:"/storage/uploads/template_uraian_rab.xlsx"},{default:t(()=>[e(Y,null,{default:t(()=>[m("Download template CSV/XLS")]),_:1})]),_:1}),e(Ce,{outlined:"",counter:"","hide-bottom-space":"",modelValue:a(u).file,"onUpdate:modelValue":o[0]||(o[0]=R=>a(u).file=R),label:"Pick file",hint:"Format: csv, xlsx",error:!!a(u).errors.file,"error-message":a(u).errors.file},null,8,["modelValue","error","error-message"])])]),_:1}),e($),e(L,{align:"right"},{default:t(()=>[a(u).hasErrors?(c(),x(g,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:o[1]||(o[1]=R=>a(u).clearErrors())})):T("",!0),e(g,{flat:"",label:"Reset",color:"secondary",onClick:o[2]||(o[2]=R=>a(u).reset())}),e(g,{flat:"",type:"submit",label:"Import",color:"primary",loading:a(u).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Te=p("div",{class:"text-h6"},"Tambah Uraian RAB",-1),Oe={class:"q-gutter-md"},Ie={class:"row"},Pe={class:"col-12 col-md-6 q-pr-sm"},Ee={class:"col-12 col-md-6 q-pl-sm"},Fe={class:"row"},Ke={class:"col-12 col-md-6 q-pr-sm"},Ne={class:"col-12 col-md-6 q-pl-sm text-right"},je=p("div",{class:"text-secondary text-caption"},"Total Harga",-1),Me={class:"text-weight-bold text-subtitle1"},Le=q({__name:"RABItemCreateDialog",props:{rab:{},options:{}},emits:[...D.emits],setup(V){const n=V,{dialogRef:f,onDialogOK:r,onDialogCancel:w,onDialogHide:b}=D(),u=j(n.options.satuan);function C(y,l){l(()=>{u.value=ne(y,n.options.satuan,["nama_satuan"])})}async function h(y){if(typeof y=="string"){const l=await se(y);o.harga_satuan=l}}const o=O({uraian:null,harga_satuan:0,volume:0,keterangan:null,id_satuan:null});function R(){o.post(route("detail_rab.store",n.rab.id_rab),{onSuccess:y=>{r({type:"positive",message:y.props.flash.success})}})}return(y,l)=>(c(),x(M,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(b)},{default:t(()=>[e(z,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(B,{class:"row items-center q-pb-none"},{default:t(()=>[Te,e(J),e(g,{flat:"",round:"",dense:"",icon:"close",onClick:a(w)},null,8,["onClick"])]),_:1}),e($),e(W,{onSubmit:G(R,["prevent"])},{default:t(()=>[e(B,{class:"scroll"},{default:t(()=>[p("div",Oe,[e(A,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(o).uraian,"onUpdate:modelValue":l[0]||(l[0]=i=>a(o).uraian=i),error:!!a(o).errors.uraian,"error-message":a(o).errors.uraian},null,8,["modelValue","error","error-message"]),e(le,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Satuan",modelValue:a(o).id_satuan,"onUpdate:modelValue":l[1]||(l[1]=i=>a(o).id_satuan=i),"option-value":"id_satuan","option-label":"nama_satuan",options:u.value,error:!!a(o).errors.id_satuan,"error-message":a(o).errors.id_satuan,onFilter:C},{"no-option":t(()=>[e(K,null,{default:t(()=>[e(N,{class:"text-grey"},{default:t(()=>[m(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),p("div",Ie,[p("div",Pe,[e(A,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:a(o).harga_satuan,"onUpdate:modelValue":[l[2]||(l[2]=i=>a(o).harga_satuan=i),l[3]||(l[3]=i=>h(i))],hint:a(S)(a(o).harga_satuan),"hide-hint":a(o).harga_satuan<1,error:!!a(o).errors.harga_satuan,"error-message":a(o).errors.harga_satuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),p("div",Ee,[e(A,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:a(o).volume,"onUpdate:modelValue":l[4]||(l[4]=i=>a(o).volume=i),error:!!a(o).errors.volume,"error-message":a(o).errors.volume,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),p("div",Fe,[p("div",Ke,[e(A,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keterangan",modelValue:a(o).keterangan,"onUpdate:modelValue":l[5]||(l[5]=i=>a(o).keterangan=i),error:!!a(o).errors.keterangan,"error-message":a(o).errors.keterangan},null,8,["modelValue","error","error-message"])]),p("div",Ne,[je,p("div",Me,k(a(S)(a(o).harga_satuan*a(o).volume)),1)])])])]),_:1}),e($),e(L,{align:"right"},{default:t(()=>[a(o).hasErrors?(c(),x(g,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[6]||(l[6]=i=>a(o).clearErrors())})):T("",!0),e(g,{flat:"",label:"Reset",color:"secondary",onClick:l[7]||(l[7]=i=>a(o).reset())}),e(g,{flat:"",type:"submit",label:"Submit",color:"primary",loading:a(o).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ze=p("div",{class:"text-h6"},"Edit Uraian RAB",-1),Xe={class:"q-gutter-md"},Ge={class:"row"},Ye={class:"col-12 col-md-6 q-pr-sm"},Ze={class:"col-12 col-md-6 q-pl-sm"},Je={class:"row"},We={class:"col-12 col-md-6 q-pr-sm"},ea={class:"col-12 col-md-6 q-pl-sm text-right"},aa=p("div",{class:"text-secondary text-caption"},"Total Harga",-1),ta={class:"text-weight-bold text-subtitle1"},oa=q({__name:"RABItemEditDialog",props:{detailRab:{},options:{}},emits:[...D.emits],setup(V){const n=V,{dialogRef:f,onDialogOK:r,onDialogCancel:w,onDialogHide:b}=D(),u=j(n.options.satuan);function C(y,l){l(()=>{u.value=ne(y,n.options.satuan,["nama_satuan"])})}async function h(y){if(typeof y=="string"){const l=await se(y);o.harga_satuan=l}}const o=O({uraian:n.detailRab.uraian,harga_satuan:E(n.detailRab.harga_satuan),volume:E(n.detailRab.volume),keterangan:n.detailRab.keterangan,id_satuan:n.detailRab.id_satuan});function R(){o.patch(route("detail_rab.update",n.detailRab.id_detail_rab),{onSuccess:y=>{r({type:"positive",message:y.props.flash.success})}})}return(y,l)=>(c(),x(M,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(b)},{default:t(()=>[e(z,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(B,{class:"row items-center q-pb-none"},{default:t(()=>[ze,e(J),e(g,{flat:"",round:"",dense:"",icon:"close",onClick:a(w)},null,8,["onClick"])]),_:1}),e($),e(W,{onSubmit:G(R,["prevent"])},{default:t(()=>[e(B,{class:"scroll"},{default:t(()=>[p("div",Xe,[e(A,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(o).uraian,"onUpdate:modelValue":l[0]||(l[0]=i=>a(o).uraian=i),error:!!a(o).errors.uraian,"error-message":a(o).errors.uraian},null,8,["modelValue","error","error-message"]),e(le,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Satuan",modelValue:a(o).id_satuan,"onUpdate:modelValue":l[1]||(l[1]=i=>a(o).id_satuan=i),"option-value":"id_satuan","option-label":"nama_satuan",options:u.value,error:!!a(o).errors.id_satuan,"error-message":a(o).errors.id_satuan,onFilter:C},{"no-option":t(()=>[e(K,null,{default:t(()=>[e(N,{class:"text-grey"},{default:t(()=>[m(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),p("div",Ge,[p("div",Ye,[e(A,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:a(o).harga_satuan,"onUpdate:modelValue":[l[2]||(l[2]=i=>a(o).harga_satuan=i),l[3]||(l[3]=i=>h(i))],hint:a(S)(a(o).harga_satuan),"hide-hint":a(o).harga_satuan<1,error:!!a(o).errors.harga_satuan,"error-message":a(o).errors.harga_satuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),p("div",Ze,[e(A,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:a(o).volume,"onUpdate:modelValue":l[4]||(l[4]=i=>a(o).volume=i),error:!!a(o).errors.volume,"error-message":a(o).errors.volume,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),p("div",Je,[p("div",We,[e(A,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keterangan",modelValue:a(o).keterangan,"onUpdate:modelValue":l[5]||(l[5]=i=>a(o).keterangan=i),error:!!a(o).errors.keterangan,"error-message":a(o).errors.keterangan},null,8,["modelValue","error","error-message"])]),p("div",ea,[aa,p("div",ta,k(a(S)(a(o).harga_satuan*a(o).volume)),1)])])])]),_:1}),e($),e(L,{align:"right"},{default:t(()=>[a(o).hasErrors?(c(),x(g,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[6]||(l[6]=i=>a(o).clearErrors())})):T("",!0),e(g,{flat:"",label:"Reset",color:"secondary",onClick:l[7]||(l[7]=i=>a(o).reset())}),e(g,{flat:"",type:"submit",label:"Update",color:"primary",loading:a(o).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ra=p("div",{class:"text-h6"},"Delete Confirmation",-1),la=p("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),sa=q({__name:"RABItemDeleteDialog",props:{id_detail_rab:{}},emits:[...D.emits],setup(V){const n=V,{dialogRef:f,onDialogOK:r,onDialogCancel:w,onDialogHide:b}=D(),u=O({id_detail_rab:n.id_detail_rab});function C(){u.delete(route("detail_rab.destroy",n.id_detail_rab),{onSuccess:h=>{r({type:"positive",message:h.props.flash.success})}})}return(h,o)=>(c(),x(M,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(b)},{default:t(()=>[e(z,null,{default:t(()=>[e(B,{class:"row items-center q-pb-none"},{default:t(()=>[ra]),_:1}),e($),e(B,{class:"row items-center"},{default:t(()=>[e(he,{icon:"dangerous",color:"red","text-color":"white"}),la]),_:1}),e(L,{align:"right"},{default:t(()=>[e(g,{flat:"",label:"Cancel",color:"primary",onClick:a(w)},null,8,["onClick"]),e(g,{flat:"",label:"Yes, delete it",color:"red",onClick:C})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),na=q({__name:"RABApprovalForm",props:{data:{}},setup(V){const n=V,f=Z(),r=O({catatan:""});function w(){r.post(route("rab.approve",n.data.id_rab),{onSuccess:h=>{f.notify({type:"positive",message:h.props.flash.success,position:"top"})}})}function b(){r.post(route("rab.reject",n.data.id_rab),{onSuccess:h=>{f.notify({type:"positive",message:h.props.flash.success,position:"top"})}})}function u(){f.dialog({title:"Approval Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"positive",cancel:!0,persistent:!0}).onOk(h=>{r.catatan=h,w()})}function C(){f.dialog({title:"Rejection Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"negative",cancel:!0,persistent:!0}).onOk(h=>{r.catatan=h,b()})}return(h,o)=>(c(),x(ie,{position:"bottom-right",offset:[18,18]},{default:t(()=>[e(Re,{color:"primary",icon:"keyboard_arrow_left",direction:"left"},{label:t(({opened:R})=>[p("div",{class:ye({"example-fab-animate--hover":R!==!0})},k(R!==!0?"Approval":"Close"),3)]),default:t(()=>[e(oe,{color:"green-5",label:"Setujui",icon:"check",onClick:u}),e(oe,{color:"red",label:"Tolak",icon:"clear",onClick:C})]),_:1})]),_:1}))}}),ia=q({__name:"RABSubmissionForm",props:{data:{}},setup(V){const n=V,f=Z(),r=O({catatan:""});function w(){r.post(route("rab.submit",n.data.id_rab),{onSuccess:u=>{f.notify({type:"positive",message:u.props.flash.success,position:"top"})}})}function b(){f.dialog({title:"Submission Confirmation",message:"Are you sure want to submit this data?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"primary",cancel:!0,persistent:!0}).onOk(u=>{r.catatan=u,w()})}return(u,C)=>(c(),x(ie,{position:"bottom-right",offset:[18,18]},{default:t(()=>[e(g,{rounded:"",color:"primary",label:"Submit","icon-right":"check",onClick:b,class:"q-pa-md"},{default:t(()=>[e(Y,null,{default:t(()=>[m("Click to submit")]),_:1})]),_:1})]),_:1}))}}),Va=q({__name:"DetailRABPage",props:{detailRab:{},formOptions:{},rab:{},timeline:{}},setup(V){const n=V,f=[{label:"Main",url:"#"},{label:"RAB",url:route("rab")},{label:n.rab.nama_proyek,url:"#"}];return(r,w)=>{const b=ve("in-link");return c(),P(X,null,[e(a(ke),{title:"RAB"}),e(ce,null,{breadcrumbs:t(()=>[e(me,{align:"left"},{default:t(()=>[(c(),P(X,null,re(f,u=>xe(e(fe,{key:u.label,label:u.label},null,8,["label"]),[[b,u.url]])),64))]),_:1})]),default:t(()=>[e(Ae,{title:"RAB","timeline-title":"Timeline Pengajuan RAB",data:{proyek:r.rab,status:r.rab.status_rab,timeline:r.timeline}},null,8,["data"]),e(a(De),{rows:r.detailRab,data:{rab:r.rab},"form-options":r.formOptions},null,8,["rows","data","form-options"]),a(U)("create & modify rab")&&a(I)(r.rab)&&r.detailRab.length?(c(),x(a(ia),{key:0,data:{id_rab:r.rab.id_rab}},null,8,["data"])):T("",!0),a(U)("approve rab")&&a(pe)(r.rab)?(c(),x(a(na),{key:1,data:{id_rab:r.rab.id_rab}},null,8,["data"])):T("",!0)]),_:1})],64)}}});export{Va as default};
