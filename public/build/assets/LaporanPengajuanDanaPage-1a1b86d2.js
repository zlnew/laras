import{l as L,b as S,_ as q,c as R}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-601a9fc9.js";import{d as $,l as E,j as g,W as V,o as p,e as b,a as e,w as n,g as z,c as v,u as l,O as A,h as u,A as D,b as o,F as P,k as B,t as i,z as J,m as I,Z as K,n as M}from"./app-995ac512.js";import{Q as k}from"./QTooltip-e29014a4.js";import{a as Q,b as s,c as W,d as Z}from"./QTable-c8ac225f.js";import{Q as G,_ as H}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-5c96c8ec.js";import{c as U,e as X,t as Y,b as aa}from"./LaporanPengajuanDanaSearchDialog.vue_vue_type_script_setup_true_lang-2e9cae49.js";import{u as ea}from"./use-quasar-5794ceca.js";import{t as T,a as O}from"./money-3074a8fc.js";import"./QImg-4e5f03b9.js";import"./use-dialog-plugin-component-e6d16b32.js";import"./QForm-d4e0fa4d.js";import"./options-4b88285e.js";const na={class:"q-pa-md"},la={class:"q-gutter-sm"},ta=$({__name:"LaporanPengajuanDanaTable",props:{rows:{},formOptions:{}},setup(x){const m=x,f=E(()=>m.rows.map(t=>{const r=t.status_pengajuan==="400"?"Closed":"Open";return{...t,status:r}})),j=ea();function y(t){j.dialog({component:H,componentProps:{proyek:t}})}function d(){j.dialog({component:aa,componentProps:{options:m.formOptions}})}const F=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"jenis_transaksi",label:"Jenis Transaksi",field:"jenis_transaksi",align:"left",sortable:!0},{name:"nilai_pengajuan",label:"Nilai Pengajuan Dana",field:"nilai_pengajuan",align:"right",sortable:!0},{name:"jumlah_disetujui",label:"Disetujui",field:"jumlah_disetujui",align:"right",sortable:!0},{name:"status",label:"Status",field:"status_pengajuan",align:"left",sortable:!0}],c=g(!1);function N(){c.value=!c.value}const _=g(),h=g(),C=g();return V(()=>{var t,r,a;h.value={columns:(t=_.value)==null?void 0:t.columns,body:{rows:(r=_.value)==null?void 0:r.computedRows,props:["index","nama_proyek","tahun_anggaran","keperluan","jenis_transaksi","nilai_pengajuan","jumlah_disetujui","status"]}},C.value=U({rows:(a=_.value)==null?void 0:a.computedRows,props:["nama_proyek","tahun_anggaran","keperluan","jenis_transaksi","nilai_pengajuan","jumlah_disetujui","status"]})}),(t,r)=>(p(),b("div",na,[e(l(W),{ref_key:"table",ref:_,flat:"",bordered:"","row-key":"id_rab",title:"Laporan Setoran/Penarikan",rows:f.value,columns:F,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:c.value},{"top-right":n(()=>[z("div",la,[Object.keys(t.$page.props.query).length?(p(),v(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:r[0]||(r[0]=a=>l(A).visit(t.route("laporan.pengajuan_dana")))})):D("",!0),e(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:d}),e(u,{flat:"",dense:"",label:"xls",color:"green",onClick:r[1]||(r[1]=a=>l(X)().exportDataFromJSON({data:C.value,name:"pengajuan-dana",type:"xls"}))},{default:n(()=>[e(k,null,{default:n(()=>[o("Export to xls")]),_:1})]),_:1}),e(u,{flat:"",dense:"",label:"pdf",color:"red-8",onClick:r[2]||(r[2]=a=>l(Y)({filename:"pengajuan_dana",header:"Pengajuan Dana",columns:h.value.columns,body:h.value.body}))},{default:n(()=>[e(k,null,{default:n(()=>[o("Export to pdf")]),_:1})]),_:1}),e(u,{flat:"",dense:"",icon:c.value?"fullscreen_exit":"fullscreen",onClick:N,class:"q-ml-md"},null,8,["icon"])])]),header:n(a=>[e(Q,{props:a},{default:n(()=>[(p(!0),b(P,null,B(a.cols,w=>(p(),v(Z,{key:w.name,props:a,style:{"font-weight":"bold"}},{default:n(()=>[o(i(w.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(a=>[e(Q,{props:a},{default:n(()=>[e(s,{key:"index",props:a},{default:n(()=>[o(i(++a.rowIndex),1)]),_:2},1032,["props"]),e(s,{key:"nama_proyek",props:a},{default:n(()=>[e(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:a.row.nama_proyek,onClick:w=>y(a.row)},{default:n(()=>[e(k,{anchor:"bottom middle",self:"top middle"},{default:n(()=>[o(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(s,{key:"tahun_anggaran",props:a},{default:n(()=>[o(i(a.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(s,{key:"keperluan",props:a},{default:n(()=>[o(i(a.row.keperluan),1)]),_:2},1032,["props"]),e(s,{key:"jenis_transaksi",props:a},{default:n(()=>[o(i(a.row.jenis_transaksi),1)]),_:2},1032,["props"]),e(s,{key:"nilai_pengajuan",props:a},{default:n(()=>[o(i(l(T)(l(O)(a.row.nilai_pengajuan))),1)]),_:2},1032,["props"]),e(s,{key:"jumlah_disetujui",props:a},{default:n(()=>[o(i(l(T)(l(O)(a.row.jumlah_disetujui))),1)]),_:2},1032,["props"]),e(s,{key:"status",props:a},{default:n(()=>[l(L)(a.row.status_aktivitas)?(p(),v(u,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:n(()=>[e(k,null,{default:n(()=>[o("Ditolak")]),_:1})]),_:1})):D("",!0),e(l(J),{href:t.route("detail_pengajuan_dana",a.row.id_pengajuan_dana)},{default:n(()=>[e(G,{color:a.row.status_pengajuan==400?"red":"primary",label:a.row.status_pengajuan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),ka=$({__name:"LaporanPengajuanDanaPage",props:{pengajuanDana:{},formOptions:{}},setup(x){const m=[{label:"Reports",url:"#"},{label:"Setoran/Penarikan",url:"#"}];return(f,j)=>{const y=I("in-link");return p(),b(P,null,[e(l(K),{title:"Laporan Setoran/Penarikan"}),e(q,null,{breadcrumbs:n(()=>[e(S,{align:"left"},{default:n(()=>[(p(),b(P,null,B(m,d=>M(e(R,{key:d.label,label:d.label},null,8,["label"]),[[y,d.url]])),64))]),_:1})]),default:n(()=>[e(l(ta),{rows:f.pengajuanDana,"form-options":f.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{ka as default};
