import{i as P,d as U,e as I,f as ie,g as ue,Q as K,a as j,b as de,n as me,_ as ce,c as pe}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-12264d28.js";import{d as D,l as fe,T,j as L,o as p,e as F,a as e,C as Y,w as t,b as c,u as a,c as v,h as b,Q as A,t as y,g as m,A as H,y as _e,F as Z,k as oe,s as $,p as M,q as Q,i as G,v as z,x as X,D as be,E as ge,m as he,Z as ke,n as ve}from"./app-98415438.js";import{a as q,b as d,c as ye,d as we,Q as re}from"./QTable-a233578c.js";import{Q as N}from"./QTooltip-e1570a44.js";import{u as J}from"./use-quasar-52eeb4b4.js";import{a as E,t as S,s as le}from"./money-915f7772.js";import{u as B,Q as W}from"./use-dialog-plugin-component-530071f9.js";import{Q as Ce}from"./QFile-90a5ce7f.js";import{Q as ee}from"./QForm-90bf62d3.js";import{m as se}from"./options-4b88285e.js";import{Q as te,a as xe}from"./QFab-59503150.js";import{Q as ne,_ as Re}from"./ModuleTopSection.vue_vue_type_script_setup_true_lang-df930ee5.js";import"./QImg-24af00d1.js";import"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-13d5be79.js";const Ve={class:"q-pa-md"},Ae={class:"q-gutter-sm"},Se={key:1},$e={key:1},Qe=D({__name:"RABItemTable",props:{rows:{},data:{},formOptions:{}},setup(w){const s=w,f=fe(()=>{const _=s.rows.reduce((O,ae)=>O+E(ae.harga_satuan)*E(ae.volume),0),x=E(l.tax)/100*_,i=E(l.additional_tax)/100*_;return{dpp:_,ppn:x,pph:i}}),l=T({tax:s.data.rab.tax,additional_tax:s.data.rab.additional_tax});function C(){l.patch(route("rab.update_tax",s.data.rab.id_rab))}const g=J();function u(){g.dialog({component:qe,componentProps:{id_rab:s.data.rab.id_rab}}).onOk(_=>{g.notify({type:_.type,message:_.message,position:"top"})})}function R(){g.dialog({component:je,componentProps:{rab:s.data.rab,options:s.formOptions}}).onOk(_=>{g.notify({type:_.type,message:_.message,position:"top"})})}function h(_){g.dialog({component:aa,componentProps:{detailRab:_,options:s.formOptions}}).onOk(x=>{g.notify({type:x.type,message:x.message,position:"top"})})}function o(_){g.dialog({component:ra,componentProps:{id_detail_rab:_}}).onOk(x=>{g.notify({type:x.type,message:x.message,position:"top"})})}const V=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"nama_satuan",label:"Satuan",field:"nama_satuan",align:"left",sortable:!0},{name:"harga_satuan",label:"Harga Satuan",field:"harga_satuan",align:"right",sortable:!0},{name:"volume",label:"Volume",field:"volume",align:"left",sortable:!0},{name:"total_harga",label:"Total Harga",field:"",align:"right",sortable:!0},{name:"keterangan",label:"Ket",field:"keterangan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],k=L(!1);function r(){k.value=!k.value}const n=L("");return(_,x)=>(p(),F("div",Ve,[e(ye,{flat:"",bordered:"","row-key":"id_detail_rab",rows:_.rows,columns:V,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:k.value,filter:n.value},Y({"top-left":t(()=>[m("div",Ae,[a(P)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(p(),v(b,{key:0,"no-caps":"",label:"Tambah Uraian RAB",icon:"add",color:"primary",onClick:R})):H("",!0),a(P)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(p(),v(b,{key:1,"no-caps":"",label:"Import dari CSV/XLS",icon:"upload_file",color:"green-8",onClick:u})):H("",!0)])]),"top-right":t(()=>[e(A,{dense:"",debounce:"300",modelValue:n.value,"onUpdate:modelValue":x[0]||(x[0]=i=>n.value=i),placeholder:"Search"},{append:t(()=>[e(_e,{name:"search"})]),_:1},8,["modelValue"]),e(b,{flat:"",dense:"",icon:k.value?"fullscreen_exit":"fullscreen",onClick:r,class:"q-ml-md"},null,8,["icon"])]),header:t(i=>[e(q,{props:i},{default:t(()=>[(p(!0),F(Z,null,oe(i.cols,O=>(p(),v(we,{key:O.name,props:i,style:{"font-weight":"bold"}},{default:t(()=>[c(y(O.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(i=>[e(q,{props:i},{default:t(()=>[e(d,{key:"index",props:i},{default:t(()=>[c(y(++i.rowIndex),1)]),_:2},1032,["props"]),e(d,{key:"uraian",props:i},{default:t(()=>[c(y(i.row.uraian),1)]),_:2},1032,["props"]),e(d,{key:"nama_satuan",props:i},{default:t(()=>[c(y(i.row.nama_satuan),1)]),_:2},1032,["props"]),e(d,{key:"harga_satuan",props:i},{default:t(()=>[c(y(a(S)(i.row.harga_satuan)),1)]),_:2},1032,["props"]),e(d,{key:"volume",props:i},{default:t(()=>[c(y(i.row.volume),1)]),_:2},1032,["props"]),e(d,{key:"total_harga",props:i},{default:t(()=>[c(y(a(S)(i.row.harga_satuan*i.row.volume)),1)]),_:2},1032,["props"]),e(d,{key:"keterangan",props:i},{default:t(()=>[c(y(i.row.keterangan),1)]),_:2},1032,["props"]),e(d,{key:"actions",props:i},{default:t(()=>[a(P)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(p(),v(b,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:t(()=>[e(ie,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[e(ue,{dense:"",style:{"min-width":"100px"}},{default:t(()=>[e(K,{clickable:""},{default:t(()=>[e(j,{onClick:O=>h(i.row)},{default:t(()=>[c(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e($),e(K,{clickable:""},{default:t(()=>[e(j,{class:"text-red",onClick:O=>o(i.row.id_detail_rab)},{default:t(()=>[c(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(p(),v(b,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:t(()=>[e(N,null,{default:t(()=>[c("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:2},[_.rows.length?{name:"bottom-row",fn:t(()=>[e(q,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" PPN ")]),_:1}),e(d,{class:"text-right"},{default:t(()=>[a(P)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(p(),v(A,{key:0,dense:"","reverse-fill-mask":"","hide-bottom-space":"",mask:"#.##","fill-mask":"0",modelValue:a(l).tax,"onUpdate:modelValue":x[1]||(x[1]=i=>a(l).tax=i),hint:"Click the button on the right to save","hide-hint":!a(l).isDirty},Y({_:2},[a(l).isDirty?{name:"append",fn:t(()=>[e(b,{flat:"",dense:"",icon:"check",onClick:C},{default:t(()=>[e(N,null,{default:t(()=>[c("Click to update")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","hide-hint"])):(p(),F("span",Se,y(_.data.rab.tax)+"%",1))]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(q,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" PPH ")]),_:1}),e(d,{class:"text-right"},{default:t(()=>[a(P)()||a(U)("create & modify rab")&&a(I)(_.data.rab)?(p(),v(A,{key:0,dense:"","reverse-fill-mask":"","hide-bottom-space":"",mask:"#.##","fill-mask":"0",modelValue:a(l).additional_tax,"onUpdate:modelValue":x[2]||(x[2]=i=>a(l).additional_tax=i),hint:"Click the button on the right to save","hide-hint":!a(l).isDirty},Y({_:2},[a(l).isDirty?{name:"append",fn:t(()=>[e(b,{flat:"",dense:"",icon:"check",onClick:C},{default:t(()=>[e(N,null,{default:t(()=>[c("Click to update")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","hide-hint"])):(p(),F("span",$e,y(_.data.rab.additional_tax)+"%",1))]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(q,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" Total RAB ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[c(y(a(S)(f.value.dpp)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(q,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" Nilai Kontrak ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[c(y(a(S)(f.value.dpp+f.value.ppn)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(q,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" Netto ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[c(y(a(S)(f.value.dpp-f.value.pph)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1})]),key:"0"}:void 0]),1032,["rows","fullscreen","filter"])]))}}),Be=m("div",{class:"text-h6"},"Import Uraian RAB",-1),De={class:"q-gutter-md"},qe=D({__name:"RABItemImportDialog",props:{id_rab:{}},emits:[...B.emits],setup(w){const s=w,{dialogRef:f,onDialogOK:l,onDialogCancel:C,onDialogHide:g}=B(),u=T({file:null});function R(){u.post(route("detail_rab.import",s.id_rab),{onSuccess:h=>{l({type:"positive",message:h.props.flash.success})}})}return(h,o)=>(p(),v(M,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(g)},{default:t(()=>[e(X,{style:{width:"500px","max-width":"80vw"}},{default:t(()=>[e(Q,{class:"row items-center q-pb-none"},{default:t(()=>[Be,e(W),e(b,{flat:"",round:"",dense:"",icon:"close",onClick:a(C)},null,8,["onClick"])]),_:1}),e($),e(ee,{onSubmit:G(R,["prevent"])},{default:t(()=>[e(Q,{class:"scroll"},{default:t(()=>[m("div",De,[e(b,{color:"green-8",icon:"download",label:"Template",href:"/storage/uploads/template_uraian_rab.xlsx"},{default:t(()=>[e(N,null,{default:t(()=>[c("Download template CSV/XLS")]),_:1})]),_:1}),e(Ce,{outlined:"",counter:"","hide-bottom-space":"",modelValue:a(u).file,"onUpdate:modelValue":o[0]||(o[0]=V=>a(u).file=V),label:"Pick file",hint:"Format: csv, xlsx",error:!!a(u).errors.file,"error-message":a(u).errors.file},null,8,["modelValue","error","error-message"])])]),_:1}),e($),e(z,{align:"right"},{default:t(()=>[a(u).hasErrors?(p(),v(b,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:o[1]||(o[1]=V=>a(u).clearErrors())})):H("",!0),e(b,{flat:"",label:"Reset",color:"secondary",onClick:o[2]||(o[2]=V=>a(u).reset())}),e(b,{flat:"",type:"submit",label:"Import",color:"primary",loading:a(u).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ue=m("div",{class:"text-h6"},"Tambah Uraian RAB",-1),He={class:"q-gutter-md"},Te={class:"row"},Oe={class:"col-12 col-md-6 q-pr-sm"},Ie={class:"col-12 col-md-6 q-pl-sm"},Fe={class:"row"},Ee={class:"col-12 col-md-6 q-pr-sm"},Pe={class:"col-12 col-md-6 q-pl-sm text-right"},Ne=m("div",{class:"text-secondary text-caption"},"Total Harga",-1),Ke={class:"text-weight-bold text-subtitle1"},je=D({__name:"RABItemCreateDialog",props:{rab:{},options:{}},emits:[...B.emits],setup(w){const s=w,{dialogRef:f,onDialogOK:l,onDialogCancel:C,onDialogHide:g}=B(),u=L(s.options.satuan);function R(k,r){r(()=>{u.value=se(k,s.options.satuan,["nama_satuan"])})}async function h(k){if(typeof k=="string"){const r=await le(k);o.harga_satuan=r}}const o=T({uraian:null,harga_satuan:0,volume:0,keterangan:null,id_satuan:null});function V(){o.post(route("detail_rab.store",s.rab.id_rab),{onSuccess:k=>{l({type:"positive",message:k.props.flash.success})}})}return(k,r)=>(p(),v(M,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(g)},{default:t(()=>[e(X,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(Q,{class:"row items-center q-pb-none"},{default:t(()=>[Ue,e(W),e(b,{flat:"",round:"",dense:"",icon:"close",onClick:a(C)},null,8,["onClick"])]),_:1}),e($),e(ee,{onSubmit:G(V,["prevent"])},{default:t(()=>[e(Q,{class:"scroll"},{default:t(()=>[m("div",He,[e(A,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(o).uraian,"onUpdate:modelValue":r[0]||(r[0]=n=>a(o).uraian=n),error:!!a(o).errors.uraian,"error-message":a(o).errors.uraian},null,8,["modelValue","error","error-message"]),e(re,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Satuan",modelValue:a(o).id_satuan,"onUpdate:modelValue":r[1]||(r[1]=n=>a(o).id_satuan=n),"option-value":"id_satuan","option-label":"nama_satuan",options:u.value,error:!!a(o).errors.id_satuan,"error-message":a(o).errors.id_satuan,onFilter:R},{"no-option":t(()=>[e(K,null,{default:t(()=>[e(j,{class:"text-grey"},{default:t(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),m("div",Te,[m("div",Oe,[e(A,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:a(o).harga_satuan,"onUpdate:modelValue":[r[2]||(r[2]=n=>a(o).harga_satuan=n),r[3]||(r[3]=n=>h(n))],hint:a(S)(a(o).harga_satuan),"hide-hint":a(o).harga_satuan<1,error:!!a(o).errors.harga_satuan,"error-message":a(o).errors.harga_satuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),m("div",Ie,[e(A,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:a(o).volume,"onUpdate:modelValue":r[4]||(r[4]=n=>a(o).volume=n),error:!!a(o).errors.volume,"error-message":a(o).errors.volume,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),m("div",Fe,[m("div",Ee,[e(A,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keterangan",modelValue:a(o).keterangan,"onUpdate:modelValue":r[5]||(r[5]=n=>a(o).keterangan=n),error:!!a(o).errors.keterangan,"error-message":a(o).errors.keterangan},null,8,["modelValue","error","error-message"])]),m("div",Pe,[Ne,m("div",Ke,y(a(S)(a(o).harga_satuan*a(o).volume)),1)])])])]),_:1}),e($),e(z,{align:"right"},{default:t(()=>[a(o).hasErrors?(p(),v(b,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[6]||(r[6]=n=>a(o).clearErrors())})):H("",!0),e(b,{flat:"",label:"Reset",color:"secondary",onClick:r[7]||(r[7]=n=>a(o).reset())}),e(b,{flat:"",type:"submit",label:"Submit",color:"primary",loading:a(o).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Le=m("div",{class:"text-h6"},"Edit Uraian RAB",-1),Me={class:"q-gutter-md"},ze={class:"row"},Xe={class:"col-12 col-md-6 q-pr-sm"},Ye={class:"col-12 col-md-6 q-pl-sm"},Ze={class:"row"},Ge={class:"col-12 col-md-6 q-pr-sm"},Je={class:"col-12 col-md-6 q-pl-sm text-right"},We=m("div",{class:"text-secondary text-caption"},"Total Harga",-1),ea={class:"text-weight-bold text-subtitle1"},aa=D({__name:"RABItemEditDialog",props:{detailRab:{},options:{}},emits:[...B.emits],setup(w){const s=w,{dialogRef:f,onDialogOK:l,onDialogCancel:C,onDialogHide:g}=B(),u=L(s.options.satuan);function R(k,r){r(()=>{u.value=se(k,s.options.satuan,["nama_satuan"])})}async function h(k){if(typeof k=="string"){const r=await le(k);o.harga_satuan=r}}const o=T({uraian:s.detailRab.uraian,harga_satuan:E(s.detailRab.harga_satuan),volume:E(s.detailRab.volume),keterangan:s.detailRab.keterangan,id_satuan:s.detailRab.id_satuan});function V(){o.patch(route("detail_rab.update",s.detailRab.id_detail_rab),{onSuccess:k=>{l({type:"positive",message:k.props.flash.success})}})}return(k,r)=>(p(),v(M,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(g)},{default:t(()=>[e(X,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(Q,{class:"row items-center q-pb-none"},{default:t(()=>[Le,e(W),e(b,{flat:"",round:"",dense:"",icon:"close",onClick:a(C)},null,8,["onClick"])]),_:1}),e($),e(ee,{onSubmit:G(V,["prevent"])},{default:t(()=>[e(Q,{class:"scroll"},{default:t(()=>[m("div",Me,[e(A,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(o).uraian,"onUpdate:modelValue":r[0]||(r[0]=n=>a(o).uraian=n),error:!!a(o).errors.uraian,"error-message":a(o).errors.uraian},null,8,["modelValue","error","error-message"]),e(re,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Satuan",modelValue:a(o).id_satuan,"onUpdate:modelValue":r[1]||(r[1]=n=>a(o).id_satuan=n),"option-value":"id_satuan","option-label":"nama_satuan",options:u.value,error:!!a(o).errors.id_satuan,"error-message":a(o).errors.id_satuan,onFilter:R},{"no-option":t(()=>[e(K,null,{default:t(()=>[e(j,{class:"text-grey"},{default:t(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),m("div",ze,[m("div",Xe,[e(A,{outlined:"","hide-bottom-space":"",label:"Harga Satuan",modelValue:a(o).harga_satuan,"onUpdate:modelValue":[r[2]||(r[2]=n=>a(o).harga_satuan=n),r[3]||(r[3]=n=>h(n))],hint:a(S)(a(o).harga_satuan),"hide-hint":a(o).harga_satuan<1,error:!!a(o).errors.harga_satuan,"error-message":a(o).errors.harga_satuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),m("div",Ye,[e(A,{outlined:"","hide-bottom-space":"",label:"Volume",modelValue:a(o).volume,"onUpdate:modelValue":r[4]||(r[4]=n=>a(o).volume=n),error:!!a(o).errors.volume,"error-message":a(o).errors.volume,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),m("div",Ze,[m("div",Ge,[e(A,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keterangan",modelValue:a(o).keterangan,"onUpdate:modelValue":r[5]||(r[5]=n=>a(o).keterangan=n),error:!!a(o).errors.keterangan,"error-message":a(o).errors.keterangan},null,8,["modelValue","error","error-message"])]),m("div",Je,[We,m("div",ea,y(a(S)(a(o).harga_satuan*a(o).volume)),1)])])])]),_:1}),e($),e(z,{align:"right"},{default:t(()=>[a(o).hasErrors?(p(),v(b,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[6]||(r[6]=n=>a(o).clearErrors())})):H("",!0),e(b,{flat:"",label:"Reset",color:"secondary",onClick:r[7]||(r[7]=n=>a(o).reset())}),e(b,{flat:"",type:"submit",label:"Update",color:"primary",loading:a(o).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ta=m("div",{class:"text-h6"},"Delete Confirmation",-1),oa=m("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),ra=D({__name:"RABItemDeleteDialog",props:{id_detail_rab:{}},emits:[...B.emits],setup(w){const s=w,{dialogRef:f,onDialogOK:l,onDialogCancel:C,onDialogHide:g}=B(),u=T({id_detail_rab:s.id_detail_rab});function R(){u.delete(route("detail_rab.destroy",s.id_detail_rab),{onSuccess:h=>{l({type:"positive",message:h.props.flash.success})}})}return(h,o)=>(p(),v(M,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(g)},{default:t(()=>[e(X,null,{default:t(()=>[e(Q,{class:"row items-center q-pb-none"},{default:t(()=>[ta]),_:1}),e($),e(Q,{class:"row items-center"},{default:t(()=>[e(be,{icon:"dangerous",color:"red","text-color":"white"}),oa]),_:1}),e(z,{align:"right"},{default:t(()=>[e(b,{flat:"",label:"Cancel",color:"primary",onClick:a(C)},null,8,["onClick"]),e(b,{flat:"",label:"Yes, delete it",color:"red",onClick:R})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),la=D({__name:"RABApprovalForm",props:{data:{}},setup(w){const s=w,f=J(),l=T({catatan:""});function C(){l.post(route("rab.approve",s.data.id_rab),{onSuccess:h=>{f.notify({type:"positive",message:h.props.flash.success,position:"top"})}})}function g(){l.post(route("rab.reject",s.data.id_rab),{onSuccess:h=>{f.notify({type:"positive",message:h.props.flash.success,position:"top"})}})}function u(){f.dialog({title:"Approval Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"positive",cancel:!0,persistent:!0}).onOk(h=>{l.catatan=h,C()})}function R(){f.dialog({title:"Rejection Confirmation",message:"Are you sure want to perform this action?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"negative",cancel:!0,persistent:!0}).onOk(h=>{l.catatan=h,g()})}return(h,o)=>(p(),v(ne,{position:"bottom-right",offset:[18,18]},{default:t(()=>[e(xe,{color:"primary",icon:"keyboard_arrow_left",direction:"left"},{label:t(({opened:V})=>[m("div",{class:ge({"example-fab-animate--hover":V!==!0})},y(V!==!0?"Approval":"Close"),3)]),default:t(()=>[e(te,{color:"green-5",label:"Setujui",icon:"check",onClick:u}),e(te,{color:"red",label:"Tolak",icon:"clear",onClick:R})]),_:1})]),_:1}))}}),sa=D({__name:"RABSubmissionForm",props:{data:{}},setup(w){const s=w,f=J(),l=T({catatan:""});function C(){l.post(route("rab.submit",s.data.id_rab),{onSuccess:u=>{f.notify({type:"positive",message:u.props.flash.success,position:"top"})}})}function g(){f.dialog({title:"Submission Confirmation",message:"Are you sure want to submit this data?",prompt:{outlined:!0,autogrow:!0,model:"",type:"text",placeholder:"Tambahkan Catatan"},color:"primary",cancel:!0,persistent:!0}).onOk(u=>{l.catatan=u,C()})}return(u,R)=>(p(),v(ne,{position:"bottom-right",offset:[18,18]},{default:t(()=>[e(b,{rounded:"",color:"primary",label:"Submit","icon-right":"check",onClick:g,class:"q-pa-md"},{default:t(()=>[e(N,null,{default:t(()=>[c("Click to submit")]),_:1})]),_:1})]),_:1}))}}),ya=D({__name:"DetailRABPage",props:{detailRab:{},formOptions:{},rab:{},timeline:{}},setup(w){const s=w,f=[{label:"Main",url:"#"},{label:"RAB",url:route("rab")},{label:s.rab.nama_proyek,url:"#"}];return(l,C)=>{const g=he("in-link");return p(),F(Z,null,[e(a(ke),{title:"RAB"}),e(ce,null,{breadcrumbs:t(()=>[e(de,{align:"left"},{default:t(()=>[(p(),F(Z,null,oe(f,u=>ve(e(pe,{key:u.label,label:u.label},null,8,["label"]),[[g,u.url]])),64))]),_:1})]),default:t(()=>[e(Re,{title:"RAB","timeline-title":"Timeline Pengajuan RAB",data:{proyek:l.rab,status:l.rab.status_rab,timeline:l.timeline}},null,8,["data"]),e(a(Qe),{rows:l.detailRab,data:{rab:l.rab},"form-options":l.formOptions},null,8,["rows","data","form-options"]),a(U)("create & modify rab")&&a(I)(l.rab)&&l.detailRab.length?(p(),v(a(sa),{key:0,data:{id_rab:l.rab.id_rab}},null,8,["data"])):H("",!0),a(U)("approve rab")&&a(me)(l.rab)?(p(),v(a(la),{key:1,data:{id_rab:l.rab.id_rab}},null,8,["data"])):H("",!0)]),_:1})],64)}}});export{ya as default};
