import{l as J,Q as O,a as w,b as M,_ as Z,c as G}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-b69e3ed2.js";import{d as x,l as W,j as K,o as d,e as D,a as e,w as a,g as $,c as C,u as l,O as Q,h as _,B,b as s,F as T,k as z,t as c,i as P,A as X,K as Y,T as ee,q as ae,s as j,v as q,I as N,J as R,f as ne,an as le,x as oe,y as te,n as re,Z as se,p as ie}from"./app-a9c22e82.js";import{Q as S}from"./datetime-dc60c162.js";import{a as U,b as g,c as ue,d as de,Q as H}from"./QTable-0e41b0f2.js";import{Q as A,_ as ce}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-29a71a0e.js";import{u as pe}from"./use-quasar-954ed4d5.js";import{u as I,Q as me}from"./use-dialog-plugin-component-646efe56.js";import{Q as _e}from"./QForm-332245d0.js";import{m as fe}from"./options-4b88285e.js";import"./QImg-b742b038.js";import"./money-915f7772.js";const ke={class:"q-pa-md"},ge={class:"q-gutter-sm"},ye=x({__name:"PencairanDanaTable",props:{rows:{},formOptions:{}},setup(v){const p=v,f=W(()=>p.rows.map(r=>{const t=r.status_pencairan==="400"?"Closed":"Open";return{...r,status:t}})),y=pe();function b(r){y.dialog({component:ce,componentProps:{proyek:r}})}function m(){y.dialog({component:we,componentProps:{options:p.formOptions}})}const h=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"jenis_transaksi",label:"Jenis Transaksi",field:"jenis_transaksi",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"left",sortable:!0}],k=K(!1);function F(){k.value=!k.value}return(r,t)=>(d(),D("div",ke,[e(l(ue),{ref:"table",flat:"",bordered:"","row-key":"id_rap",title:"List Pencairan Dana",rows:f.value,columns:h,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:k.value},{"top-right":a(()=>[$("div",ge,[Object.keys(r.$page.props.query).length?(d(),C(_,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:t[0]||(t[0]=n=>l(Q).visit(r.route("pencairan_dana")))})):B("",!0),e(_,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:m}),e(_,{flat:"",dense:"",icon:k.value?"fullscreen_exit":"fullscreen",onClick:F},{default:a(()=>[e(S,null,{default:a(()=>[s("Fullscreen Mode")]),_:1})]),_:1},8,["icon"])])]),header:a(n=>[e(U,{props:n},{default:a(()=>[(d(!0),D(T,null,z(n.cols,i=>(d(),C(de,{key:i.name,props:n,style:{"font-weight":"bold"}},{default:a(()=>[s(c(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(n=>[e(U,{props:n},{default:a(()=>[e(g,{key:"index",props:n},{default:a(()=>[s(c(++n.rowIndex),1)]),_:2},1032,["props"]),e(g,{key:"nama_proyek",props:n},{default:a(()=>[e(_,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:n.row.nama_proyek,onClick:i=>b(n.row)},{default:a(()=>[e(S,{anchor:"bottom middle",self:"top middle"},{default:a(()=>[s(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(g,{key:"tahun_anggaran",props:n,onClick:P(i=>l(Q).visit(r.route("detail_pencairan_dana",n.row.id_pencairan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[s(c(n.row.tahun_anggaran),1)]),_:2},1032,["props","onClick"]),e(g,{key:"keperluan",props:n,onClick:P(i=>l(Q).visit(r.route("detail_pencairan_dana",n.row.id_pencairan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[s(c(n.row.keperluan),1)]),_:2},1032,["props","onClick"]),e(g,{key:"jenis_transaksi",props:n,onClick:P(i=>l(Q).visit(r.route("detail_pencairan_dana",n.row.id_pencairan_dana)),["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[s(c(n.row.jenis_transaksi),1)]),_:2},1032,["props","onClick"]),e(g,{key:"status",props:n},{default:a(()=>[l(J)(n.row.status_aktivitas)?(d(),C(_,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:a(()=>[e(S,null,{default:a(()=>[s("Ditolak")]),_:1})]),_:1})):B("",!0),e(l(X),{href:r.route("detail_pencairan_dana",n.row.id_pencairan_dana)},{default:a(()=>[e(A,{color:n.row.status_pencairan==400?"red":"primary",label:n.row.status_pencairan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),be=$("div",{class:"text-h6"},"Pencarian Pengajuan Dana",-1),ve={class:"q-gutter-md"},he={class:"text-primary"},we=x({__name:"PencairanDanaSearchDialog",props:{options:{}},emits:[...I.emits],setup(v){const p=v,{dialogRef:f,onDialogOK:y,onDialogCancel:b,onDialogHide:m}=I(),h=K(p.options.currentProyek);function k(i,u){u(()=>{h.value=fe(i,p.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const r=Y().props.query,t=ee({id_proyek:r.id_proyek,status_pencairan:r.status_pencairan,ditolak:!1});function n(){t.get(route("pencairan_dana"),{onSuccess:()=>{y()}})}return(i,u)=>(d(),C(ae,{ref_key:"dialogRef",ref:f,onHide:l(m)},{default:a(()=>[e(te,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(j,{class:"row items-center q-pb-none"},{default:a(()=>[be,e(me),e(_,{flat:"",round:"",dense:"",icon:"close",onClick:l(b)},null,8,["onClick"])]),_:1}),e(q),e(_e,{onSubmit:P(n,["prevent"])},{default:a(()=>[e(j,{class:"scroll"},{default:a(()=>[$("div",ve,[e(H,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:l(t).id_proyek,"onUpdate:modelValue":u[0]||(u[0]=o=>l(t).id_proyek=o),"option-value":"id_proyek","option-label":o=>`${o.nama_proyek} | ${o.tahun_anggaran}`,options:h.value,error:!!l(t).errors.id_proyek,"error-message":l(t).errors.id_proyek,onFilter:k},{option:a(({itemProps:o,opt:V,selected:L,toggleOption:E})=>[e(O,N(R(o)),{default:a(()=>[e(w,{side:""},{default:a(()=>[e(ne,{size:"sm","model-value":L,"onUpdate:modelValue":Qe=>E(V)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(w,null,{default:a(()=>[$("strong",he,c(V.nama_proyek),1),s(" "+c(V.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(O,null,{default:a(()=>[e(w,{class:"text-grey"},{default:a(()=>[s(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(H,{outlined:"",clearable:"","fill-input":"",label:"Status Pencairan Dana",modelValue:l(t).status_pencairan,"onUpdate:modelValue":u[1]||(u[1]=o=>l(t).status_pencairan=o),options:[100,400]},{"selected-item":a(o=>[e(A,{color:o.opt==400?"red":"primary",label:o.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:a(o=>[e(O,N(R(o.itemProps)),{default:a(()=>[e(w,null,{default:a(()=>[s(c(o.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),e(le,{"checked-icon":"check","unchecked-icon":"clear",label:"Hanya tampilkan Pencairan Dana yang ditolak",modelValue:l(t).ditolak,"onUpdate:modelValue":u[2]||(u[2]=o=>l(t).ditolak=o)},null,8,["modelValue"])])]),_:1}),e(q),e(oe,{align:"right"},{default:a(()=>[e(_,{flat:"",type:"submit",label:"Search",color:"primary",loading:l(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),je=x({__name:"PencairanDanaPage",props:{pencairanDana:{},formOptions:{}},setup(v){const p=[{label:"Keuangan",url:"#"},{label:"Pencairan Dana",url:"#"}];return(f,y)=>{const b=re("in-link");return d(),D(T,null,[e(l(se),{title:"Pencairan Dana"}),e(Z,null,{breadcrumbs:a(()=>[e(M,{align:"left"},{default:a(()=>[(d(),D(T,null,z(p,m=>ie(e(G,{key:m.label,label:m.label},null,8,["label"]),[[b,m.url]])),64))]),_:1})]),default:a(()=>[e(l(ye),{rows:f.pencairanDana,"form-options":f.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{je as default};
