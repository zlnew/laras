import{d as Y,l as ne,i as oe,m as te,f as le,g as re,Q as C,a as P,b as se,_ as ie,c as ue}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-12264d28.js";import{d as T,j as F,o as m,e as S,a as e,w as a,u as n,c as f,h as i,O as de,A as R,F as M,k as G,b as p,t as k,z as pe,s as V,K as me,T as H,p as E,q as $,i as z,g as b,N as U,P as q,f as ce,an as _e,v as K,x as N,Q as W,D as ge,m as fe,Z as ke,n as ye}from"./app-98415438.js";import{a as Z,b as x,c as be,d as je,Q as O}from"./QTable-a233578c.js";import{Q as A}from"./QTooltip-e1570a44.js";import{Q as X,_ as he}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-13d5be79.js";import{u as ve}from"./use-quasar-52eeb4b4.js";import{u as Q,Q as I}from"./use-dialog-plugin-component-530071f9.js";import{Q as J}from"./QForm-90bf62d3.js";import{m as L}from"./options-4b88285e.js";import"./QImg-24af00d1.js";import"./money-915f7772.js";const Pe={class:"q-pa-md"},we={key:1,class:"text-h6"},De=T({__name:"PengajuanDanaTable",props:{rows:{},formOptions:{}},setup(j){const s=j,u=ve();function h(l){u.dialog({component:he,componentProps:{proyek:l}})}function y(){u.dialog({component:Qe,componentProps:{options:s.formOptions}})}function _(){u.dialog({component:Se,componentProps:{options:s.formOptions}}).onOk(l=>{u.notify({type:l.type,message:l.message,position:"top"})})}function g(l){u.dialog({component:Fe,componentProps:{pengajuanDana:l,options:s.formOptions}}).onOk(r=>{u.notify({type:r.type,message:r.message,position:"top"})})}function w(l){u.dialog({component:Ke,componentProps:{id_pengajuan_dana:l}}).onOk(r=>{u.notify({type:r.type,message:r.message,position:"top"})})}const v=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"jenis_transaksi",label:"Jenis Transaksi",field:"jenis_transaksi",align:"left",sortable:!0},{name:"status_pengajuan",label:"Status",field:"status_pengajuan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],t=F(!1);function D(){t.value=!t.value}return(l,r)=>(m(),S("div",Pe,[e(be,{flat:"",bordered:"","row-key":"id_rap",rows:l.rows,columns:v,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:t.value},{"top-left":a(()=>[n(Y)("create & modify pengajuan dana")?(m(),f(i,{key:0,"no-caps":"",label:"Tambah Pengajuan Transaksi",icon:"add",color:"primary",onClick:_})):(m(),S("div",we,"List Pengajuan Dana"))]),"top-right":a(()=>[Object.keys(l.$page.props.query).length?(m(),f(i,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:r[0]||(r[0]=o=>n(de).visit(l.route("pengajuan_dana")))})):R("",!0),e(i,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:y}),e(i,{flat:"",dense:"",icon:t.value?"fullscreen_exit":"fullscreen",onClick:D,class:"q-ml-md"},null,8,["icon"])]),header:a(o=>[e(Z,{props:o},{default:a(()=>[(m(!0),S(M,null,G(o.cols,c=>(m(),f(je,{key:c.name,props:o,style:{"font-weight":"bold"}},{default:a(()=>[p(k(c.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(o=>[e(Z,{props:o},{default:a(()=>[e(x,{key:"index",props:o},{default:a(()=>[p(k(++o.rowIndex),1)]),_:2},1032,["props"]),e(x,{key:"nama_proyek",props:o},{default:a(()=>[e(i,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:o.row.nama_proyek,onClick:c=>h(o.row)},{default:a(()=>[e(A,{anchor:"bottom middle",self:"top middle"},{default:a(()=>[p(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(x,{key:"tahun_anggaran",props:o},{default:a(()=>[p(k(o.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(x,{key:"keperluan",props:o},{default:a(()=>[p(k(o.row.keperluan),1)]),_:2},1032,["props"]),e(x,{key:"jenis_transaksi",props:o},{default:a(()=>[p(k(o.row.jenis_transaksi),1)]),_:2},1032,["props"]),e(x,{key:"status_pengajuan",props:o},{default:a(()=>[n(ne)(o.row.status_aktivitas)?(m(),f(i,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:a(()=>[e(A,null,{default:a(()=>[p("Ditolak")]),_:1})]),_:1})):R("",!0),e(n(pe),{href:l.route("detail_pengajuan_dana",o.row.id_pengajuan_dana)},{default:a(()=>[e(X,{color:o.row.status_pengajuan==400?"red":"primary",label:o.row.status_pengajuan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"]),e(x,{key:"actions",props:o},{default:a(()=>[n(oe)()||n(Y)("create & modify pengajuan dana")&&n(te)(o.row.status_pengajuan)?(m(),f(i,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:a(()=>[e(le,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(re,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[e(C,{clickable:""},{default:a(()=>[e(P,{onClick:c=>g(o.row)},{default:a(()=>[p(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e(V),e(C,{clickable:""},{default:a(()=>[e(P,{class:"text-red",onClick:c=>w(o.row.id_pengajuan_dana)},{default:a(()=>[p(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(m(),f(i,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:a(()=>[e(A,null,{default:a(()=>[p("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),Ce=b("div",{class:"text-h6"},"Pencarian Pengajuan Transaksi",-1),Ve={class:"q-gutter-md"},$e={class:"text-primary"},Qe=T({__name:"PengajuanDanaSearchDialog",props:{options:{}},emits:[...Q.emits],setup(j){const s=j,{dialogRef:u,onDialogOK:h,onDialogCancel:y,onDialogHide:_}=Q(),g=F(s.options.currentProyek),w=["Setoran Modal","Penarikan","Utang","Piutang","Pembayaran"];function v(o,c){c(()=>{g.value=L(o,s.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const D=me().props.query,l=H({id_proyek:D.id_proyek,jenis_transaksi:D.jenis_transaksi,status_pengajuan:D.status_pengajuan,ditolak:!1});function r(){l.get(route("pengajuan_dana"),{onSuccess:()=>{h()}})}return(o,c)=>(m(),f(E,{ref_key:"dialogRef",ref:u,onHide:n(_)},{default:a(()=>[e(N,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e($,{class:"row items-center q-pb-none"},{default:a(()=>[Ce,e(I),e(i,{flat:"",round:"",dense:"",icon:"close",onClick:n(y)},null,8,["onClick"])]),_:1}),e(V),e(J,{onSubmit:z(r,["prevent"])},{default:a(()=>[e($,{class:"scroll"},{default:a(()=>[b("div",Ve,[e(O,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:n(l).id_proyek,"onUpdate:modelValue":c[0]||(c[0]=d=>n(l).id_proyek=d),"option-value":"id_proyek","option-label":d=>`${d.nama_proyek} | ${d.tahun_anggaran}`,options:g.value,error:!!n(l).errors.id_proyek,"error-message":n(l).errors.id_proyek,onFilter:v},{option:a(({itemProps:d,opt:B,selected:ee,toggleOption:ae})=>[e(C,U(q(d)),{default:a(()=>[e(P,{side:""},{default:a(()=>[e(ce,{size:"sm","model-value":ee,"onUpdate:modelValue":Ne=>ae(B)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(P,null,{default:a(()=>[b("strong",$e,k(B.nama_proyek),1),p(" "+k(B.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(C,null,{default:a(()=>[e(P,{class:"text-grey"},{default:a(()=>[p(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(O,{outlined:"","hide-bottom-space":"","input-debounce":"500",label:"Jenis Transaksi",modelValue:n(l).jenis_transaksi,"onUpdate:modelValue":c[1]||(c[1]=d=>n(l).jenis_transaksi=d),options:w,error:!!n(l).errors.jenis_transaksi,"error-message":n(l).errors.jenis_transaksi},null,8,["modelValue","error","error-message"]),e(O,{outlined:"",clearable:"","fill-input":"",label:"Status Pengajuan Dana",modelValue:n(l).status_pengajuan,"onUpdate:modelValue":c[2]||(c[2]=d=>n(l).status_pengajuan=d),options:[100,400]},{"selected-item":a(d=>[e(X,{color:d.opt==400?"red":"primary",label:d.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:a(d=>[e(C,U(q(d.itemProps)),{default:a(()=>[e(P,null,{default:a(()=>[p(k(d.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),e(_e,{"checked-icon":"check","unchecked-icon":"clear",label:"Hanya tampilkan Pengajuan Transaksi yang ditolak",modelValue:n(l).ditolak,"onUpdate:modelValue":c[3]||(c[3]=d=>n(l).ditolak=d)},null,8,["modelValue"])])]),_:1}),e(V),e(K,{align:"right"},{default:a(()=>[e(i,{flat:"",type:"submit",label:"Search",color:"primary",loading:n(l).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),xe=b("div",{class:"text-h6"},"Tambah Pengajuan Transaksi",-1),Oe={class:"q-gutter-md"},Te={class:"text-primary"},Se=T({__name:"PengajuanDanaCreateDialog",props:{options:{}},emits:[...Q.emits],setup(j){const s=j,{dialogRef:u,onDialogOK:h,onDialogCancel:y,onDialogHide:_}=Q(),g=F(s.options.proyek),w=["Setoran Modal","Penarikan","Utang","Piutang","Pembayaran"];function v(l,r){r(()=>{g.value=L(l,s.options.proyek,["nama_proyek","tahun_anggaran"])})}const t=H({id_proyek:null,keperluan:null,jenis_transaksi:null});function D(){t.post(route("pengajuan_dana.store"),{onSuccess:l=>{h({type:"positive",message:l.props.flash.success})}})}return(l,r)=>(m(),f(E,{ref_key:"dialogRef",ref:u,"no-backdrop-dismiss":!0,onHide:n(_)},{default:a(()=>[e(N,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e($,{class:"row items-center q-pb-none"},{default:a(()=>[xe,e(I),e(i,{flat:"",round:"",dense:"",icon:"close",onClick:n(y)},null,8,["onClick"])]),_:1}),e(V),e(J,{onSubmit:z(D,["prevent"])},{default:a(()=>[e($,{class:"scroll"},{default:a(()=>[b("div",Oe,[e(O,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:n(t).id_proyek,"onUpdate:modelValue":r[0]||(r[0]=o=>n(t).id_proyek=o),"option-value":"id_proyek","option-label":o=>`${o.nama_proyek} | ${o.tahun_anggaran}`,options:g.value,error:!!n(t).errors.id_proyek,"error-message":n(t).errors.id_proyek,onFilter:v},{option:a(o=>[e(C,U(q(o.itemProps)),{default:a(()=>[e(P,null,{default:a(()=>[b("strong",Te,k(o.opt.nama_proyek),1),p(" "+k(o.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(C,null,{default:a(()=>[e(P,{class:"text-grey"},{default:a(()=>[p(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(W,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:n(t).keperluan,"onUpdate:modelValue":r[1]||(r[1]=o=>n(t).keperluan=o),error:!!n(t).errors.keperluan,"error-message":n(t).errors.keperluan},null,8,["modelValue","error","error-message"]),e(O,{outlined:"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Jenis Transaksi",modelValue:n(t).jenis_transaksi,"onUpdate:modelValue":r[2]||(r[2]=o=>n(t).jenis_transaksi=o),options:w,error:!!n(t).errors.jenis_transaksi,"error-message":n(t).errors.jenis_transaksi},null,8,["modelValue","error","error-message"])])]),_:1}),e(V),e(K,{align:"right"},{default:a(()=>[n(t).hasErrors?(m(),f(i,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[3]||(r[3]=o=>n(t).clearErrors())})):R("",!0),e(i,{flat:"",label:"Reset",color:"secondary",onClick:r[4]||(r[4]=o=>n(t).reset())}),e(i,{flat:"",type:"submit",label:"Submit",color:"primary",loading:n(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Re=b("div",{class:"text-h6"},"Edit Pengajuan Transaksi",-1),Ue={class:"q-gutter-md"},qe={class:"text-primary"},Fe=T({__name:"PengajuanDanaEditDialog",props:{pengajuanDana:{},options:{}},emits:[...Q.emits],setup(j){const s=j,{dialogRef:u,onDialogOK:h,onDialogCancel:y,onDialogHide:_}=Q(),g=F(s.options.proyek),w=["Setoran Modal","Penarikan","Utang","Piutang","Pembayaran"];function v(l,r){r(()=>{g.value=L(l,s.options.proyek,["nama_proyek","tahun_anggaran"])})}const t=H({id_proyek:s.pengajuanDana.id_proyek,keperluan:s.pengajuanDana.keperluan,jenis_transaksi:s.pengajuanDana.jenis_transaksi});function D(){t.patch(route("pengajuan_dana.update",s.pengajuanDana.id_pengajuan_dana),{onSuccess:l=>{h({type:"positive",message:l.props.flash.success})}})}return(l,r)=>(m(),f(E,{ref_key:"dialogRef",ref:u,"no-backdrop-dismiss":!0,onHide:n(_)},{default:a(()=>[e(N,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e($,{class:"row items-center q-pb-none"},{default:a(()=>[Re,e(I),e(i,{flat:"",round:"",dense:"",icon:"close",onClick:n(y)},null,8,["onClick"])]),_:1}),e(V),e(J,{onSubmit:z(D,["prevent"])},{default:a(()=>[e($,{class:"scroll"},{default:a(()=>[b("div",Ue,[e(O,{outlined:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:n(t).id_proyek,"onUpdate:modelValue":r[0]||(r[0]=o=>n(t).id_proyek=o),"option-value":"id_proyek","option-label":o=>`${o.nama_proyek} | ${o.tahun_anggaran}`,options:g.value,error:!!n(t).errors.id_proyek,"error-message":n(t).errors.id_proyek,onFilter:v},{option:a(o=>[e(C,U(q(o.itemProps)),{default:a(()=>[e(P,null,{default:a(()=>[b("strong",qe,k(o.opt.nama_proyek),1),p(" "+k(o.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(C,null,{default:a(()=>[e(P,{class:"text-grey"},{default:a(()=>[p(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(W,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:n(t).keperluan,"onUpdate:modelValue":r[1]||(r[1]=o=>n(t).keperluan=o),error:!!n(t).errors.keperluan,"error-message":n(t).errors.keperluan},null,8,["modelValue","error","error-message"]),e(O,{outlined:"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Jenis Transaksi",modelValue:n(t).jenis_transaksi,"onUpdate:modelValue":r[2]||(r[2]=o=>n(t).jenis_transaksi=o),options:w,error:!!n(t).errors.jenis_transaksi,"error-message":n(t).errors.jenis_transaksi},null,8,["modelValue","error","error-message"])])]),_:1}),e(V),e(K,{align:"right"},{default:a(()=>[n(t).hasErrors?(m(),f(i,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[3]||(r[3]=o=>n(t).clearErrors())})):R("",!0),e(i,{flat:"",label:"Reset",color:"secondary",onClick:r[4]||(r[4]=o=>n(t).reset())}),e(i,{flat:"",type:"submit",label:"Update",color:"primary",loading:n(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),He=b("div",{class:"text-h6"},"Delete Confirmation",-1),Ee=b("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),Ke=T({__name:"PengajuanDanaDeleteDialog",props:{id_pengajuan_dana:{}},emits:[...Q.emits],setup(j){const s=j,{dialogRef:u,onDialogOK:h,onDialogCancel:y,onDialogHide:_}=Q(),g=H({id_pengajuan_dana:s.id_pengajuan_dana});function w(){g.delete(route("pengajuan_dana.destroy",s.id_pengajuan_dana),{onSuccess:v=>{h({type:"positive",message:v.props.flash.success})}})}return(v,t)=>(m(),f(E,{ref_key:"dialogRef",ref:u,"no-backdrop-dismiss":!0,onHide:n(_)},{default:a(()=>[e(N,null,{default:a(()=>[e($,{class:"row items-center q-pb-none"},{default:a(()=>[He]),_:1}),e(V),e($,{class:"row items-center"},{default:a(()=>[e(ge,{icon:"dangerous",color:"red","text-color":"white"}),Ee]),_:1}),e(K,{align:"right"},{default:a(()=>[e(i,{flat:"",label:"Cancel",color:"primary",onClick:n(y)},null,8,["onClick"]),e(i,{flat:"",label:"Yes, delete it",color:"red",onClick:w})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Xe=T({__name:"PengajuanDanaPage",props:{pengajuanDana:{},formOptions:{}},setup(j){const s=[{label:"Keuangan",url:"#"},{label:"Pengajuan Transaksi",url:"#"}];return(u,h)=>{const y=fe("in-link");return m(),S(M,null,[e(n(ke),{title:"Pengajuan Transaksi"}),e(ie,null,{breadcrumbs:a(()=>[e(se,{align:"left"},{default:a(()=>[(m(),S(M,null,G(s,_=>ye(e(ue,{key:_.label,label:_.label},null,8,["label"]),[[y,_.url]])),64))]),_:1})]),default:a(()=>[e(n(De),{rows:u.pengajuanDana,"form-options":u.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{Xe as default};
