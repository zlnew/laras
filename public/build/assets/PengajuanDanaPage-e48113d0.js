import{d as G,m as ae,i as oe,n as ne,f as te,g as le,Q as C,a as D,b as re,_ as se,c as ie}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-cb23a045.js";import{d as V,j as F,o as c,e as O,a as e,w as a,u as o,c as k,h as d,O as ue,A as S,F as A,k as Z,b as m,t as b,z as de,s as P,K as pe,T,p as E,q as $,i as z,g as h,G as R,H as q,f as ce,an as me,v as U,x as K,Q as J,D as _e,m as ge,Z as fe,n as ke}from"./app-23d6f15b.js";import{a as Y,b as x,c as ye,d as be,Q as H}from"./QTable-f46e4729.js";import{Q as N}from"./QTooltip-f4a8154c.js";import{Q as W,_ as he}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-1389f9be.js";import{u as je}from"./use-quasar-af947e3e.js";import{u as Q,Q as I}from"./use-dialog-plugin-component-280fa5ad.js";import{Q as L}from"./QForm-774e0a4b.js";import{m as M}from"./options-964f32b0.js";import"./QImg-68767c1e.js";import"./money-3074a8fc.js";const ve={class:"q-pa-md"},De={key:1,class:"text-h6"},we=V({__name:"PengajuanDanaTable",props:{rows:{},formOptions:{}},setup(j){const u=j,p=je();function v(n){p.dialog({component:he,componentProps:{proyek:n}})}function y(){p.dialog({component:Qe,componentProps:{options:u.formOptions}})}function _(){p.dialog({component:Se,componentProps:{options:u.formOptions}}).onOk(n=>{p.notify({type:n.type,message:n.message,position:"top"})})}function g(n){p.dialog({component:Fe,componentProps:{pengajuanDana:n,options:u.formOptions}}).onOk(t=>{p.notify({type:t.type,message:t.message,position:"top"})})}function w(n){p.dialog({component:Ue,componentProps:{id_pengajuan_dana:n}}).onOk(t=>{p.notify({type:t.type,message:t.message,position:"top"})})}const l=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"status_pengajuan",label:"Status",field:"status_pengajuan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],f=F(!1);function s(){f.value=!f.value}return(n,t)=>(c(),O("div",ve,[e(ye,{flat:"",bordered:"","row-key":"id_rap",rows:n.rows,columns:l,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:f.value},{"top-left":a(()=>[o(G)("create & modify pengajuan dana")?(c(),k(d,{key:0,"no-caps":"",label:"Tambah Pengajuan Dana",icon:"add",color:"primary",onClick:_})):(c(),O("div",De,"List Pengajuan Dana"))]),"top-right":a(()=>[Object.keys(n.$page.props.query).length?(c(),k(d,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:t[0]||(t[0]=r=>o(ue).visit(n.route("pengajuan_dana")))})):S("",!0),e(d,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:y}),e(d,{flat:"",dense:"",icon:f.value?"fullscreen_exit":"fullscreen",onClick:s,class:"q-ml-md"},null,8,["icon"])]),header:a(r=>[e(Y,{props:r},{default:a(()=>[(c(!0),O(A,null,Z(r.cols,i=>(c(),k(be,{key:i.name,props:r,style:{"font-weight":"bold"}},{default:a(()=>[m(b(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(r=>[e(Y,{props:r},{default:a(()=>[e(x,{key:"index",props:r},{default:a(()=>[m(b(++r.rowIndex),1)]),_:2},1032,["props"]),e(x,{key:"nama_proyek",props:r},{default:a(()=>[e(d,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:r.row.nama_proyek,onClick:i=>v(r.row)},{default:a(()=>[e(N,{anchor:"bottom middle",self:"top middle"},{default:a(()=>[m(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(x,{key:"tahun_anggaran",props:r},{default:a(()=>[m(b(r.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(x,{key:"keperluan",props:r},{default:a(()=>[m(b(r.row.keperluan),1)]),_:2},1032,["props"]),e(x,{key:"status_pengajuan",props:r},{default:a(()=>[o(ae)(r.row.status_aktivitas)?(c(),k(d,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:a(()=>[e(N,null,{default:a(()=>[m("Ditolak")]),_:1})]),_:1})):S("",!0),e(o(de),{href:n.route("detail_pengajuan_dana",r.row.id_pengajuan_dana)},{default:a(()=>[e(W,{color:r.row.status_pengajuan==400?"red":"primary",label:r.row.status_pengajuan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"]),e(x,{key:"actions",props:r},{default:a(()=>[o(oe)()||o(G)("create & modify pengajuan dana")&&o(ne)(r.row.status_pengajuan)?(c(),k(d,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:a(()=>[e(te,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(le,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[e(C,{clickable:""},{default:a(()=>[e(D,{onClick:i=>g(r.row)},{default:a(()=>[m(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e(P),e(C,{clickable:""},{default:a(()=>[e(D,{class:"text-red",onClick:i=>w(r.row.id_pengajuan_dana)},{default:a(()=>[m(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(c(),k(d,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:a(()=>[e(N,null,{default:a(()=>[m("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),Ce=h("div",{class:"text-h6"},"Pencarian Pengajuan Dana",-1),Pe={class:"q-gutter-md"},$e={class:"text-primary"},Qe=V({__name:"PengajuanDanaSearchDialog",props:{options:{}},emits:[...Q.emits],setup(j){const u=j,{dialogRef:p,onDialogOK:v,onDialogCancel:y,onDialogHide:_}=Q(),g=F(u.options.currentProyek);function w(t,r){r(()=>{g.value=M(t,u.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const f=pe().props.query,s=T({id_proyek:f.id_proyek,status_pengajuan:f.status_pengajuan,ditolak:!1});function n(){s.get(route("pengajuan_dana"),{onSuccess:()=>v()})}return(t,r)=>(c(),k(E,{ref_key:"dialogRef",ref:p,onHide:o(_)},{default:a(()=>[e(K,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e($,{class:"row items-center q-pb-none"},{default:a(()=>[Ce,e(I),e(d,{flat:"",round:"",dense:"",icon:"close",onClick:o(y)},null,8,["onClick"])]),_:1}),e(P),e(L,{onSubmit:z(n,["prevent"])},{default:a(()=>[e($,{class:"scroll"},{default:a(()=>[h("div",Pe,[e(H,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:o(s).id_proyek,"onUpdate:modelValue":r[0]||(r[0]=i=>o(s).id_proyek=i),"option-value":"id_proyek","option-label":i=>`${i.nama_proyek} | ${i.tahun_anggaran}`,options:g.value,error:!!o(s).errors.id_proyek,"error-message":o(s).errors.id_proyek,onFilter:w},{option:a(({itemProps:i,opt:B,selected:X,toggleOption:ee})=>[e(C,R(q(i)),{default:a(()=>[e(D,{side:""},{default:a(()=>[e(ce,{size:"sm","model-value":X,"onUpdate:modelValue":Ke=>ee(B)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(D,null,{default:a(()=>[h("strong",$e,b(B.nama_proyek),1),m(" "+b(B.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(C,null,{default:a(()=>[e(D,{class:"text-grey"},{default:a(()=>[m(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(H,{outlined:"",clearable:"","fill-input":"",label:"Status Pengajuan Dana",modelValue:o(s).status_pengajuan,"onUpdate:modelValue":r[1]||(r[1]=i=>o(s).status_pengajuan=i),options:[100,400]},{"selected-item":a(i=>[e(W,{color:i.opt==400?"red":"primary",label:i.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:a(i=>[e(C,R(q(i.itemProps)),{default:a(()=>[e(D,null,{default:a(()=>[m(b(i.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),e(me,{"checked-icon":"check","unchecked-icon":"clear",label:"Hanya tampilkan Pengajuan Dana yang ditolak",modelValue:o(s).ditolak,"onUpdate:modelValue":r[2]||(r[2]=i=>o(s).ditolak=i)},null,8,["modelValue"])])]),_:1}),e(P),e(U,{align:"right"},{default:a(()=>[e(d,{flat:"",type:"submit",label:"Search",color:"primary",loading:o(s).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),xe=h("div",{class:"text-h6"},"Tambah Pengajuan Dana",-1),Ve={class:"q-gutter-md"},Oe={class:"text-primary"},Se=V({__name:"PengajuanDanaCreateDialog",props:{options:{}},emits:[...Q.emits],setup(j){const u=j,{dialogRef:p,onDialogOK:v,onDialogCancel:y,onDialogHide:_}=Q(),g=F(u.options.proyek);function w(s,n){n(()=>{g.value=M(s,u.options.proyek,["nama_proyek","tahun_anggaran"])})}const l=T({id_proyek:null,keperluan:null});function f(){l.post(route("pengajuan_dana.store"),{onSuccess:s=>{v({type:"positive",message:s.props.flash.success})}})}return(s,n)=>(c(),k(E,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(_)},{default:a(()=>[e(K,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e($,{class:"row items-center q-pb-none"},{default:a(()=>[xe,e(I),e(d,{flat:"",round:"",dense:"",icon:"close",onClick:o(y)},null,8,["onClick"])]),_:1}),e(P),e(L,{onSubmit:z(f,["prevent"])},{default:a(()=>[e($,{class:"scroll"},{default:a(()=>[h("div",Ve,[e(H,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:o(l).id_proyek,"onUpdate:modelValue":n[0]||(n[0]=t=>o(l).id_proyek=t),"option-value":"id_proyek","option-label":t=>`${t.nama_proyek} | ${t.tahun_anggaran}`,options:g.value,error:!!o(l).errors.id_proyek,"error-message":o(l).errors.id_proyek,onFilter:w},{option:a(t=>[e(C,R(q(t.itemProps)),{default:a(()=>[e(D,null,{default:a(()=>[h("strong",Oe,b(t.opt.nama_proyek),1),m(" "+b(t.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(C,null,{default:a(()=>[e(D,{class:"text-grey"},{default:a(()=>[m(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(J,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:o(l).keperluan,"onUpdate:modelValue":n[1]||(n[1]=t=>o(l).keperluan=t),error:!!o(l).errors.keperluan,"error-message":o(l).errors.keperluan},null,8,["modelValue","error","error-message"])])]),_:1}),e(P),e(U,{align:"right"},{default:a(()=>[o(l).hasErrors?(c(),k(d,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:n[2]||(n[2]=t=>o(l).clearErrors())})):S("",!0),e(d,{flat:"",label:"Reset",color:"secondary",onClick:n[3]||(n[3]=t=>o(l).reset())}),e(d,{flat:"",type:"submit",label:"Submit",color:"primary",loading:o(l).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Re=h("div",{class:"text-h6"},"Tambah Pengajuan Dana",-1),qe={class:"q-gutter-md"},He={class:"text-primary"},Fe=V({__name:"PengajuanDanaEditDialog",props:{pengajuanDana:{},options:{}},emits:[...Q.emits],setup(j){const u=j,{dialogRef:p,onDialogOK:v,onDialogCancel:y,onDialogHide:_}=Q(),g=F(u.options.proyek);function w(s,n){n(()=>{g.value=M(s,u.options.proyek,["nama_proyek","tahun_anggaran"])})}const l=T({id_proyek:u.pengajuanDana.id_proyek,keperluan:u.pengajuanDana.keperluan});function f(){l.patch(route("pengajuan_dana.update",u.pengajuanDana.id_pengajuan_dana),{onSuccess:s=>{v({type:"positive",message:s.props.flash.success})}})}return(s,n)=>(c(),k(E,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(_)},{default:a(()=>[e(K,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e($,{class:"row items-center q-pb-none"},{default:a(()=>[Re,e(I),e(d,{flat:"",round:"",dense:"",icon:"close",onClick:o(y)},null,8,["onClick"])]),_:1}),e(P),e(L,{onSubmit:z(f,["prevent"])},{default:a(()=>[e($,{class:"scroll"},{default:a(()=>[h("div",qe,[e(H,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:o(l).id_proyek,"onUpdate:modelValue":n[0]||(n[0]=t=>o(l).id_proyek=t),"option-value":"id_proyek","option-label":t=>`${t.nama_proyek} | ${t.tahun_anggaran}`,options:g.value,error:!!o(l).errors.id_proyek,"error-message":o(l).errors.id_proyek,onFilter:w},{option:a(t=>[e(C,R(q(t.itemProps)),{default:a(()=>[e(D,null,{default:a(()=>[h("strong",He,b(t.opt.nama_proyek),1),m(" "+b(t.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(C,null,{default:a(()=>[e(D,{class:"text-grey"},{default:a(()=>[m(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(J,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:o(l).keperluan,"onUpdate:modelValue":n[1]||(n[1]=t=>o(l).keperluan=t),error:!!o(l).errors.keperluan,"error-message":o(l).errors.keperluan},null,8,["modelValue","error","error-message"])])]),_:1}),e(P),e(U,{align:"right"},{default:a(()=>[o(l).hasErrors?(c(),k(d,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:n[2]||(n[2]=t=>o(l).clearErrors())})):S("",!0),e(d,{flat:"",label:"Reset",color:"secondary",onClick:n[3]||(n[3]=t=>o(l).reset())}),e(d,{flat:"",type:"submit",label:"Update",color:"primary",loading:o(l).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Te=h("div",{class:"text-h6"},"Delete Confirmation",-1),Ee=h("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),Ue=V({__name:"PengajuanDanaDeleteDialog",props:{id_pengajuan_dana:{}},emits:[...Q.emits],setup(j){const u=j,{dialogRef:p,onDialogOK:v,onDialogCancel:y,onDialogHide:_}=Q(),g=T({id_pengajuan_dana:u.id_pengajuan_dana});function w(){g.delete(route("pengajuan_dana.destroy",u.id_pengajuan_dana),{onSuccess:l=>{v({type:"positive",message:l.props.flash.success})}})}return(l,f)=>(c(),k(E,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(_)},{default:a(()=>[e(K,null,{default:a(()=>[e($,{class:"row items-center q-pb-none"},{default:a(()=>[Te]),_:1}),e(P),e($,{class:"row items-center"},{default:a(()=>[e(_e,{icon:"dangerous",color:"red","text-color":"white"}),Ee]),_:1}),e(U,{align:"right"},{default:a(()=>[e(d,{flat:"",label:"Cancel",color:"primary",onClick:o(y)},null,8,["onClick"]),e(d,{flat:"",label:"Yes, delete it",color:"red",onClick:w})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),We=V({__name:"PengajuanDanaPage",props:{pengajuanDana:{},formOptions:{}},setup(j){const u=[{label:"Keuangan",url:"#"},{label:"Pengajuan Dana",url:"#"}];return(p,v)=>{const y=ge("in-link");return c(),O(A,null,[e(o(fe),{title:"Pengajuan Dana"}),e(se,null,{breadcrumbs:a(()=>[e(re,{align:"left"},{default:a(()=>[(c(),O(A,null,Z(u,_=>ke(e(ie,{label:_.label},null,8,["label"]),[[y,_.url]])),64))]),_:1})]),default:a(()=>[e(o(we),{rows:p.pengajuanDana,"form-options":p.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{We as default};
