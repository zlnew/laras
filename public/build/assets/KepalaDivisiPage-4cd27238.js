import{b as N,_ as O,c as R}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-b69e3ed2.js";import{d as Q,o as p,e as b,a,w as e,F as v,k as $,b as r,t as o,u as n,c as j,j as w,l as S,m as K,h,O as I,n as J,Z as L,p as V}from"./app-a9c22e82.js";import{_ as A}from"./DashboardOverview.vue_vue_type_script_setup_true_lang-612445b2.js";import{a as y,b as i,c as C,d as B}from"./QTable-0e41b0f2.js";import{t as m,a as c}from"./money-915f7772.js";import{Q as T}from"./datetime-dc60c162.js";import{u as M}from"./use-quasar-954ed4d5.js";import{_ as Z}from"./PiutangFilterDialog.vue_vue_type_script_setup_true_lang-4a7fedf5.js";import{c as z,e as G,t as H}from"./pdf-4d5b7e28.js";import"./QImg-b742b038.js";import"./use-dialog-plugin-component-646efe56.js";import"./QForm-332245d0.js";import"./options-4b88285e.js";const U={class:"q-pa-md"},W=Q({__name:"ProyekTable",props:{rows:{}},setup(x){const k=[{name:"index",label:"#",field:"index"},{name:"proyek",label:"Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"nilai_kontrak",label:"Nilai Kontrak",field:"nilai_kontrak",align:"right",sortable:!0},{name:"termin_sebelumnya",label:"Termin Sebelumnya",field:"termin_sebelumnya",align:"right",sortable:!0},{name:"termin_dalam_proses",label:"Termin Dalam Proses",field:"termin_dalam_proses",align:"right",sortable:!0},{name:"total_pencairan",label:"Total Pencairan",field:"total_pencairan",align:"right",sortable:!0},{name:"sisa_penagihan",label:"Sisa Penagihan",field:"sisa_penagihan",align:"right",sortable:!0}];return(d,f)=>(p(),b("div",U,[a(C,{flat:"",bordered:"",title:"Proyek",rows:d.rows,columns:k,"row-key":"id_proyek"},{header:e(l=>[a(y,{props:l},{default:e(()=>[(p(!0),b(v,null,$(l.cols,s=>(p(),j(B,{key:s.name,props:l,style:{"font-weight":"bold"}},{default:e(()=>[r(o(s.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(l=>[a(y,{props:l},{default:e(()=>[a(i,{key:"index",props:l},{default:e(()=>[r(o(++l.rowIndex),1)]),_:2},1032,["props"]),a(i,{key:"proyek",props:l},{default:e(()=>[r(o(l.row.nama_proyek),1)]),_:2},1032,["props"]),a(i,{key:"nilai_kontrak",props:l},{default:e(()=>[r(o(n(m)(n(c)(l.row.nilai_kontrak))),1)]),_:2},1032,["props"]),a(i,{key:"termin_sebelumnya",props:l},{default:e(()=>[r(o(n(m)(n(c)(l.row.termin_sebelumnya))),1)]),_:2},1032,["props"]),a(i,{key:"termin_dalam_proses",props:l},{default:e(()=>[r(o(n(m)(n(c)(l.row.termin_dalam_proses))),1)]),_:2},1032,["props"]),a(i,{key:"total_pencairan",props:l},{default:e(()=>[r(o(n(m)(n(c)(l.row.total_pencairan))),1)]),_:2},1032,["props"]),a(i,{key:"sisa_penagihan",props:l},{default:e(()=>[r(o(n(m)(n(c)(l.row.sisa_penagihan))),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]))}}),X={class:"q-pa-md"},Y=Q({__name:"PiutangTable",props:{rows:{},options:{}},setup(x){const k=x,d=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"jumlah_piutang",label:"Jumlah Piutang",field:"jumlah_piutang",align:"right",sortable:!0}],f=w(!1);function l(){f.value=!f.value}const s=w(),P=w(),D=w(),F=S(()=>{var u;return{piutang:(u=s.value)==null?void 0:u.computedRows.reduce((t,g)=>t+c(g.jumlah_piutang),0)}}),q=M();function E(){q.dialog({component:Z,componentProps:{options:k.options,data:{route:route("dashboard.kepala_divisi")}}})}return K(()=>{var _,u,t;P.value={columns:(_=s.value)==null?void 0:_.columns,body:{rows:(u=s.value)==null?void 0:u.computedRows,props:["index","nama_proyek","keperluan","jumlah_piutang"]}},D.value=z({rows:(t=s.value)==null?void 0:t.computedRows,props:["nama_proyek","keperluan","jumlah_piutang"]})}),(_,u)=>(p(),b("div",X,[a(n(C),{ref_key:"table",ref:s,flat:"",bordered:"",title:"Proyeksi Piutang",fullscreen:f.value,rows:_.rows,columns:d,class:"table"},{"top-right":e(()=>[a(h,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:E}),a(h,{flat:"",dense:"",label:"xls",color:"green",onClick:u[0]||(u[0]=t=>n(G)().exportDataFromJSON({data:D.value,name:"proyeksi-piutang",type:"xls"}))},{default:e(()=>[a(T,null,{default:e(()=>[r("Export to xls")]),_:1})]),_:1}),a(h,{flat:"",dense:"",label:"pdf",color:"red-8",onClick:u[1]||(u[1]=t=>n(H)({filename:"proyeksi_piutang",header:"Proyeksi Piutang",columns:P.value.columns,body:P.value.body}))},{default:e(()=>[a(T,null,{default:e(()=>[r("Export to pdf")]),_:1})]),_:1}),a(h,{flat:"",dense:"",icon:f.value?"fullscreen_exit":"fullscreen",onClick:l,class:"q-ml-md"},null,8,["icon"])]),header:e(t=>[a(y,{props:t},{default:e(()=>[(p(!0),b(v,null,$(t.cols,g=>(p(),j(B,{key:g.name,props:t,style:{"font-weight":"bold"}},{default:e(()=>[r(o(g.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(t=>[a(y,{props:t,onClick:g=>n(I).visit(t.row.id_penagihan?_.route("detail_penagihan",t.row.id_penagihan):_.route("detail_pencairan_dana",t.row.id_pencairan_dana)),style:{cursor:"pointer"}},{default:e(()=>[a(i,{key:"index",props:t},{default:e(()=>[r(o(++t.rowIndex),1)]),_:2},1032,["props"]),a(i,{key:"nama_proyek",props:t},{default:e(()=>[r(o(t.row.nama_proyek),1)]),_:2},1032,["props"]),a(i,{key:"keperluan",props:t},{default:e(()=>[r(o(t.row.keperluan),1)]),_:2},1032,["props"]),a(i,{key:"jumlah_piutang",props:t},{default:e(()=>[r(o(n(m)(n(c)(t.row.jumlah_piutang))),1)]),_:2},1032,["props"]),a(T,null,{default:e(()=>[r("Lihat Detail")]),_:1})]),_:2},1032,["props","onClick"])]),"bottom-row":e(()=>[a(y,{"no-hover":"",class:"text-weight-bold text-right"},{default:e(()=>[a(i,{colspan:"3"},{default:e(()=>[r("Total")]),_:1}),a(i,null,{default:e(()=>[r(o(n(m)(F.value.piutang)),1)]),_:1})]),_:1})]),_:1},8,["fullscreen","rows"])]))}});const me=Q({__name:"KepalaDivisiPage",props:{proyek:{},piutang:{},overview:{},options:{}},setup(x){const k=[{label:"Dashboard",url:"#"},{label:"Overview",url:"#"}];return(d,f)=>{const l=J("in-link");return p(),b(v,null,[a(n(L),{title:"Dashboard"}),a(O,null,{breadcrumbs:e(()=>[a(N,{align:"left"},{default:e(()=>[(p(),b(v,null,$(k,s=>V(a(R,{key:s.label,label:s.label},null,8,["label"]),[[l,s.url]])),64))]),_:1})]),default:e(()=>[a(n(A),{overview:d.overview},null,8,["overview"]),a(n(W),{rows:d.proyek},null,8,["rows"]),a(n(Y),{rows:d.piutang,options:d.options},null,8,["rows","options"])]),_:1})],64)}}});export{me as default};
