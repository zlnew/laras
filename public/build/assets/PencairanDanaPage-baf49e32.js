import{l as L,Q as V,a as w,b as E,_ as M,c as J}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-9d306835.js";import{d as S,l as Z,j as z,o as u,e as P,a as e,w as a,g as D,c as Q,u as l,O as G,h as m,A as T,b as s,F as x,k as H,t as d,z as W,K as X,T as Y,p as ee,q as F,s as j,i as ae,N as q,P as B,f as ne,an as le,v as oe,x as te,m as re,Z as se,n as ie}from"./app-1e8a9b5f.js";import{Q as O}from"./QTooltip-82b68aed.js";import{a as N,b as g,c as ue,d as de,Q as R}from"./QTable-2bde6741.js";import{Q as K,_ as pe}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-d49c8ba4.js";import{u as ce}from"./use-quasar-254a32fc.js";import{u as U,Q as me}from"./use-dialog-plugin-component-3afc8619.js";import{Q as fe}from"./QForm-b5dff3de.js";import{m as _e}from"./options-4b88285e.js";import"./QImg-678f09c2.js";import"./money-915f7772.js";const ke={class:"q-pa-md"},ge={class:"q-gutter-sm"},be=S({__name:"PencairanDanaTable",props:{rows:{},formOptions:{}},setup(h){const p=h,f=Z(()=>p.rows.map(r=>{const t=r.status_pencairan==="400"?"Closed":"Open";return{...r,status:t}})),b=ce();function y(r){b.dialog({component:pe,componentProps:{proyek:r}})}function c(){b.dialog({component:we,componentProps:{options:p.formOptions}})}const v=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"jenis_transaksi",label:"Jenis Transaksi",field:"jenis_transaksi",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"left",sortable:!0}],_=z(!1);function $(){_.value=!_.value}return(r,t)=>(u(),P("div",ke,[e(l(ue),{ref:"table",flat:"",bordered:"","row-key":"id_rap",title:"List Pencairan Dana",rows:f.value,columns:v,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:_.value},{"top-right":a(()=>[D("div",ge,[Object.keys(r.$page.props.query).length?(u(),Q(m,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:t[0]||(t[0]=n=>l(G).visit(r.route("pencairan_dana")))})):T("",!0),e(m,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:c}),e(m,{flat:"",dense:"",icon:_.value?"fullscreen_exit":"fullscreen",onClick:$},{default:a(()=>[e(O,null,{default:a(()=>[s("Fullscreen Mode")]),_:1})]),_:1},8,["icon"])])]),header:a(n=>[e(N,{props:n},{default:a(()=>[(u(!0),P(x,null,H(n.cols,k=>(u(),Q(de,{key:k.name,props:n,style:{"font-weight":"bold"}},{default:a(()=>[s(d(k.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(n=>[e(N,{props:n},{default:a(()=>[e(g,{key:"index",props:n},{default:a(()=>[s(d(++n.rowIndex),1)]),_:2},1032,["props"]),e(g,{key:"nama_proyek",props:n},{default:a(()=>[e(m,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:n.row.nama_proyek,onClick:k=>y(n.row)},{default:a(()=>[e(O,{anchor:"bottom middle",self:"top middle"},{default:a(()=>[s(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(g,{key:"tahun_anggaran",props:n},{default:a(()=>[s(d(n.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(g,{key:"keperluan",props:n},{default:a(()=>[s(d(n.row.keperluan),1)]),_:2},1032,["props"]),e(g,{key:"jenis_transaksi",props:n},{default:a(()=>[s(d(n.row.jenis_transaksi),1)]),_:2},1032,["props"]),e(g,{key:"status",props:n},{default:a(()=>[l(L)(n.row.status_aktivitas)?(u(),Q(m,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:a(()=>[e(O,null,{default:a(()=>[s("Ditolak")]),_:1})]),_:1})):T("",!0),e(l(W),{href:r.route("detail_pencairan_dana",n.row.id_pencairan_dana)},{default:a(()=>[e(K,{color:n.row.status_pencairan==400?"red":"primary",label:n.row.status_pencairan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),ye=D("div",{class:"text-h6"},"Pencarian Pengajuan Dana",-1),he={class:"q-gutter-md"},ve={class:"text-primary"},we=S({__name:"PencairanDanaSearchDialog",props:{options:{}},emits:[...U.emits],setup(h){const p=h,{dialogRef:f,onDialogOK:b,onDialogCancel:y,onDialogHide:c}=U(),v=z(p.options.currentProyek);function _(k,i){i(()=>{v.value=_e(k,p.options.currentProyek,["nama_proyek","tahun_anggaran"])})}const r=X().props.query,t=Y({id_proyek:r.id_proyek,status_pencairan:r.status_pencairan,ditolak:!1});function n(){t.get(route("pencairan_dana"),{onSuccess:()=>{b()}})}return(k,i)=>(u(),Q(ee,{ref_key:"dialogRef",ref:f,onHide:l(c)},{default:a(()=>[e(te,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(F,{class:"row items-center q-pb-none"},{default:a(()=>[ye,e(me),e(m,{flat:"",round:"",dense:"",icon:"close",onClick:l(y)},null,8,["onClick"])]),_:1}),e(j),e(fe,{onSubmit:ae(n,["prevent"])},{default:a(()=>[e(F,{class:"scroll"},{default:a(()=>[D("div",he,[e(R,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:l(t).id_proyek,"onUpdate:modelValue":i[0]||(i[0]=o=>l(t).id_proyek=o),"option-value":"id_proyek","option-label":o=>`${o.nama_proyek} | ${o.tahun_anggaran}`,options:v.value,error:!!l(t).errors.id_proyek,"error-message":l(t).errors.id_proyek,onFilter:_},{option:a(({itemProps:o,opt:C,selected:A,toggleOption:I})=>[e(V,q(B(o)),{default:a(()=>[e(w,{side:""},{default:a(()=>[e(ne,{size:"sm","model-value":A,"onUpdate:modelValue":Qe=>I(C)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(w,null,{default:a(()=>[D("strong",ve,d(C.nama_proyek),1),s(" "+d(C.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(V,null,{default:a(()=>[e(w,{class:"text-grey"},{default:a(()=>[s(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(R,{outlined:"",clearable:"","fill-input":"",label:"Status Pencairan Dana",modelValue:l(t).status_pencairan,"onUpdate:modelValue":i[1]||(i[1]=o=>l(t).status_pencairan=o),options:[100,400]},{"selected-item":a(o=>[e(K,{color:o.opt==400?"red":"primary",label:o.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:a(o=>[e(V,q(B(o.itemProps)),{default:a(()=>[e(w,null,{default:a(()=>[s(d(o.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),e(le,{"checked-icon":"check","unchecked-icon":"clear",label:"Hanya tampilkan Pencairan Dana yang ditolak",modelValue:l(t).ditolak,"onUpdate:modelValue":i[2]||(i[2]=o=>l(t).ditolak=o)},null,8,["modelValue"])])]),_:1}),e(j),e(oe,{align:"right"},{default:a(()=>[e(m,{flat:"",type:"submit",label:"Search",color:"primary",loading:l(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),qe=S({__name:"PencairanDanaPage",props:{pencairanDana:{},formOptions:{}},setup(h){const p=[{label:"Keuangan",url:"#"},{label:"Pencairan Dana",url:"#"}];return(f,b)=>{const y=re("in-link");return u(),P(x,null,[e(l(se),{title:"Pencairan Dana"}),e(M,null,{breadcrumbs:a(()=>[e(E,{align:"left"},{default:a(()=>[(u(),P(x,null,H(p,c=>ie(e(J,{key:c.label,label:c.label},null,8,["label"]),[[y,c.url]])),64))]),_:1})]),default:a(()=>[e(l(be),{rows:f.pencairanDana,"form-options":f.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{qe as default};
