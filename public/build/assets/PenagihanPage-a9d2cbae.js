import{d as W,m as le,i as se,n as re,f as ie,g as ue,Q as w,a as _,b as pe,_ as de,c as ce}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-f8fe08d2.js";import{d as U,j as R,o as c,e as q,a as e,w as a,u as o,c as b,h as u,O as me,A as H,F as L,k as ee,b as i,t as v,z as fe,s as Q,K as _e,T,p as N,q as O,i as j,g as V,G as K,H as E,f as ge,an as ke,v as I,x as B,Q as ae,D as ye,m as he,Z as be,n as ve}from"./app-651f5c8c.js";import{a as X,b as F,c as we,d as Ce,Q as M}from"./QTable-db3b72cd.js";import{Q as z}from"./QTooltip-b7a3ad90.js";import{Q as oe,_ as Pe}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-7b2e019a.js";import{u as Ve}from"./use-quasar-1175def4.js";import{u as D,Q as G}from"./use-dialog-plugin-component-e23f8103.js";import{Q as Y}from"./QForm-5f0747c8.js";import{m as Z,f as J}from"./options-964f32b0.js";import"./QImg-3654d7aa.js";import"./money-3074a8fc.js";const $e={class:"q-pa-md"},xe={key:1,class:"text-h6"},Qe=U({__name:"PenagihanTable",props:{rows:{},formOptions:{}},setup($){const r=$,p=Ve();function x(t){p.dialog({component:Pe,componentProps:{proyek:t}})}function C(){p.dialog({component:Fe,componentProps:{options:r.formOptions}})}function g(){p.dialog({component:qe,componentProps:{options:r.formOptions}}).onOk(t=>{p.notify({type:t.type,message:t.message,position:"top"})})}function k(t){p.dialog({component:Te,componentProps:{penagihan:t,options:r.formOptions}}).onOk(m=>{p.notify({type:m.type,message:m.message,position:"top"})})}function y(t){p.dialog({component:Be,componentProps:{id_penagihan:t}}).onOk(m=>{p.notify({type:m.type,message:m.message,position:"top"})})}const f=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"kas_masuk",label:"Kas Masuk",field:"kas_masuk",align:"left",sortable:!0},{name:"status",label:"Status",field:"status_penagihan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],P=R(!1);function S(){P.value=!P.value}return(t,m)=>(c(),q("div",$e,[e(we,{flat:"",bordered:"","row-key":"id_rap",rows:t.rows,columns:f,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:P.value},{"top-left":a(()=>[o(W)("create & modify penagihan")?(c(),b(u,{key:0,"no-caps":"",label:"Tambah Penagihan",icon:"add",color:"primary",onClick:g})):(c(),q("div",xe,"List Penagihan/Invoice"))]),"top-right":a(()=>[Object.keys(t.$page.props.query).length?(c(),b(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:m[0]||(m[0]=n=>o(me).visit(t.route("penagihan")))})):H("",!0),e(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:C}),e(u,{flat:"",dense:"",icon:P.value?"fullscreen_exit":"fullscreen",onClick:S,class:"q-ml-md"},null,8,["icon"])]),header:a(n=>[e(X,{props:n},{default:a(()=>[(c(!0),q(L,null,ee(n.cols,l=>(c(),b(Ce,{key:l.name,props:n,style:{"font-weight":"bold"}},{default:a(()=>[i(v(l.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(n=>[e(X,{props:n},{default:a(()=>[e(F,{key:"index",props:n},{default:a(()=>[i(v(++n.rowIndex),1)]),_:2},1032,["props"]),e(F,{key:"nama_proyek",props:n},{default:a(()=>[e(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:n.row.nama_proyek,onClick:l=>x(n.row)},{default:a(()=>[e(z,{anchor:"bottom middle",self:"top middle"},{default:a(()=>[i(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),e(F,{key:"tahun_anggaran",props:n},{default:a(()=>[i(v(n.row.tahun_anggaran),1)]),_:2},1032,["props"]),e(F,{key:"keperluan",props:n},{default:a(()=>[i(v(n.row.keperluan),1)]),_:2},1032,["props"]),e(F,{key:"kas_masuk",props:n},{default:a(()=>[i(v(n.row.kas_masuk),1)]),_:2},1032,["props"]),e(F,{key:"status",props:n},{default:a(()=>[o(le)(n.row.status_aktivitas)?(c(),b(u,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:a(()=>[e(z,null,{default:a(()=>[i("Ditolak")]),_:1})]),_:1})):H("",!0),e(o(fe),{href:t.route("detail_penagihan",n.row.id_penagihan)},{default:a(()=>[e(oe,{color:n.row.status_penagihan==400?"red":"primary",label:n.row.status_penagihan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"]),e(F,{key:"actions",props:n},{default:a(()=>[o(se)()||o(W)("create & modify penagihan")&&o(re)(n.row.status_penagihan)?(c(),b(u,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:a(()=>[e(ie,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(ue,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[e(w,{clickable:""},{default:a(()=>[e(_,{onClick:l=>k(n.row)},{default:a(()=>[i(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e(Q),e(w,{clickable:""},{default:a(()=>[e(_,{class:"text-red",onClick:l=>y(n.row.id_penagihan)},{default:a(()=>[i(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(c(),b(u,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:a(()=>[e(z,null,{default:a(()=>[i("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),Oe=V("div",{class:"text-h6"},"Pencarian Penagihan",-1),De={class:"q-gutter-md"},Se={class:"text-primary"},Fe=U({__name:"PenagihanSearchDialog",props:{options:{}},emits:[...D.emits],setup($){const r=$,{dialogRef:p,onDialogOK:x,onDialogCancel:C,onDialogHide:g}=D(),k=["Utang","Setoran Modal"],y=R(r.options.currentProyek),f=R(k);function P(s,h){h(()=>{y.value=Z(s,r.options.currentProyek,["nama_proyek","tahun_anggaran"])})}function S(s,h){h(()=>{f.value=J(s,k)})}const m=_e().props.query,n=T({id_proyek:m.id_proyek,kas_masuk:m.kas_masuk,status_penagihan:m.status_penagihan,ditolak:!1});function l(){n.get(route("penagihan"),{onSuccess:()=>x()})}return(s,h)=>(c(),b(N,{ref_key:"dialogRef",ref:p,onHide:o(g)},{default:a(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(O,{class:"row items-center q-pb-none"},{default:a(()=>[Oe,e(G),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(C)},null,8,["onClick"])]),_:1}),e(Q),e(Y,{onSubmit:j(l,["prevent"])},{default:a(()=>[e(O,{class:"scroll"},{default:a(()=>[V("div",De,[e(M,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"",multiple:"","hide-bottom-space":"","input-debounce":"500",label:"Proyek",modelValue:o(n).id_proyek,"onUpdate:modelValue":h[0]||(h[0]=d=>o(n).id_proyek=d),"option-value":"id_proyek","option-label":d=>`${d.nama_proyek} | ${d.tahun_anggaran}`,options:y.value,error:!!o(n).errors.id_proyek,"error-message":o(n).errors.id_proyek,onFilter:P},{option:a(({itemProps:d,opt:A,selected:ne,toggleOption:te})=>[e(w,K(E(d)),{default:a(()=>[e(_,{side:""},{default:a(()=>[e(ge,{size:"sm","model-value":ne,"onUpdate:modelValue":Ae=>te(A)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(_,null,{default:a(()=>[V("strong",Se,v(A.nama_proyek),1),i(" "+v(A.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(w,null,{default:a(()=>[e(_,{class:"text-grey"},{default:a(()=>[i(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(M,{outlined:"",clearable:"","use-input":"","use-chips":"","hide-bottom-space":"","input-debounce":"500",label:"Kas Masuk",modelValue:o(n).kas_masuk,"onUpdate:modelValue":h[1]||(h[1]=d=>o(n).kas_masuk=d),options:f.value,error:!!o(n).errors.kas_masuk,"error-message":o(n).errors.kas_masuk,onFilter:S},{"no-option":a(()=>[e(w,null,{default:a(()=>[e(_,{class:"text-grey"},{default:a(()=>[i(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),e(M,{outlined:"",clearable:"","fill-input":"",label:"Status Penagihan",modelValue:o(n).status_penagihan,"onUpdate:modelValue":h[2]||(h[2]=d=>o(n).status_penagihan=d),options:[100,400]},{"selected-item":a(d=>[e(oe,{color:d.opt==400?"red":"primary",label:d.opt==400?"Closed":"Open"},null,8,["color","label"])]),option:a(d=>[e(w,K(E(d.itemProps)),{default:a(()=>[e(_,null,{default:a(()=>[i(v(d.opt==400?"Closed":"Open"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),e(ke,{"checked-icon":"check","unchecked-icon":"clear",label:"Hanya tampilkan Penagihan yang ditolak",modelValue:o(n).ditolak,"onUpdate:modelValue":h[3]||(h[3]=d=>o(n).ditolak=d)},null,8,["modelValue"])])]),_:1}),e(Q),e(I,{align:"right"},{default:a(()=>[e(u,{flat:"",type:"submit",label:"Search",color:"primary",loading:o(n).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Me=V("div",{class:"text-h6"},"Tambah Penagihan/Invoice",-1),Re={class:"q-gutter-md"},Ue={class:"text-primary"},qe=U({__name:"PenagihanCreateDialog",props:{options:{}},emits:[...D.emits],setup($){const r=$,{dialogRef:p,onDialogOK:x,onDialogCancel:C,onDialogHide:g}=D(),k=["Utang","Setoran Modal"],y=R(r.options.proyek),f=R(k);function P(n,l){l(()=>{y.value=Z(n,r.options.proyek,["nama_proyek","tahun_anggaran"])})}function S(n,l){l(()=>{f.value=J(n,k)})}const t=T({id_proyek:null,keperluan:null,kas_masuk:null});function m(){t.post(route("penagihan.store"),{onSuccess:n=>{x({type:"positive",message:n.props.flash.success})}})}return(n,l)=>(c(),b(N,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(g)},{default:a(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(O,{class:"row items-center q-pb-none"},{default:a(()=>[Me,e(G),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(C)},null,8,["onClick"])]),_:1}),e(Q),e(Y,{onSubmit:j(m,["prevent"])},{default:a(()=>[e(O,{class:"scroll"},{default:a(()=>[V("div",Re,[e(M,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:o(t).id_proyek,"onUpdate:modelValue":l[0]||(l[0]=s=>o(t).id_proyek=s),"option-value":"id_proyek","option-label":s=>`${s.nama_proyek} | ${s.tahun_anggaran}`,options:y.value,error:!!o(t).errors.id_proyek,"error-message":o(t).errors.id_proyek,onFilter:P},{option:a(s=>[e(w,K(E(s.itemProps)),{default:a(()=>[e(_,null,{default:a(()=>[V("strong",Ue,v(s.opt.nama_proyek),1),i(" "+v(s.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(w,null,{default:a(()=>[e(_,{class:"text-grey"},{default:a(()=>[i(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(ae,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:o(t).keperluan,"onUpdate:modelValue":l[1]||(l[1]=s=>o(t).keperluan=s),error:!!o(t).errors.keperluan,"error-message":o(t).errors.keperluan},null,8,["modelValue","error","error-message"]),e(M,{outlined:"",clearable:"","use-input":"","use-chips":"","hide-bottom-space":"","input-debounce":"500",label:"Kas Masuk",modelValue:o(t).kas_masuk,"onUpdate:modelValue":l[2]||(l[2]=s=>o(t).kas_masuk=s),options:f.value,error:!!o(t).errors.kas_masuk,"error-message":o(t).errors.kas_masuk,onFilter:S},{"no-option":a(()=>[e(w,null,{default:a(()=>[e(_,{class:"text-grey"},{default:a(()=>[i(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"])])]),_:1}),e(Q),e(I,{align:"right"},{default:a(()=>[o(t).hasErrors?(c(),b(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[3]||(l[3]=s=>o(t).clearErrors())})):H("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:l[4]||(l[4]=s=>o(t).reset())}),e(u,{flat:"",type:"submit",label:"Submit",color:"primary",loading:o(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),He=V("div",{class:"text-h6"},"Edit Penagihan/Invoice",-1),Ke={class:"q-gutter-md"},Ee={class:"text-primary"},Te=U({__name:"PenagihanEditDialog",props:{penagihan:{},options:{}},emits:[...D.emits],setup($){const r=$,{dialogRef:p,onDialogOK:x,onDialogCancel:C,onDialogHide:g}=D(),k=["Utang","Setoran Modal"],y=R(r.options.proyek),f=R(k);function P(n,l){l(()=>{y.value=Z(n,r.options.proyek,["nama_proyek","tahun_anggaran"])})}function S(n,l){l(()=>{f.value=J(n,k)})}const t=T({id_proyek:r.penagihan.id_proyek,keperluan:r.penagihan.keperluan,kas_masuk:r.penagihan.kas_masuk});function m(){t.patch(route("penagihan.update",r.penagihan.id_penagihan),{onSuccess:n=>{x({type:"positive",message:n.props.flash.success})}})}return(n,l)=>(c(),b(N,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(g)},{default:a(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:a(()=>[e(O,{class:"row items-center q-pb-none"},{default:a(()=>[He,e(G),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(C)},null,8,["onClick"])]),_:1}),e(Q),e(Y,{onSubmit:j(m,["prevent"])},{default:a(()=>[e(O,{class:"scroll"},{default:a(()=>[V("div",Ke,[e(M,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Pilih Proyek",modelValue:o(t).id_proyek,"onUpdate:modelValue":l[0]||(l[0]=s=>o(t).id_proyek=s),"option-value":"id_proyek","option-label":s=>`${s.nama_proyek} | ${s.tahun_anggaran}`,options:y.value,error:!!o(t).errors.id_proyek,"error-message":o(t).errors.id_proyek,onFilter:P},{option:a(s=>[e(w,K(E(s.itemProps)),{default:a(()=>[e(_,null,{default:a(()=>[V("strong",Ee,v(s.opt.nama_proyek),1),i(" "+v(s.opt.tahun_anggaran),1)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[e(w,null,{default:a(()=>[e(_,{class:"text-grey"},{default:a(()=>[i(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","option-label","options","error","error-message"]),e(ae,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keperluan",modelValue:o(t).keperluan,"onUpdate:modelValue":l[1]||(l[1]=s=>o(t).keperluan=s),error:!!o(t).errors.keperluan,"error-message":o(t).errors.keperluan},null,8,["modelValue","error","error-message"]),e(M,{outlined:"",clearable:"","use-input":"","use-chips":"","hide-bottom-space":"","input-debounce":"500",label:"Kas Masuk",modelValue:o(t).kas_masuk,"onUpdate:modelValue":l[2]||(l[2]=s=>o(t).kas_masuk=s),options:f.value,error:!!o(t).errors.kas_masuk,"error-message":o(t).errors.kas_masuk,onFilter:S},{"no-option":a(()=>[e(w,null,{default:a(()=>[e(_,{class:"text-grey"},{default:a(()=>[i(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"])])]),_:1}),e(Q),e(I,{align:"right"},{default:a(()=>[o(t).hasErrors?(c(),b(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[3]||(l[3]=s=>o(t).clearErrors())})):H("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:l[4]||(l[4]=s=>o(t).reset())}),e(u,{flat:"",type:"submit",label:"Update",color:"primary",loading:o(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ne=V("div",{class:"text-h6"},"Delete Confirmation",-1),Ie=V("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),Be=U({__name:"PenagihanDeleteDialog",props:{id_penagihan:{}},emits:[...D.emits],setup($){const r=$,{dialogRef:p,onDialogOK:x,onDialogCancel:C,onDialogHide:g}=D(),k=T({id_penagihan:r.id_penagihan});function y(){k.delete(route("penagihan.destroy",r.id_penagihan),{onSuccess:f=>{x({type:"positive",message:f.props.flash.success})}})}return(f,P)=>(c(),b(N,{ref_key:"dialogRef",ref:p,"no-backdrop-dismiss":!0,onHide:o(g)},{default:a(()=>[e(B,null,{default:a(()=>[e(O,{class:"row items-center q-pb-none"},{default:a(()=>[Ne]),_:1}),e(Q),e(O,{class:"row items-center"},{default:a(()=>[e(ye,{icon:"dangerous",color:"red","text-color":"white"}),Ie]),_:1}),e(I,{align:"right"},{default:a(()=>[e(u,{flat:"",label:"Cancel",color:"primary",onClick:o(C)},null,8,["onClick"]),e(u,{flat:"",label:"Yes, delete it",color:"red",onClick:y})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),oa=U({__name:"PenagihanPage",props:{penagihan:{},formOptions:{}},setup($){const r=[{label:"Keuangan",url:"#"},{label:"Penagihan/Invoice",url:"#"}];return(p,x)=>{const C=he("in-link");return c(),q(L,null,[e(o(be),{title:"Penagihan/Invoice"}),e(de,null,{breadcrumbs:a(()=>[e(pe,{align:"left"},{default:a(()=>[(c(),q(L,null,ee(r,g=>ve(e(ce,{label:g.label},null,8,["label"]),[[C,g.url]])),64))]),_:1})]),default:a(()=>[e(o(Qe),{rows:p.penagihan,"form-options":p.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{oa as default};
