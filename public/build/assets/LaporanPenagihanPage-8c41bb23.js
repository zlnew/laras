import{l as R,b as E,_ as I,c as S}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-84cf796f.js";import{d as F,l as V,j as b,W as J,o as d,e as y,a,w as n,g as z,c as j,u as l,O as m,h as u,A as B,b as r,F as T,k as L,t as p,i as _,z as A,m as M,Z as K,n as W}from"./app-456b7b81.js";import{Q as v}from"./QTooltip-5a592d07.js";import{a as D,b as s,c as Z,d as G}from"./QTable-777e4ca6.js";import{Q as H,_ as U}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-10c56c26.js";import{u as X}from"./use-quasar-53e0b1d3.js";import{t as $,a as Q}from"./money-915f7772.js";import{c as Y,e as ee,t as ae,_ as ne}from"./LaporanPengajuanDanaSearchDialog.vue_vue_type_script_setup_true_lang-1b78c362.js";import"./QImg-62f985a3.js";import"./use-dialog-plugin-component-b08011d3.js";import"./QForm-1fc4bb1a.js";import"./options-4b88285e.js";const le={class:"q-pa-md"},te={class:"q-gutter-sm"},oe=F({__name:"LaporanPenagihanTable",props:{rows:{},formOptions:{}},setup(O){const f=O,g=V(()=>f.rows.map(t=>{const o=t.status_penagihan==="400"?"Closed":"Open";return{...t,status:o}})),w=X();function C(t){w.dialog({component:U,componentProps:{proyek:t}})}function c(){w.dialog({component:ne,componentProps:{options:f.formOptions}})}const N=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"keperluan",label:"Keperluan",field:"keperluan",align:"left",sortable:!0},{name:"jumlah_penagihan",label:"Jumlah Penagihan",field:"jumlah_penagihan",align:"right",sortable:!0},{name:"jumlah_diterima",label:"Jumlah Diterima",field:"jumlah_diterima",align:"right",sortable:!0},{name:"sisa_penagihan",label:"Sisa Penagihan",field:"sisa_penagihan",align:"right",sortable:!0},{name:"status",label:"Status",field:"status_pencairan",align:"left",sortable:!0}],h=b(!1);function q(){h.value=!h.value}const k=b(),P=b(),x=b();return J(()=>{var t,o,e;P.value={columns:(t=k.value)==null?void 0:t.columns,body:{rows:(o=k.value)==null?void 0:o.computedRows,props:["index","nama_proyek","tahun_anggaran","keperluan","kas_masuk","jumlah_penagihan","jumlah_diterima","sisa_penagihan","status"]}},x.value=Y({rows:(e=k.value)==null?void 0:e.computedRows,props:["nama_proyek","tahun_anggaran","keperluan","kas_masuk","jumlah_penagihan","jumlah_diterima","sisa_penagihan","status"]})}),(t,o)=>(d(),y("div",le,[a(l(Z),{ref_key:"table",ref:k,flat:"",bordered:"","row-key":"id_rab",title:"Laporan Penagihan/Invoice",rows:g.value,columns:N,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:h.value},{"top-right":n(()=>[z("div",te,[Object.keys(t.$page.props.query).length?(d(),j(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:o[0]||(o[0]=e=>l(m).visit(t.route("laporan.penagihan")))})):B("",!0),a(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:c}),a(u,{flat:"",dense:"",label:"xls",color:"green",onClick:o[1]||(o[1]=e=>l(ee)().exportDataFromJSON({data:x.value,name:"penagihan",type:"xls"}))},{default:n(()=>[a(v,null,{default:n(()=>[r("Export to xls")]),_:1})]),_:1}),a(u,{flat:"",dense:"",label:"pdf",color:"red-8",onClick:o[2]||(o[2]=e=>l(ae)({filename:"penagihan",header:"Penagihan",columns:P.value.columns,body:P.value.body}))},{default:n(()=>[a(v,null,{default:n(()=>[r("Export to pdf")]),_:1})]),_:1}),a(u,{flat:"",dense:"",icon:h.value?"fullscreen_exit":"fullscreen",onClick:q,class:"q-ml-md"},null,8,["icon"])])]),header:n(e=>[a(D,{props:e},{default:n(()=>[(d(!0),y(T,null,L(e.cols,i=>(d(),j(G,{key:i.name,props:e,style:{"font-weight":"bold"}},{default:n(()=>[r(p(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(e=>[a(D,{props:e},{default:n(()=>[a(s,{key:"index",props:e},{default:n(()=>[r(p(++e.rowIndex),1)]),_:2},1032,["props"]),a(s,{key:"nama_proyek",props:e},{default:n(()=>[a(u,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:e.row.nama_proyek,onClick:i=>C(e.row)},{default:n(()=>[a(v,{anchor:"bottom middle",self:"top middle"},{default:n(()=>[r(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),a(s,{key:"tahun_anggaran",props:e,onClick:_(i=>l(m).visit(t.route("detail_penagihan",e.row.id_penagihan)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(p(e.row.tahun_anggaran),1)]),_:2},1032,["props","onClick"]),a(s,{key:"keperluan",props:e,onClick:_(i=>l(m).visit(t.route("detail_penagihan",e.row.id_penagihan)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(p(e.row.keperluan),1)]),_:2},1032,["props","onClick"]),a(s,{key:"jumlah_penagihan",props:e,onClick:_(i=>l(m).visit(t.route("detail_penagihan",e.row.id_penagihan)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(p(l($)(l(Q)(e.row.jumlah_penagihan))),1)]),_:2},1032,["props","onClick"]),a(s,{key:"jumlah_diterima",props:e,onClick:_(i=>l(m).visit(t.route("detail_penagihan",e.row.id_penagihan)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(p(l($)(l(Q)(e.row.jumlah_diterima))),1)]),_:2},1032,["props","onClick"]),a(s,{key:"sisa_penagihan",props:e,onClick:_(i=>l(m).visit(t.route("detail_penagihan",e.row.id_penagihan)),["prevent"]),style:{cursor:"pointer"}},{default:n(()=>[r(p(l($)(l(Q)(e.row.sisa_penagihan))),1)]),_:2},1032,["props","onClick"]),a(s,{key:"status",props:e},{default:n(()=>[l(R)(e.row.status_aktivitas)?(d(),j(u,{key:0,flat:"",dense:"",round:"",color:"grey-6",icon:"warning",size:"sm"},{default:n(()=>[a(v,null,{default:n(()=>[r("Ditolak")]),_:1})]),_:1})):B("",!0),a(l(A),{href:t.route("detail_penagihan",e.row.id_penagihan)},{default:n(()=>[a(H,{color:e.row.status_penagihan==400?"red":"primary",label:e.row.status_penagihan==400?"Closed":"Open"},null,8,["color","label"])]),_:2},1032,["href"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),ke=F({__name:"LaporanPenagihanPage",props:{penagihan:{},formOptions:{}},setup(O){const f=[{label:"Reports",url:"#"},{label:"Penagihan/Invoice",url:"#"}];return(g,w)=>{const C=M("in-link");return d(),y(T,null,[a(l(K),{title:"Laporan Penagihan/Invoice"}),a(I,null,{breadcrumbs:n(()=>[a(E,{align:"left"},{default:n(()=>[(d(),y(T,null,L(f,c=>W(a(S,{key:c.label,label:c.label},null,8,["label"]),[[C,c.url]])),64))]),_:1})]),default:n(()=>[a(l(oe),{rows:g.penagihan,"form-options":g.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{ke as default};
