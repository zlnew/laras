import{f as W,g as X,Q as h,a as w,b as ee,_ as le,c as oe}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-601a9fc9.js";import{d as S,j as q,o as p,e as P,a as e,w as l,h as u,c as V,u as o,O as se,A as z,F as N,k as Y,b as y,t as $,g as v,s as x,K as ae,T as E,p as O,q as U,i as T,Q as C,N as A,P as B,f as re,v as F,x as H,D as te,m as ne,Z as ie,n as ue}from"./app-995ac512.js";import{a as L,b as R,e as de,c as me,d as ce,Q as K}from"./QTable-c8ac225f.js";import{u as pe}from"./use-quasar-5794ceca.js";import{u as Q,Q as I}from"./use-dialog-plugin-component-e6d16b32.js";import{Q as J}from"./QForm-d4e0fa4d.js";import{m as j}from"./options-4b88285e.js";import"./QImg-4e5f03b9.js";const fe={class:"q-pa-md"},ge={class:"text-blue-grey-8"},be=S({__name:"UsersTable",props:{rows:{},roles:{}},setup(g){const n=g,i=pe();function b(){i.dialog({component:ve,componentProps:{roles:n.roles}})}function f(){i.dialog({component:Ce,componentProps:{roles:n.roles}}).onOk(t=>{i.notify({type:t.type,message:t.message,position:"top"})})}function d(t){i.dialog({component:xe,componentProps:{user:t,roles:n.roles}}).onOk(r=>{i.notify({type:r.type,message:r.message,position:"top"})})}function c(t){i.dialog({component:De,componentProps:{id:t}}).onOk(r=>{i.notify({type:r.type,message:r.message,position:"top"})})}const k=[{name:"index",label:"#",field:"index"},{name:"name",label:"User",field:"name",align:"left",sortable:!0},{name:"role_name",label:"Role/Jabatan",field:"role_name",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],s=q(!1);function _(){s.value=!s.value}return(t,r)=>(p(),P("div",fe,[e(me,{flat:"",bordered:"","row-key":"id",rows:t.rows,columns:k,"rows-per-page-options":[5,10,15,20,25,50,0],fullscreen:s.value},{"top-left":l(()=>[e(u,{"no-caps":"",label:"Tambah User",icon:"add",color:"primary",onClick:f})]),"top-right":l(()=>[Object.keys(t.$page.props.query).length?(p(),V(u,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:r[0]||(r[0]=a=>o(se).visit(t.route("users")))})):z("",!0),e(u,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:b}),e(u,{flat:"",dense:"",icon:s.value?"fullscreen_exit":"fullscreen",onClick:_,class:"q-ml-md"},null,8,["icon"])]),header:l(a=>[e(L,{props:a},{default:l(()=>[(p(!0),P(N,null,Y(a.cols,m=>(p(),V(ce,{key:m.name,props:a,style:{"font-weight":"bold"}},{default:l(()=>[y($(m.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(a=>[e(L,{props:a},{default:l(()=>[e(R,{key:"index",props:a},{default:l(()=>[y($(++a.rowIndex),1)]),_:2},1032,["props"]),e(R,{key:"name",props:a},{default:l(()=>[v("div",null,$(a.row.name),1),v("div",ge,$(a.row.email),1)]),_:2},1032,["props"]),e(R,{key:"role_name",props:a,class:"text-capitalize"},{default:l(()=>[e(de,{size:"sm",label:a.row.role_name,ripple:!1},null,8,["label"])]),_:2},1032,["props"]),e(R,{key:"actions",props:a},{default:l(()=>[e(u,{dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:l(()=>[e(W,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(X,{dense:"",style:{"min-width":"100px"}},{default:l(()=>[e(h,{clickable:""},{default:l(()=>[e(w,{onClick:m=>d(a.row)},{default:l(()=>[y(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e(x),e(h,{clickable:""},{default:l(()=>[e(w,{class:"text-red",onClick:m=>c(a.row.id)},{default:l(()=>[y(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),_e=v("div",{class:"text-h6"},"Pencarian User",-1),ye={class:"q-gutter-md"},ve=S({__name:"UsersSearchDialog",props:{roles:{}},emits:[...Q.emits],setup(g){const n=g,{dialogRef:i,onDialogOK:b,onDialogCancel:f,onDialogHide:d}=Q(),c=q(n.roles);function k(a,m){m(()=>{c.value=j(a,n.roles,["name"])})}const _=ae().props.query,t=E({name:_.name,email:_.email,role:_.role});function r(){t.get(route("users"),{onSuccess:a=>{b({type:"positive",message:a.props.flash.success})}})}return(a,m)=>(p(),V(O,{ref_key:"dialogRef",ref:i,"no-backdrop-dismiss":!0,onHide:o(d)},{default:l(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:l(()=>[e(U,{class:"row items-center q-pb-none"},{default:l(()=>[_e,e(I),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(f)},null,8,["onClick"])]),_:1}),e(x),e(J,{onSubmit:T(r,["prevent"])},{default:l(()=>[e(U,{class:"scroll"},{default:l(()=>[v("div",ye,[e(C,{outlined:"",clearable:"","hide-bottom-space":"",label:"Name",modelValue:o(t).name,"onUpdate:modelValue":m[0]||(m[0]=D=>o(t).name=D)},null,8,["modelValue"]),e(C,{outlined:"",clearable:"","hide-bottom-space":"",type:"email",label:"Email Address",modelValue:o(t).email,"onUpdate:modelValue":m[1]||(m[1]=D=>o(t).email=D)},null,8,["modelValue"]),e(K,{outlined:"",clearable:"","use-input":"","use-chips":"",multiple:"","emit-value":"","map-options":"","input-debounce":"500",label:"Role/Jabatan",modelValue:o(t).role,"onUpdate:modelValue":m[2]||(m[2]=D=>o(t).role=D),"option-value":"name","option-label":"name",options:c.value,onFilter:k,class:"text-capitalize"},{option:l(({itemProps:D,opt:M,selected:Z,toggleOption:G})=>[e(h,A(B(D)),{default:l(()=>[e(w,{side:""},{default:l(()=>[e(re,{size:"sm","model-value":Z,"onUpdate:modelValue":$e=>G(M)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(w,{class:"text-capitalize"},{default:l(()=>[y($(M.name),1)]),_:2},1024)]),_:2},1040)]),"no-option":l(()=>[e(h,null,{default:l(()=>[e(w,{class:"text-grey"},{default:l(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),_:1}),e(x),e(F,{align:"right"},{default:l(()=>[e(u,{flat:"",type:"submit",label:"Search",color:"primary",loading:o(t).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ke=v("div",{class:"text-h6"},"Tambah User Baru",-1),we={class:"q-gutter-md"},Ce=S({__name:"UsersCreateDialog",props:{roles:{}},emits:[...Q.emits],setup(g){const n=g,{dialogRef:i,onDialogOK:b,onDialogCancel:f,onDialogHide:d}=Q(),c=q(n.roles);function k(t,r){r(()=>{c.value=j(t,n.roles,["name"])})}const s=E({name:null,email:null,password:null,role:null});function _(){s.post(route("users.store"),{onSuccess:t=>{b({type:"positive",message:t.props.flash.success})}})}return(t,r)=>(p(),V(O,{ref_key:"dialogRef",ref:i,"no-backdrop-dismiss":!0,onHide:o(d)},{default:l(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:l(()=>[e(U,{class:"row items-center q-pb-none"},{default:l(()=>[ke,e(I),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(f)},null,8,["onClick"])]),_:1}),e(x),e(J,{onSubmit:T(_,["prevent"])},{default:l(()=>[e(U,{class:"scroll"},{default:l(()=>[v("div",we,[e(C,{outlined:"","hide-bottom-space":"","clear-icon":"close",label:"Name",modelValue:o(s).name,"onUpdate:modelValue":r[0]||(r[0]=a=>o(s).name=a),error:!!o(s).errors.name,"error-message":o(s).errors.name},null,8,["modelValue","error","error-message"]),e(C,{outlined:"","hide-bottom-space":"",type:"email","clear-icon":"close",label:"Email Address",modelValue:o(s).email,"onUpdate:modelValue":r[1]||(r[1]=a=>o(s).email=a),error:!!o(s).errors.email,"error-message":o(s).errors.email},null,8,["modelValue","error","error-message"]),e(C,{outlined:"","hide-bottom-space":"",type:"password","clear-icon":"close",label:"Password",modelValue:o(s).password,"onUpdate:modelValue":r[2]||(r[2]=a=>o(s).password=a),hint:"Default: 'password', jika tidak diisi.",error:!!o(s).errors.password,"error-message":o(s).errors.password},null,8,["modelValue","error","error-message"]),e(K,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","input-debounce":"500",label:"Role/Jabatan",modelValue:o(s).role,"onUpdate:modelValue":r[3]||(r[3]=a=>o(s).role=a),"option-value":"name","option-label":"name",options:c.value,error:!!o(s).errors.role,"error-message":o(s).errors.role,onFilter:k,class:"text-capitalize"},{option:l(a=>[e(h,A(B(a.itemProps)),{default:l(()=>[e(w,{class:"text-capitalize"},{default:l(()=>[y($(a.opt.name),1)]),_:2},1024)]),_:2},1040)]),"no-option":l(()=>[e(h,null,{default:l(()=>[e(w,{class:"text-grey"},{default:l(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"])])]),_:1}),e(x),e(F,{align:"right"},{default:l(()=>[o(s).hasErrors?(p(),V(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[4]||(r[4]=a=>o(s).clearErrors())})):z("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:r[5]||(r[5]=a=>o(s).reset())}),e(u,{flat:"",type:"submit",label:"Submit",color:"primary",loading:o(s).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),he=v("div",{class:"text-h6"},"Edit User",-1),Ve={class:"q-gutter-md"},xe=S({__name:"UsersEditDialog",props:{user:{},roles:{}},emits:[...Q.emits],setup(g){const n=g,{dialogRef:i,onDialogOK:b,onDialogCancel:f,onDialogHide:d}=Q(),c=q(n.roles);function k(t,r){r(()=>{c.value=j(t,n.roles,["name"])})}const s=E({id:n.user.id,name:n.user.name,email:n.user.email,password:null,role:n.user.role_name});function _(){s.patch(route("users.update",n.user.id),{onSuccess:t=>{b({type:"positive",message:t.props.flash.success})}})}return(t,r)=>(p(),V(O,{ref_key:"dialogRef",ref:i,"no-backdrop-dismiss":!0,onHide:o(d)},{default:l(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:l(()=>[e(U,{class:"row items-center q-pb-none"},{default:l(()=>[he,e(I),e(u,{flat:"",round:"",dense:"",icon:"close",onClick:o(f)},null,8,["onClick"])]),_:1}),e(x),e(J,{onSubmit:T(_,["prevent"])},{default:l(()=>[e(U,{class:"scroll"},{default:l(()=>[v("div",Ve,[e(C,{outlined:"","hide-bottom-space":"","clear-icon":"close",label:"Name",modelValue:o(s).name,"onUpdate:modelValue":r[0]||(r[0]=a=>o(s).name=a),error:!!o(s).errors.name,"error-message":o(s).errors.name},null,8,["modelValue","error","error-message"]),e(C,{outlined:"","hide-bottom-space":"",type:"email","clear-icon":"close",label:"Email Address",modelValue:o(s).email,"onUpdate:modelValue":r[1]||(r[1]=a=>o(s).email=a),error:!!o(s).errors.email,"error-message":o(s).errors.email},null,8,["modelValue","error","error-message"]),e(C,{outlined:"","hide-bottom-space":"",type:"password","clear-icon":"close",label:"Password",modelValue:o(s).password,"onUpdate:modelValue":r[2]||(r[2]=a=>o(s).password=a),error:!!o(s).errors.password,"error-message":o(s).errors.password},null,8,["modelValue","error","error-message"]),e(K,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","input-debounce":"500",label:"Role/Jabatan",modelValue:o(s).role,"onUpdate:modelValue":r[3]||(r[3]=a=>o(s).role=a),"option-value":"name","option-label":"name",options:c.value,error:!!o(s).errors.role,"error-message":o(s).errors.role,onFilter:k,class:"text-capitalize"},{option:l(a=>[e(h,A(B(a.itemProps)),{default:l(()=>[e(w,{class:"text-capitalize"},{default:l(()=>[y($(a.opt.name),1)]),_:2},1024)]),_:2},1040)]),"no-option":l(()=>[e(h,null,{default:l(()=>[e(w,{class:"text-grey"},{default:l(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"])])]),_:1}),e(x),e(F,{align:"right"},{default:l(()=>[o(s).hasErrors?(p(),V(u,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:r[4]||(r[4]=a=>o(s).clearErrors())})):z("",!0),e(u,{flat:"",label:"Reset",color:"secondary",onClick:r[5]||(r[5]=a=>o(s).reset())}),e(u,{flat:"",type:"submit",label:"Update",color:"primary",loading:o(s).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),Ue=v("div",{class:"text-h6"},"Delete Confirmation",-1),Qe=v("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),De=S({__name:"UsersDeleteDialog",props:{id:{}},emits:[...Q.emits],setup(g){const n=g,{dialogRef:i,onDialogOK:b,onDialogCancel:f,onDialogHide:d}=Q(),c=E({id:n.id});function k(){c.delete(route("users.destroy",n.id),{onSuccess:s=>{b({type:"positive",message:s.props.flash.success})}})}return(s,_)=>(p(),V(O,{ref_key:"dialogRef",ref:i,"no-backdrop-dismiss":!0,onHide:o(d)},{default:l(()=>[e(H,null,{default:l(()=>[e(U,{class:"row items-center q-pb-none"},{default:l(()=>[Ue]),_:1}),e(x),e(U,{class:"row items-center"},{default:l(()=>[e(te,{icon:"dangerous",color:"red","text-color":"white"}),Qe]),_:1}),e(F,{align:"right"},{default:l(()=>[e(u,{flat:"",label:"Cancel",color:"primary",onClick:o(f)},null,8,["onClick"]),e(u,{flat:"",label:"Yes, delete it",color:"red",onClick:k})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Ne=S({__name:"UsersPage",props:{users:{},roles:{}},setup(g){const n=[{label:"Master",url:"#"},{label:"Users",url:"#"}];return(i,b)=>{const f=ne("in-link");return p(),P(N,null,[e(o(ie),{title:"Users"}),e(le,null,{breadcrumbs:l(()=>[e(ee,{align:"left"},{default:l(()=>[(p(),P(N,null,Y(n,d=>ue(e(oe,{key:d.label,label:d.label},null,8,["label"]),[[f,d.url]])),64))]),_:1})]),default:l(()=>[e(o(be),{rows:i.users,roles:i.roles},null,8,["rows","roles"])]),_:1})],64)}}});export{Ne as default};
