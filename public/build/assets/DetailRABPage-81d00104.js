import{b as se,d as ne,e as P,f as N,Q as ie,_ as de,a as ue}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-2d866a3c.js";import{d as B,z as me,T,y as j,o as p,e as I,a as e,aa as X,w as t,b as c,u as a,c as k,h as b,Q as V,ab as v,g as u,ac as U,H as ce,F as Y,p as te,k as $,ad as K,j as S,i as Z,l as L,m as M,ag as pe,ah as fe,n as _e,Z as be,q as ge}from"./app-739fb669.js";import{a as F,c as q,b as O,Q as E,t as A,i as he}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-db61d37e.js";import{u as G,a as D,Q as d,b as ke,c as ve,d as Q,e as J,f as oe}from"./use-dialog-plugin-component-50d342aa.js";import{c as ye,a as ae,b as we,Q as re,_ as Ce}from"./QFile-8b049208.js";import{Q as W}from"./QForm-92572154.js";import{m as le}from"./options-964f32b0.js";import"./QImg-454d5644.js";import"./_plugin-vue_export-helper-c27b6911.js";const xe={class:"q-pa-md"},Re={class:"q-gutter-sm"},Ve={key:1},Ae={key:1},$e=B({__name:"RABItemTable",props:{rows:{},data:{},formOptions:{}},setup(y){const s=y,f=me(()=>{const _=s.rows.reduce((H,ee)=>H+ee.harga_satuan*ee.volume,0),x=r.tax/100*_,n=r.additional_tax/100*_;return{dpp:_,ppn:x,pph:n}}),r=T({tax:s.data.rab.tax,additional_tax:s.data.rab.additional_tax});function w(){r.patch(route("rab.update_tax",s.data.rab.id_rab))}const g=G();function i(){g.dialog({component:Be,componentProps:{id_rab:s.data.rab.id_rab}}).onOk(_=>{g.notify({type:_.type,message:_.message,position:"top"})})}function R(){g.dialog({component:Ne,componentProps:{rab:s.data.rab,options:s.formOptions}}).onOk(_=>{g.notify({type:_.type,message:_.message,position:"top"})})}function o(_){g.dialog({component:We,componentProps:{detailRab:_,options:s.formOptions}}).onOk(x=>{g.notify({type:x.type,message:x.message,position:"top"})})}function C(_){g.dialog({component:ta,componentProps:{id_detail_rab:_}}).onOk(x=>{g.notify({type:x.type,message:x.message,position:"top"})})}const h=[{name:"index",label:"#",field:"index"},{name:"uraian",label:"Uraian",field:"uraian",align:"left",sortable:!0},{name:"nama_satuan",label:"Satuan",field:"nama_satuan",align:"left",sortable:!0},{name:"harga_satuan",label:"Harga Satuan",field:"harga_satuan",align:"right",sortable:!0},{name:"volume",label:"Volume",field:"volume",align:"left",sortable:!0},{name:"total_harga",label:"Total Harga",field:"",align:"right",sortable:!0},{name:"keterangan",label:"Ket",field:"keterangan",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],l=j(!1);function m(){l.value=!l.value}const z=j("");return(_,x)=>(p(),I("div",xe,[e(ke,{flat:"",bordered:"","row-key":"id_detail_rab",rows:_.rows,columns:h,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:l.value,filter:z.value},X({"top-left":t(()=>[u("div",Re,[a(F)()||a(q)("create & modify rab")&&a(O)(_.data.rab)?(p(),k(b,{key:0,"no-caps":"",label:"Tambah Uraian RAB",icon:"add",color:"primary",onClick:R})):U("",!0),a(F)()||a(q)("create & modify rab")&&a(O)(_.data.rab)?(p(),k(b,{key:1,"no-caps":"",label:"Import dari CSV/XLS",icon:"upload_file",color:"green-8",onClick:i})):U("",!0)])]),"top-right":t(()=>[e(V,{dense:"",debounce:"300",modelValue:z.value,"onUpdate:modelValue":x[0]||(x[0]=n=>z.value=n),placeholder:"Search"},{append:t(()=>[e(ce,{name:"search"})]),_:1},8,["modelValue"]),e(b,{flat:"",dense:"",icon:l.value?"fullscreen_exit":"fullscreen",onClick:m,class:"q-ml-md"},null,8,["icon"])]),header:t(n=>[e(D,{props:n},{default:t(()=>[(p(!0),I(Y,null,te(n.cols,H=>(p(),k(ve,{key:H.name,props:n,style:{"font-weight":"bold"}},{default:t(()=>[c(v(H.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(n=>[e(D,{props:n},{default:t(()=>[e(d,{key:"index",props:n},{default:t(()=>[c(v(++n.rowIndex),1)]),_:2},1032,["props"]),e(d,{key:"uraian",props:n},{default:t(()=>[c(v(n.row.uraian),1)]),_:2},1032,["props"]),e(d,{key:"nama_satuan",props:n},{default:t(()=>[c(v(n.row.nama_satuan),1)]),_:2},1032,["props"]),e(d,{key:"harga_satuan",props:n},{default:t(()=>[c(v(a(A)(n.row.harga_satuan)),1)]),_:2},1032,["props"]),e(d,{key:"volume",props:n},{default:t(()=>[c(v(n.row.volume),1)]),_:2},1032,["props"]),e(d,{key:"total_harga",props:n},{default:t(()=>[c(v(a(A)(n.row.harga_satuan*n.row.volume)),1)]),_:2},1032,["props"]),e(d,{key:"keterangan",props:n},{default:t(()=>[c(v(n.row.keterangan),1)]),_:2},1032,["props"]),e(d,{key:"actions",props:n},{default:t(()=>[a(F)()||a(q)("create & modify rab")&&a(O)(_.data.rab)?(p(),k(b,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:t(()=>[e(se,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[e(ne,{dense:"",style:{"min-width":"100px"}},{default:t(()=>[e(P,{clickable:""},{default:t(()=>[e(N,{onClick:H=>o(n.row)},{default:t(()=>[c(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),e($),e(P,{clickable:""},{default:t(()=>[e(N,{class:"text-red",onClick:H=>C(n.row.id_detail_rab)},{default:t(()=>[c(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(p(),k(b,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:t(()=>[e(E,null,{default:t(()=>[c("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:2},[_.rows.length?{name:"bottom-row",fn:t(()=>[e(D,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" PPN ")]),_:1}),e(d,{class:"text-right"},{default:t(()=>[a(F)()||a(q)("create & modify rab")&&a(O)(_.data.rab)?(p(),k(V,{key:0,dense:"","reverse-fill-mask":"","hide-bottom-space":"",mask:"#.##","fill-mask":"0",modelValue:a(r).tax,"onUpdate:modelValue":x[1]||(x[1]=n=>a(r).tax=n),hint:"Click the button on the right to save","hide-hint":!a(r).isDirty},X({_:2},[a(r).isDirty?{name:"append",fn:t(()=>[e(b,{flat:"",dense:"",icon:"check",onClick:w},{default:t(()=>[e(E,null,{default:t(()=>[c("Click to update")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","hide-hint"])):(p(),I("span",Ve,v(_.data.rab.tax)+"%",1))]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(D,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" PPH ")]),_:1}),e(d,{class:"text-right"},{default:t(()=>[a(F)()||a(q)("create & modify rab")&&a(O)(_.data.rab)?(p(),k(V,{key:0,dense:"","reverse-fill-mask":"","hide-bottom-space":"",mask:"#.##","fill-mask":"0",modelValue:a(r).additional_tax,"onUpdate:modelValue":x[2]||(x[2]=n=>a(r).additional_tax=n),hint:"Click the button on the right to save","hide-hint":!a(r).isDirty},X({_:2},[a(r).isDirty?{name:"append",fn:t(()=>[e(b,{flat:"",dense:"",icon:"check",onClick:w},{default:t(()=>[e(E,null,{default:t(()=>[c("Click to update")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","hide-hint"])):(p(),I("span",Ae,v(_.data.rab.additional_tax)+"%",1))]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(D,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" Total RAB ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[c(v(a(A)(f.value.dpp)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(D,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" Nilai Kontrak ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[c(v(a(A)(f.value.dpp+f.value.ppn)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1}),e(D,{"no-hover":""},{default:t(()=>[e(d,{colspan:"4",style:{border:"none"}}),e(d,{class:"text-right"},{default:t(()=>[c(" Netto ")]),_:1}),e(d,{class:"text-right text-weight-bold"},{default:t(()=>[c(v(a(A)(f.value.dpp-f.value.pph)),1)]),_:1}),e(d,{colspan:"2",style:{border:"none"}})]),_:1})]),key:"0"}:void 0]),1032,["rows","fullscreen","filter"])]))}}),Se=u("div",{class:"text-h6"},"Import Uraian RAB",-1),Qe={class:"q-gutter-md"},Be=B({__name:"RABItemImportDialog",props:{id_rab:{}},emits:[...Q.emits],setup(y){const s=y,{dialogRef:f,onDialogOK:r,onDialogCancel:w,onDialogHide:g}=Q(),i=T({file:null});function R(){i.post(route("detail_rab.import",s.id_rab),{onSuccess:o=>{r({type:"positive",message:o.props.flash.success})}})}return(o,C)=>(p(),k(K,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(g)},{default:t(()=>[e(M,{style:{width:"500px","max-width":"80vw"}},{default:t(()=>[e(S,{class:"row items-center q-pb-none"},{default:t(()=>[Se,e(J),e(b,{flat:"",round:"",dense:"",icon:"close",onClick:a(w)},null,8,["onClick"])]),_:1}),e($),e(W,{onSubmit:Z(R,["prevent"])},{default:t(()=>[e(S,{class:"scroll"},{default:t(()=>[u("div",Qe,[e(b,{color:"green-8",icon:"download",label:"Template",href:"/storage/uploads/template_uraian_rab.xlsx"},{default:t(()=>[e(E,null,{default:t(()=>[c("Download template CSV/XLS")]),_:1})]),_:1}),e(ye,{outlined:"",counter:"","hide-bottom-space":"",modelValue:a(i).file,"onUpdate:modelValue":C[0]||(C[0]=h=>a(i).file=h),label:"Pick file",hint:"Format: csv, xls, xlsx",error:!!a(i).errors.file,"error-message":a(i).errors.file},null,8,["modelValue","error","error-message"])])]),_:1}),e($),e(L,{align:"right"},{default:t(()=>[a(i).hasErrors?(p(),k(b,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:C[1]||(C[1]=h=>a(i).clearErrors())})):U("",!0),e(b,{flat:"",label:"Reset",color:"secondary",onClick:C[2]||(C[2]=h=>a(i).reset())}),e(b,{flat:"",type:"submit",label:"Import",color:"primary",loading:a(i).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),De=u("div",{class:"text-h6"},"Tambah Uraian RAB",-1),qe={class:"q-gutter-md"},Ue={class:"row"},Te={class:"col-12 col-md-6 q-pr-sm"},He={class:"col-12 col-md-6 q-pl-sm"},Oe={class:"row"},Ie={class:"col-12 col-md-6 q-pr-sm"},Fe={class:"col-12 col-md-6 q-pl-sm text-right"},Ee=u("div",{class:"text-secondary text-caption"},"Total Harga",-1),Pe={class:"text-weight-bold text-subtitle1"},Ne=B({__name:"RABItemCreateDialog",props:{rab:{},options:{}},emits:[...Q.emits],setup(y){const s=y,{dialogRef:f,onDialogOK:r,onDialogCancel:w,onDialogHide:g}=Q(),i=j(s.options.satuan);function R(h,l){l(()=>{i.value=le(h,s.options.satuan,["nama_satuan"])})}const o=T({uraian:null,harga_satuan:0,volume:0,keterangan:null,id_satuan:null});function C(){o.post(route("detail_rab.store",s.rab.id_rab),{onSuccess:h=>{r({type:"positive",message:h.props.flash.success})}})}return(h,l)=>(p(),k(K,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(g)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(S,{class:"row items-center q-pb-none"},{default:t(()=>[De,e(J),e(b,{flat:"",round:"",dense:"",icon:"close",onClick:a(w)},null,8,["onClick"])]),_:1}),e($),e(W,{onSubmit:Z(C,["prevent"])},{default:t(()=>[e(S,{class:"scroll"},{default:t(()=>[u("div",qe,[e(V,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(o).uraian,"onUpdate:modelValue":l[0]||(l[0]=m=>a(o).uraian=m),error:!!a(o).errors.uraian,"error-message":a(o).errors.uraian},null,8,["modelValue","error","error-message"]),e(oe,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Satuan",modelValue:a(o).id_satuan,"onUpdate:modelValue":l[1]||(l[1]=m=>a(o).id_satuan=m),"option-value":"id_satuan","option-label":"nama_satuan",options:i.value,error:!!a(o).errors.id_satuan,"error-message":a(o).errors.id_satuan,onFilter:R},{"no-option":t(()=>[e(P,null,{default:t(()=>[e(N,{class:"text-grey"},{default:t(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),u("div",Ue,[u("div",Te,[e(V,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Harga Satuan",mask:"#.##","fill-mask":"0",modelValue:a(o).harga_satuan,"onUpdate:modelValue":l[2]||(l[2]=m=>a(o).harga_satuan=m),hint:a(A)(a(o).harga_satuan),"hide-hint":a(o).harga_satuan<1,error:!!a(o).errors.harga_satuan,"error-message":a(o).errors.harga_satuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),u("div",He,[e(V,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Volume",mask:"#.##","fill-mask":"0",modelValue:a(o).volume,"onUpdate:modelValue":l[3]||(l[3]=m=>a(o).volume=m),error:!!a(o).errors.volume,"error-message":a(o).errors.volume,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),u("div",Oe,[u("div",Ie,[e(V,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keterangan",modelValue:a(o).keterangan,"onUpdate:modelValue":l[4]||(l[4]=m=>a(o).keterangan=m),error:!!a(o).errors.keterangan,"error-message":a(o).errors.keterangan},null,8,["modelValue","error","error-message"])]),u("div",Fe,[Ee,u("div",Pe,v(a(A)(a(o).harga_satuan*a(o).volume)),1)])])])]),_:1}),e($),e(L,{align:"right"},{default:t(()=>[a(o).hasErrors?(p(),k(b,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[5]||(l[5]=m=>a(o).clearErrors())})):U("",!0),e(b,{flat:"",label:"Reset",color:"secondary",onClick:l[6]||(l[6]=m=>a(o).reset())}),e(b,{flat:"",type:"submit",label:"Submit",color:"primary",loading:a(o).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),je=u("div",{class:"text-h6"},"Edit Uraian RAB",-1),Ke={class:"q-gutter-md"},Le={class:"row"},Me={class:"col-12 col-md-6 q-pr-sm"},ze={class:"col-12 col-md-6 q-pl-sm"},Xe={class:"row"},Ye={class:"col-12 col-md-6 q-pr-sm"},Ze={class:"col-12 col-md-6 q-pl-sm text-right"},Ge=u("div",{class:"text-secondary text-caption"},"Total Harga",-1),Je={class:"text-weight-bold text-subtitle1"},We=B({__name:"RABItemEditDialog",props:{detailRab:{},options:{}},emits:[...Q.emits],setup(y){const s=y,{dialogRef:f,onDialogOK:r,onDialogCancel:w,onDialogHide:g}=Q(),i=j(s.options.satuan);function R(h,l){l(()=>{i.value=le(h,s.options.satuan,["nama_satuan"])})}const o=T({uraian:s.detailRab.uraian,harga_satuan:s.detailRab.harga_satuan,volume:s.detailRab.volume,keterangan:s.detailRab.keterangan,id_satuan:s.detailRab.id_satuan});function C(){o.patch(route("detail_rab.update",s.detailRab.id_detail_rab),{onSuccess:h=>{r({type:"positive",message:h.props.flash.success})}})}return(h,l)=>(p(),k(K,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(g)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(S,{class:"row items-center q-pb-none"},{default:t(()=>[je,e(J),e(b,{flat:"",round:"",dense:"",icon:"close",onClick:a(w)},null,8,["onClick"])]),_:1}),e($),e(W,{onSubmit:Z(C,["prevent"])},{default:t(()=>[e(S,{class:"scroll"},{default:t(()=>[u("div",Ke,[e(V,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Uraian",modelValue:a(o).uraian,"onUpdate:modelValue":l[0]||(l[0]=m=>a(o).uraian=m),error:!!a(o).errors.uraian,"error-message":a(o).errors.uraian},null,8,["modelValue","error","error-message"]),e(oe,{outlined:"",clearable:"","use-input":"","use-chips":"","emit-value":"","map-options":"","hide-bottom-space":"","input-debounce":"500",label:"Satuan",modelValue:a(o).id_satuan,"onUpdate:modelValue":l[1]||(l[1]=m=>a(o).id_satuan=m),"option-value":"id_satuan","option-label":"nama_satuan",options:i.value,error:!!a(o).errors.id_satuan,"error-message":a(o).errors.id_satuan,onFilter:R},{"no-option":t(()=>[e(P,null,{default:t(()=>[e(N,{class:"text-grey"},{default:t(()=>[c(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message"]),u("div",Le,[u("div",Me,[e(V,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Harga Satuan",mask:"#.##","fill-mask":"0",modelValue:a(o).harga_satuan,"onUpdate:modelValue":l[2]||(l[2]=m=>a(o).harga_satuan=m),hint:a(A)(a(o).harga_satuan),"hide-hint":a(o).harga_satuan<1,error:!!a(o).errors.harga_satuan,"error-message":a(o).errors.harga_satuan,"input-class":"text-right"},null,8,["modelValue","hint","hide-hint","error","error-message"])]),u("div",ze,[e(V,{outlined:"","reverse-fill-mask":"","hide-bottom-space":"",label:"Volume",mask:"#.##","fill-mask":"0",modelValue:a(o).volume,"onUpdate:modelValue":l[3]||(l[3]=m=>a(o).volume=m),error:!!a(o).errors.volume,"error-message":a(o).errors.volume,"input-class":"text-right"},null,8,["modelValue","error","error-message"])])]),u("div",Xe,[u("div",Ye,[e(V,{outlined:"",autogrow:"","hide-bottom-space":"",label:"Keterangan",modelValue:a(o).keterangan,"onUpdate:modelValue":l[4]||(l[4]=m=>a(o).keterangan=m),error:!!a(o).errors.keterangan,"error-message":a(o).errors.keterangan},null,8,["modelValue","error","error-message"])]),u("div",Ze,[Ge,u("div",Je,v(a(A)(a(o).harga_satuan*a(o).volume)),1)])])])]),_:1}),e($),e(L,{align:"right"},{default:t(()=>[a(o).hasErrors?(p(),k(b,{key:0,flat:"",label:"Clear Errors",color:"red",onClick:l[5]||(l[5]=m=>a(o).clearErrors())})):U("",!0),e(b,{flat:"",label:"Reset",color:"secondary",onClick:l[6]||(l[6]=m=>a(o).reset())}),e(b,{flat:"",type:"submit",label:"Update",color:"primary",loading:a(o).processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"]))}}),ea=u("div",{class:"text-h6"},"Delete Confirmation",-1),aa=u("span",{class:"q-ml-sm"},"Are you sure want to delete this data?",-1),ta=B({__name:"RABItemDeleteDialog",props:{id_detail_rab:{}},emits:[...Q.emits],setup(y){const s=y,{dialogRef:f,onDialogOK:r,onDialogCancel:w,onDialogHide:g}=Q(),i=T({id_detail_rab:s.id_detail_rab});function R(){i.delete(route("detail_rab.destroy",s.id_detail_rab),{onSuccess:o=>{r({type:"positive",message:o.props.flash.success})}})}return(o,C)=>(p(),k(K,{ref_key:"dialogRef",ref:f,"no-backdrop-dismiss":!0,onHide:a(g)},{default:t(()=>[e(M,null,{default:t(()=>[e(S,{class:"row items-center q-pb-none"},{default:t(()=>[ea]),_:1}),e($),e(S,{class:"row items-center"},{default:t(()=>[e(pe,{icon:"dangerous",color:"red","text-color":"white"}),aa]),_:1}),e(L,{align:"right"},{default:t(()=>[e(b,{flat:"",label:"Cancel",color:"primary",onClick:a(w)},null,8,["onClick"]),e(b,{flat:"",label:"Yes, delete it",color:"red",onClick:R})]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),oa=B({__name:"RABApprovalForm",props:{data:{}},setup(y){const s=y,f=G(),r=T({catatan:""});function w(){r.post(route("rab.approve",s.data.id_rab),{onSuccess:o=>{f.notify({type:"positive",message:o.props.flash.success,position:"top"})}})}function g(){r.post(route("rab.reject",s.data.id_rab),{onSuccess:o=>{f.notify({type:"positive",message:o.props.flash.success,position:"top"})}})}function i(){f.dialog({title:"Approval Confirmation",message:"Are you sure want to approve this data?",prompt:{model:r.catatan,type:"text",placeholder:"Tambahkan Catatan",autogrow:!0},cancel:{flat:!0,color:"secondary"},ok:"Confirm",persistent:!0}).onOk(o=>{r.catatan=o,w()})}function R(){f.dialog({title:"Rejection Confirmation",message:"Are you sure want to reject this data?",prompt:{model:r.catatan,type:"text",placeholder:"Tambahkan Catatan",autogrow:!0},cancel:{flat:!0,color:"secondary"},ok:"Confirm",persistent:!0}).onOk(o=>{r.catatan=o,g()})}return(o,C)=>(p(),k(re,{position:"bottom-right",offset:[18,18]},{default:t(()=>[e(we,{color:"primary",icon:"keyboard_arrow_left",direction:"left"},{label:t(({opened:h})=>[u("div",{class:fe({"example-fab-animate--hover":h!==!0})},v(h!==!0?"Approval":"Close"),3)]),default:t(()=>[e(ae,{color:"green-5",label:"Setujui",icon:"check",onClick:i}),e(ae,{color:"red",label:"Tolak",icon:"clear",onClick:R})]),_:1})]),_:1}))}}),ra=B({__name:"RABSubmissionForm",props:{data:{}},setup(y){const s=y,f=G(),r=T({catatan:""});function w(){r.post(route("rab.submit",s.data.id_rab),{onSuccess:i=>{f.notify({type:"positive",message:i.props.flash.success,position:"top"})}})}function g(){f.dialog({title:"Submission Confirmation",message:"Are you sure want to submit this data?",prompt:{model:r.catatan,type:"text",placeholder:"Tambahkan Catatan",autogrow:!0},cancel:{flat:!0,color:"secondary"},ok:"Confirm",persistent:!0}).onOk(i=>{r.catatan=i,w()})}return(i,R)=>(p(),k(re,{position:"bottom-right",offset:[18,18]},{default:t(()=>[e(b,{rounded:"",color:"primary",label:"Submit","icon-right":"check",onClick:g},{default:t(()=>[e(E,null,{default:t(()=>[c("Click to submit")]),_:1})]),_:1})]),_:1}))}}),fa=B({__name:"DetailRABPage",props:{detailRab:{},formOptions:{},rab:{},timeline:{}},setup(y){const s=y,f=[{label:"Main",url:"#"},{label:"RAB",url:route("rab")},{label:s.rab.nama_proyek,url:"#"}];return(r,w)=>{const g=_e("in-link");return p(),I(Y,null,[e(a(be),{title:"RAB"}),e(de,null,{breadcrumbs:t(()=>[e(ie,{align:"left"},{default:t(()=>[(p(),I(Y,null,te(f,i=>ge(e(ue,{label:i.label},null,8,["label"]),[[g,i.url]])),64))]),_:1})]),default:t(()=>[e(Ce,{title:"RAB","timeline-title":"Timeline Pengajuan RAB",data:{proyek:r.rab,status:r.rab.status_rab,timeline:r.timeline}},null,8,["data"]),e(a($e),{rows:r.detailRab,data:{rab:r.rab},"form-options":r.formOptions},null,8,["rows","data","form-options"]),a(q)("create & modify rab")&&a(O)(r.rab)&&r.detailRab.length?(p(),k(a(ra),{key:0,data:{id_rab:r.rab.id_rab}},null,8,["data"])):U("",!0),a(q)("approve rab")&&a(he)(r.rab)?(p(),k(a(oa),{key:1,data:{id_rab:r.rab.id_rab}},null,8,["data"])):U("",!0)]),_:1})],64)}}});export{fa as default};
