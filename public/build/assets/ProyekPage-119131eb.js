import{d as h,g as $,a as g,r as x,Q as b,i as M,n as V,f as H,b as J,_ as R,c as z}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-f8fe08d2.js";import{d as N,j as K,o as l,e as m,a as o,w as e,u as i,c as d,h as f,O as j,A as Z,F as P,k as q,b as n,t as c,n as C,s as G,g as F,m as U,Z as W}from"./app-651f5c8c.js";import{a as B,b as r,c as X,d as Y}from"./QTable-db3b72cd.js";import{Q as T}from"./QTooltip-b7a3ad90.js";import{f as D,a as ee,Q as ae,_ as oe,b as te,c as le,d as ne,e as se,C as S}from"./ProyekDeleteDialog.vue_vue_type_script_setup_true_lang-7b2e019a.js";import{t as re}from"./money-3074a8fc.js";import{u as ie}from"./use-quasar-1175def4.js";import"./QImg-3654d7aa.js";import"./use-dialog-plugin-component-e23f8103.js";import"./QForm-5f0747c8.js";import"./options-964f32b0.js";const ue={class:"q-pa-md"},ce={key:1,class:"text-h6"},de={key:0},pe=F("div",{class:"text-caption text-red"}," Close Proyek ",-1),fe=F("div",{class:"text-caption text-primary"}," Open Proyek ",-1),_e=N({__name:"ProyekTable",props:{rows:{},formOptions:{}},setup(v){const _=v,s=ie();function Q(t){s.dialog({component:oe,componentProps:{proyek:t}})}function w(){s.dialog({component:te,componentProps:{rows:_.rows,options:_.formOptions}})}function k(){s.dialog({component:le,componentProps:{options:_.formOptions}}).onOk(t=>{s.notify({type:t.type,message:t.message,position:"top"})})}function L(t){s.dialog({component:ne,componentProps:{proyek:t,options:_.formOptions}}).onOk(u=>{s.notify({type:u.type,message:u.message,position:"top"})})}function A(t){s.dialog({component:se,componentProps:{id_proyek:t}}).onOk(u=>{s.notify({type:u.type,message:u.message,position:"top"})})}const E=[{name:"index",label:"#",field:"index"},{name:"nama_proyek",label:"Nama Proyek",field:"nama_proyek",align:"left",sortable:!0},{name:"pengguna_jasa",label:"Pengguna Jasa",field:"pengguna_jasa",align:"left",sortable:!0},{name:"penyedia_jasa",label:"Penyedia Jasa",field:"penyedia_jasa",align:"left",sortable:!0},{name:"tahun_anggaran",label:"Tahun Anggaran",field:"tahun_anggaran",align:"left",sortable:!0},{name:"nilai_kontrak",label:"Nilai Kontrak",field:"nilai_kontrak",align:"right",sortable:!0},{name:"tanggal_mulai",label:"Tanggal Mulai",field:"tanggal_mulai",align:"left",sortable:!0},{name:"durasi",label:"Durasi (Hari)",field:"durasi",align:"left",sortable:!0},{name:"tanggal_selesai",label:"Tanggal Selesai",field:"tanggal_selesai",align:"left",sortable:!0},{name:"status_proyek",label:"Status",field:"status_proyek",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}],y=K(!1);function I(){y.value=!y.value}function O(t,u){j.patch(route("proyek.status",t),{status_proyek:u},{onSuccess:a=>{s.notify({type:"positive",message:a.props.flash.success,position:"top"})}})}return(t,u)=>(l(),m("div",ue,[o(X,{flat:"",bordered:"","row-key":"nama_proyek",rows:t.rows,columns:E,"rows-per-page-options":[10,15,20,25,50,0],fullscreen:y.value},{"top-left":e(()=>[i(h)("create & modify proyek")?(l(),d(f,{key:0,"no-caps":"",label:"Proyek Baru",icon:"add",color:"primary",onClick:k})):(l(),m("div",ce,"List Proyek"))]),"top-right":e(()=>[Object.keys(t.$page.props.query).length?(l(),d(f,{key:0,flat:"","no-caps":"",label:"Clear Filter",icon:"clear",color:"secondary",onClick:u[0]||(u[0]=a=>i(j).visit(t.route("proyek")))})):Z("",!0),o(f,{flat:"","no-caps":"",label:"Pencarian",icon:"search",color:"primary",onClick:w}),o(f,{flat:"",dense:"",icon:y.value?"fullscreen_exit":"fullscreen",onClick:I,class:"q-ml-md"},null,8,["icon"])]),header:e(a=>[o(B,{props:a},{default:e(()=>[(l(!0),m(P,null,q(a.cols,p=>(l(),d(Y,{key:p.name,props:a,style:{"font-weight":"bold"}},{default:e(()=>[n(c(p.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(a=>[o(B,{props:a},{default:e(()=>[o(r,{key:"index",props:a},{default:e(()=>[n(c(++a.rowIndex),1)]),_:2},1032,["props"]),o(r,{key:"nama_proyek",props:a},{default:e(()=>[o(f,{flat:"","no-caps":"",dense:"",color:"primary",ripple:!1,label:a.row.nama_proyek,onClick:p=>Q(a.row)},{default:e(()=>[o(T,{anchor:"bottom middle",self:"top middle"},{default:e(()=>[n(" Lihat Detail ")]),_:1})]),_:2},1032,["label","onClick"])]),_:2},1032,["props"]),o(r,{key:"pengguna_jasa",props:a},{default:e(()=>[n(c(a.row.pengguna_jasa),1)]),_:2},1032,["props"]),o(r,{key:"penyedia_jasa",props:a},{default:e(()=>[n(c(a.row.penyedia_jasa),1)]),_:2},1032,["props"]),o(r,{key:"tahun_anggaran",props:a},{default:e(()=>[n(c(a.row.tahun_anggaran),1)]),_:2},1032,["props"]),o(r,{key:"nilai_kontrak",props:a},{default:e(()=>[n(c(i(re)(a.row.nilai_kontrak)),1)]),_:2},1032,["props"]),o(r,{key:"tanggal_mulai",props:a},{default:e(()=>[n(c(i(D)(a.row.tanggal_mulai)),1)]),_:2},1032,["props"]),o(r,{key:"durasi",props:a},{default:e(()=>[n(c(a.row.durasi)+" Hari ",1)]),_:2},1032,["props"]),o(r,{key:"tanggal_selesai",props:a},{default:e(()=>[n(c(i(D)(a.row.tanggal_selesai)),1)]),_:2},1032,["props"]),o(r,{key:"status_proyek",props:a},{default:e(()=>[i(h)("create & modify proyek")?(l(),m("div",de,[o(ee,{dense:"","no-caps":"",size:"sm",color:a.row.status_proyek==400?"red":"primary",label:a.row.status_proyek==400?"Closed":"On Progress"},{default:e(()=>[o($,null,{default:e(()=>[a.row.status_proyek==="100"?C((l(),d(b,{key:0,dense:"",clickable:"",onClick:p=>O(a.row.id_proyek,"400")},{default:e(()=>[o(g,null,{default:e(()=>[o(x,null,{default:e(()=>[pe]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[S]]):C((l(),d(b,{key:1,dense:"",clickable:"",onClick:p=>O(a.row.id_proyek,"100")},{default:e(()=>[o(g,null,{default:e(()=>[o(x,null,{default:e(()=>[fe]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[S]])]),_:2},1024)]),_:2},1032,["color","label"])])):(l(),d(ae,{key:1,color:a.row.status_proyek==400?"red":"primary",label:a.row.status_proyek==400?"Closed":"On Progress"},null,8,["color","label"]))]),_:2},1032,["props"]),o(r,{key:"actions",props:a},{default:e(()=>[i(M)()||i(h)("create & modify proyek")&&i(V)(a.row.status_proyek)?(l(),d(f,{key:0,dense:"",flat:"",color:"blue-grey",icon:"more_vert"},{default:e(()=>[o(H,{"auto-close":"","transition-show":"scale","transition-hide":"scale"},{default:e(()=>[o($,{dense:"",style:{"min-width":"100px"}},{default:e(()=>[o(b,{clickable:""},{default:e(()=>[o(g,{onClick:p=>L(a.row)},{default:e(()=>[n(" Edit ")]),_:2},1032,["onClick"])]),_:2},1024),o(G),o(b,{clickable:""},{default:e(()=>[o(g,{class:"text-red",onClick:p=>A(a.row.id_proyek)},{default:e(()=>[n(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(l(),d(f,{key:1,dense:"",flat:"",color:"grey-6",icon:"block"},{default:e(()=>[o(T,null,{default:e(()=>[n("Required permission")]),_:1})]),_:1}))]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","fullscreen"])]))}}),Oe=N({__name:"ProyekPage",props:{proyek:{},formOptions:{}},setup(v){const _=[{label:"Main",url:"#"},{label:"Proyek",url:"#"}];return(s,Q)=>{const w=U("in-link");return l(),m(P,null,[o(i(W),{title:"Proyek"}),o(R,null,{breadcrumbs:e(()=>[o(J,{align:"left"},{default:e(()=>[(l(),m(P,null,q(_,k=>C(o(z,{label:k.label},null,8,["label"]),[[w,k.url]])),64))]),_:1})]),default:e(()=>[o(i(_e),{rows:s.proyek,"form-options":s.formOptions},null,8,["rows","form-options"])]),_:1})],64)}}});export{Oe as default};
